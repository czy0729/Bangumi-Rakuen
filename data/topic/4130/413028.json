{"id":413028,"avatar":"//lain.bgm.tv/pic/user/m/000/37/04/370405.jpg","floor":"#1","group":"LLM记录","groupHref":"/group/llm_record","groupThumb":"","message":"转：<a href=\"https://bgm.tv/group/topic/409561\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">今天有趣的发现：网址里的斜杠数量</a><br><br>在班固米按到一个帖子里的链接，可能由于写错了，在 bgm.tv 后多了一个斜杠，变成 bgm.tv//group/topic/xxx，但页面没有任何问题——除了很多依赖正则的组件和脚本失效了。<br><br>试了一下加更多斜杠，依然没问题。在协议 https: 后增加斜杠，会自动变为两个斜杠。在后面别的位置增加斜杠（包括末尾），会白屏。在别的网站也进行了试验：<br><br>- 豆瓣：在域名后增加斜杠，没有影响。在后面的位置增加斜杠，会导致最后的网址增加 ?_i=1505926VLnlBJ6 这样的参数，其中 1505926 随时间递增，再次增加会在最后增加 %2C1505954VLnlBJ6，其中 %2C 应该是 ,（逗号）。后来发现直接刷新也会有，应该是添防止浏览器缓存页面，确保用户每次访问都能看到最新内容。<br>- bilibili：在域名后及之后任何地方增加斜杠（包括末尾），都返回错误页面。<br>- 随便找的论坛网站：在哪里加都没事。<br><br>以下是搜索到的内容：<br><span style=\"font-weight:bold;\">为什么多个斜杠也能访问</span><br>- URL规范：根据URL的标准规范，多个连续的斜杠被认为是等价的，应该被解析为单个斜杠。<br>- 服务器配置：现代的Web服务器（如Apache、Nginx）和框架通常会处理这种情况，自动将多个斜杠规范化为一个，以确保请求的路径被正确解析。<br>- 文件系统：在文件系统路径中，多个斜杠也是等价的，因此在Web服务器上处理URL时会沿用这种规则。<br><br><span style=\"font-weight:bold;\">为什么每个网站不同</span><br>- Apache/Nginx：通常会自动规范化路径，处理连续斜杠。<br>- 自定义服务器逻辑：一些网站可能会在路由层或应用层增加额外的路径解析和检查逻辑。<br>- 安全考虑：限制多余的斜杠可以防止某些类型的攻击，比如路径遍历攻击。<br><br><span style=\"font-weight:bold;\">网址最后的斜杠是干什么的</span><br>- Web服务器行为：许多Web服务器会根据URL末尾的斜杠来处理请求。如果斜杠缺失而请求的是目录，服务器可能会自动重定向并在URL末尾添加斜杠。<br>- 相对路径解析：在HTML页面中，使用相对路径时，目录和文件的URL解析会有所不同。例如，<a href=\"page.html\"> 在目录URL中会相对于该目录解析，而在文件URL中会相对于文件所在的目录解析。<br>- 在网址末尾加了反斜杠是能加快网站载入，因为网址末尾加了反斜杠会直接告知浏览器现在指向的是一个目录，浏览器就能直接读取该目录下如index或home等默认文件。而没有加上反斜杠时浏览器首先会尝试读取根目录下的一个文件，如果没有该文件再查找一个与该文件同名的目录，最后才读取目录下的默认文件。<br>- 在seo方面考虑，习惯性的给自己网站的网址末尾加上反斜杠能避免重复内容。正如域名中是否带”www”的问题，url末尾是否有反斜杠也会造成重复内容的问题，这对于网站的seo无疑是不利的，要知道，重复内容绝对是seo的大忌。","time":"2024-12-28 23:56","title":"网址里的斜杠数量","userId":"inchei","userName":"茵陳","userSign":"(Hello darkness my old friend)"}