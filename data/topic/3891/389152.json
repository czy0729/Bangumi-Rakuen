{"id":389152,"avatar":"//lain.bgm.tv/pic/user/m/000/45/54/455472.jpg","floor":"#1","group":"番組WIKI計画","groupHref":"/group/wiki","groupThumb":"//lain.bgm.tv/pic/icon/m/000/00/01/128.jpg","message":"<a href=\"https://chii.in/dev/app/2827\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">组件安装地址</a>（推荐组件版，可以自动更新）<br><a href=\"https://greasyfork.org/zh-CN/scripts/478607-bangumi-auto-relate-infobox\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">脚本安装地址</a>（1.0.0及其之前版本的建议删除旧脚本重新安装，因为 url 变了<img src=\"/img/smiles/tv/13.gif\" smileid=\"52\" alt=\"(bgm36)\">）<br><br><span style=\"color: red;\">审核通过啦，现在最新版，组件(1.1.1)和脚本(1.1.4)是完全一样的，请勿同时启用</span><br><br><img src=\"https://p.sda1.dev/14/60058b72316ea1c071356a627e955802/1.png\" class=\"code\" rel=\"noreferrer\" referrerpolicy=\"no-referrer\" alt><br>使用步骤：<br>点击<span style=\"font-weight:bold;\">自动关联</span>按钮→等待完成→(可能需要手动去重)→点击<span style=\"font-weight:bold;\">保存关联数据</span>按钮。<br><br>说明：<br>1、点击“<span style=\"font-weight:bold;\">自动关联</span>”按钮后，将按<span style=\"font-weight:bold;\">规则</span>拆分每个职位填写的工作人员，然后自动搜索并匹配，<span style=\"font-weight:bold;\">完全匹配</span>后将添加到左边的列表，由于 bgm 前端匹配的规则，infobox 上填写的人员名称<span style=\"font-weight:bold;\">必须</span>和该人物页面原名<span style=\"font-weight:bold;\">完全一致</span>；<br><br>2、条目原先存在关联将保留，只会新增 infobox 上未关联的，若名称有多个匹配，如<span style=\"font-weight:bold;\">田中理恵</span>，将会把未关联的<span style=\"font-weight:bold;\">另一个</span>田中理恵也关联上去，通过此脚本添加的人员，如果<span style=\"font-weight:bold;\">同一职位</span>存在<span style=\"font-weight:bold;\">同名</span>的人员，将会标上背景色（如上图所示），进度条将会显示目前存在几个重复职位，请去重直至显示“去重完成”；<br><br>3、现有分割符基本满足 infobox 上各种写法的拆分，但是不包括空格和全角中点“・”。脚本版可以自行需求修改 <span style=\"font-weight:bold;\">SPLIT_RULE</span>（把分隔符扔到中括号里面去就行，需要转义的要记得加 \\）；<br><div class=\"codeHighlight\"><pre>const SPLIT_RULE = /[()\\[\\]{}（）<>《》「」『』.+·→/／、,，;；:：&＆\\\\]/;</pre></div><br><br>4、任务结束后，无职位对应的内容将被加上<span style=\"font-weight:bold;\">删除线</span>，右边的 infobox 将<span style=\"font-weight:bold;\">标红</span>未匹配的人员，点击后将跳转新建人物页面，并预先填写名字。<span style=\"color: red;\"><br><img src=\"https://p.sda1.dev/13/6f072c1c3e47addc937bc212fe98a147/1113.png\" class=\"code\" rel=\"noreferrer\" referrerpolicy=\"no-referrer\" alt><br>请注意查不到并非一定不存在</span>，新建人物时，建议点击最上面“<span style=\"font-weight:bold;\">人物类型</span>”旁边的“<span style=\"font-weight:bold;\">查找</span>”按钮，在新页面的左侧“<span style=\"font-weight:bold;\">相关人物</span>”查找下，若有则可将人物“加入关联”（参考下面第五点内容），若无再新建；<br><img src=\"https://p.sda1.dev/13/58ef4d6058794c2502a952e0b843b7dd/3.jpg\" class=\"code\" rel=\"noreferrer\" referrerpolicy=\"no-referrer\" alt><br><br>——————v1.1.0新增——————<br>5、关于一些人员实际存在却搜索不到的情况，如 KADOKAWA、黒須克彦等，可先在“<span style=\"font-weight:bold;\">全部</span>”类别搜索，然后从右边的<span style=\"font-weight:bold;\">相关人物</span>进入其人物页面，点击<span style=\"font-weight:bold;\">加入关联</span>按钮，之后就可以正常自动关联上了（存在 localStorage 里，因此换设备或浏览器需要重新加入关联...）。<br><img src=\"https://p.sda1.dev/13/b34d2ef3fcecfe56372c84aeb90f3bf7/2.png\" class=\"code\" rel=\"noreferrer\" referrerpolicy=\"no-referrer\" alt><br>如果是脚本版，对于 infobox 填写的别名比原名多几个字符（这将导致完全匹配结果为不一致，如填写“周刊老年XXXX”，原名是“老年XXXX”）的情况，可点编辑脚本，修改 <span style=\"font-weight:bold;\">bgmIdMap </span>，往 Map 里添加 \"别名\": id 格式的键值对即可。<br><div class=\"codeHighlight\"><pre>let bgmIdMap = {<br>    'KADOKAWA': 19306<br>    , \"别名\": id ...<br>};</pre></div>","time":"2023-10-29 01:05","title":"[组件/脚本] 自动关联 infobox 制作人员 (v1.1.1)","userId":"wikiaka","userName":"​ウィキ専用垢","userSign":"(ふくふく)"}