{"id":23712,"avatar":"//lain.bgm.tv/pic/user/m/000/01/04/10478.jpg","floor":"#1","group":"～技术宅真可怕～","groupHref":"/group/a","groupThumb":"//lain.bgm.tv/pic/icon/m/000/00/00/11.jpg","message":"经过长期和幼裤肉搏，出现了61秒的广告（59秒我就忍了<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\">），于是决定自己想想办法小小研究了一下<br>打开 YOUKU_FSO_PROXY.sol 看了一下<br>这个里面有当前广告的总时间和广告的来源，以及当前已经经过的时间，<br><br>图直接看很小，右键查看图片就好了<br><img width=\"317\" height=\"200\" src=\"http://s1.upload.tf/3/1369501290x1249754390.png\" border=\"0\" alt class=\"code\"><br><img width=\"317\" height=\"200\" src=\"http://s1.upload.tf/3/1369501315x1249754390.png\" border=\"0\" alt class=\"code\"><br><br>nowtime就是当前经过的时间，total就是当前广告的总时长<br>在这个名为 adRefreshInfo 的 obj 下面组里安排了三段广告 边上的序号就是 “0” “1“ ”2\" 三段 <br>我选中\"0\"这个广告名为 RS 的这个string<br><img width=\"317\" height=\"200\" src=\"http://s1.upload.tf/3/1369501782x1249710791.png\" border=\"0\" alt class=\"code\"><br><br>看到地址<br><br><a href=\"http://f.youku.com/player/getFlvPath/sid/136950072823212327255_00/st/flv/fileid/030002010051736F131553003E88033DC1311F-8E59-D18A-55CE-F7E34F86525B?K=1694beede26acab4261d0604&hd=0&myp=0&ts=232&ymovie=1&ypp=0\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">http://f.youku.com/player/getFlv ... ;ymovie=1&ypp=0</a><br><br>用工具下载下来一看 <br>得到 flv文件 <a href=\"https://docs.google.com/file/d/0B1rl6MnQzMmwTnFURVkxeEtKcE0/edit?usp=sharing\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">https://docs.google.com/file/d/0 ... E0/edit?usp=sharing</a><br><br><img width=\"246\" height=\"200\" src=\"http://s1.upload.tf/3/1369501966x1249710164.png\" border=\"0\" alt class=\"code\"><br><br>这个sol里的adHoldingInfo不知道是什么东西 有个叫time的数值 ，还有个叫ADTime 但是那数值改了也没什么效果好像<br>quality的string就是用户所设置的默认最高清晰度 <br><br>自从幼裤长姿势了之后，如果用户把这个sol设置为只读，那么youku会再给你建立一个名为sxx的同名文件,其实就是那个sol改个后缀，里面的内容是和这个sol是一样的，你再把这个sxx设置为只读，或者把这两个文件都清空设置同名文件并设置只读也没用，可能在其他地方还有类似的东西<br><br>static.youku.com文件夹下的irs_ftrack.sol 这一堆文件是保存了每个视频对应的ID，分段信息，缓冲进度，当前播放时间节点 以提供下次打开继续上次位置的播放或者暂停继续播放等<br><br>到底在哪里保存这些信息呢  <img src=\"/img/smiles/tv/01.gif\" smileid=\"40\" alt=\"(bgm24)\"><br><br><br><span style=\"text-decoration: line-through;\">update : 05/26 也许 大家把hosts加入一条 0.0.0.0 valf.atm.youku.com 就没广告了，不知道我添加的其他youku的host去0.0.0.0是否也会一起起效，总之现在没广告了</span><br><br>update #2: 05/30<br>今日幼裤再次更新，需要加入新的host<br>现在所需的host条目如下<br><span style=\"background-color:#555;color:#555;border:1px solid #555;\">0.0.0.0 valf.atm.youku.com<br>0.0.0.0 vid.atm.youku.com</span> ","time":"2013-5-26 01:31","title":"幼裤广告研究","userId":"tonyshva","userName":"美味可口的翩翩","userSign":"(tonyshva)"}