{"avatar":"//lain.bgm.tv/pic/user/m/000/28/76/287622.jpg","floor":"#1","group":"～技术宅真可怕～","groupHref":"/group/a","groupThumb":"//lain.bgm.tv/pic/icon/m/000/00/00/11.jpg","message":"起因是一个在站外点格子的脚本…<br><br>一开始是直接裸写，然后发现不行，太难维护了，HTML JS CSS都混在一起，编辑器的自动补全也没法正常工作，想了一下，直接用webpack打包算了，简直脱离苦海…<br><br>有生成userscript需要的meta注释的问题，就把自己用的代码拿了出来，写成了webpack插件放到了npm上去。（参考了maia-yt和wrapper-webpack-plugin）<br><br><a href=\"https://github.com/Trim21/userscript-metadata-webpack-plugin\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">https://github.com/Trim21/userscript-metadata-webpack-plugin</a><br><br>具体用法在readme<br><br>另一个是GM_XMLHttpRequest实在是太难用了，跨域又是刚需，Ajax库我之前一直用的是axios，再加上axios可以自定义adapter，就魔改了别人的一个项目（<a href=\"https://github.com/damoclark/axios-gmxhr-adapter\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">https://github.com/damoclark/axios-gmxhr-adapter</a>）<br>原来的项目作者在GitHub上销声匿迹一年了，而且本来不应该有什么问题的代码我在chrome+tampermonkey的环境下竟然跑不了<br>动。自己动手丰衣足食修完了bug提issue和pr也好久没回复我，就干脆直接重新写了一个，也提交了npm<br><br><a href=\"https://github.com/Trim21/axios-userscript-adapter\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">https://github.com/Trim21/axios-userscript-adapter</a><br><br>用例也在readme里，建议搭配webpack使用。<br><br>自己用来打包用户脚本的webpack配置，不用vue和scss就把vue部分去掉好了。 <a href=\"https://github.com/Trim21/bilibili-bangumi-tv-auto-tracker/blob/master/userscript/config/webpack.config.js\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">https://github.com/Trim21/bilibi ... g/webpack.config.js</a> ","time":"2018-7-30 03:06","title":"写用户脚本过程中的两个副产品…","userId":"trim21","userName":"Trim21","userSign":"(异端比异教徒更可恨)"}