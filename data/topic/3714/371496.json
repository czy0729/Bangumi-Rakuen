{"id":371496,"avatar":"//lain.bgm.tv/pic/user/m/000/31/77/317704.jpg","floor":"#1","group":"～技术宅真可怕～","groupHref":"/group/a","groupThumb":"//lain.bgm.tv/pic/icon/m/000/00/00/11.jpg","message":"讨论主旨：用 Github Actions 自动备份的 Bangumi 数据所可能涉及的问题？<br><br>出发点：数据备份失效的一个重要原因是操作的繁琐性。如果每次都要手工备份，可能久而久之就懒得操作了。自动化且有校验的备份才是好的备份。现在虽然 Bangumi Takeout 和 Bangumi Takeout More 两个项目提供了一些 Bangumi 数据的导出功能，且通过 Google Colab 提供了一个简单的图形界面，但依然没有实现完全的自动化。<br><br>提案：编写 Github Actions 模板。需要备份的用户在 Github 上创建 Repo 并直接套用，填入个人信息（如 Bangumi API Token）和备份频次（日 / 周 / 月...）后即可自动运行。<br><br>暂无解决方案：<br>- Q1 导出数据的完整度：个人收藏和收视进度可以通过向 Bangumi Takeout 提供 API Token 导出，但日志、讨论、目录若要用 Bangumi Takeout More 导出则需要 Cookies，在 Github Actions 的运行机制下可能难以提供。<br><br>已有解决方案：<br>- Q2 对 Bangumi 服务器的负载：数据导出不是 Bangumi 的主要功能，不应该对 Bangumi 服务器造成显著负载。可以借由增量更新减少每次导出时的数据量，并为导出时间加 jitter 以避免请求风暴。<br><br>- Q3 用户使用的便利性：虽然程序员群体可能对 Github 不陌生，但是并不能将这一假设应用于全体 Bangumi 用户上。Github Actions 提供了套用模板的功能，如果有需要再加上一些简要的文字引导，应该可以解决。<br><br>以上只是自己的一些思考，如果还有问题也欢迎各位提出一起讨论。<br><br>Update：已放弃。 ","time":"2022-7-11 14:18","title":"（已放弃）基于 Github Actions 自动备份 Bangumi 数据？","userId":"317704","userName":"NekoNull","userSign":""}