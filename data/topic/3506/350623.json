{"id":350623,"avatar":"//lain.bgm.tv/pic/user/m/000/42/60/426050.jpg","floor":"#1","group":"～技术宅真可怕～","groupHref":"/group/a","groupThumb":"//lain.bgm.tv/pic/icon/m/000/00/00/11.jpg","message":"用的python里requests的包<br>1.获取授权拿code<br>要拿code的时候，我尝试用：<br><div class=\"codeHighlight\"><pre>params = {\"response_type\":\"code\",<br>        \"client_id\":\"bgm123456789\",<br>        \"redirect_uri\":\"https://example-app.com/redirect\"<br>        }<br>r_auth =  requests.get('https://bgm.tv/oauth/authorize', params = params)</pre></div><br>但是得到的uri是长这样：<a href=\"https://bgm.tv/login?chii_referer=..............\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">https://bgm.tv/login?chii_referer=..............</a><br>应该是因为需要登陆才能授权，所以我查了查源码，试了下<br><div class=\"codeHighlight\"><pre>payload = {'email': '12345@abc.com', 'password': '12345'}<br>r_auth = r_auth.post(r_auth.url, data=payload)</pre></div><br>得到的依然是一样的uri。在网上查了很久怎么用requests登陆，看得我挺懵的，所以就先放弃了，直接在浏览器里输入长长的一串，然后点击授权，就跳到我给的redirect_uri去把code给我了。<br><br>2.用 code换取 Access Token<br>这一步我觉得我应该是用了正确的姿势：<br><div class=\"codeHighlight\"><pre>json1 = {<br>        'grant_type' : 'authorization_code',<br>        'client_id' : 'bgm123456789',<br>        'code' : '123abc123abc',<br>        'redirect_uri' : 'https://example-app.com/redirect',<br>        'client_secret':'987654321'<br>        }<br>requests.post('https://bgm.tv/oauth/access_token', data = json1)<br></pre></div><br>然而响应回来的却是400<br><div class=\"codeHighlight\"><pre>{'error': 'redirect_uri_mismatch',<br>'error_description': 'The redirect URI is missing or do not match',<br>'error_uri': 'http://tools.ietf.org/html/rfc6749#section-4.1.3'}</pre></div><br>可是rederict_uri我确定没填错，所以这个真没办法了。<br><br>所以我的问题是：<br>1.获取授权拿code里，因为要求用GET，所以我可以比较笨地直接在浏览器里直接输入，跳转到授权界面的时候可以手动登陆然后点击授权，这样就会跳到redirect_uri。但是怎样用代码实现？<br>2.用code换取Access Token我就彻底不会了，不知道为啥出现'The redirect URI is missing or do not match'也不知道咋解决，请大佬们不吝赐教<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\"> ","time":"2019-5-7 19:57","title":"[已解决]萌新提问：baugumi api的授权","userId":"oalvay","userName":"Oalvay","userSign":""}