{"id":368926,"avatar":"//lain.bgm.tv/pic/user/m/000/53/20/532070.jpg","floor":"#1","group":"～技术宅真可怕～","groupHref":"/group/a","groupThumb":"//lain.bgm.tv/pic/icon/m/000/00/00/11.jpg","message":"有些字体真的看着就是一种折磨(中易宋体, arial等等)。经过在网上搜索已经找到能替换大部分网页的大部分字体的方法，但是仍有一些漏网之鱼，不知道大家有没有什么好办法。<br><br>先讲一下我的方法：<br>1. 首先我用了stylus插件，通过类似以下代码已经可以替换掉大部分的字体了。<br><img src=\"https://s2.loli.net/2022/04/15/TuZIjPrD4UqV9JY.png\" class=\"code\" rel=\"noreferrer\" referrerpolicy=\"no-referrer\" alt><br>不过仍有例外：<br><img src=\"https://s2.loli.net/2022/04/15/R9vx6sezFn247Wm.png\" class=\"code\" rel=\"noreferrer\" referrerpolicy=\"no-referrer\" alt><br>像这种代码块的地方，可以看见西文字体已经从Courier替换成了Fira Code，但是中文字体依然是SimSun(中易宋体)，即使stylus里面写了<div class=\"codeHighlight\"><pre>@font-face { font-family: 'SimSun'; src: local('Source Han Serif SC'); }</pre></div>。虽然不是很懂前端，但是其大概原因是汉字被fallback到了monospace，而monospace的默认中文字体是SimSun，不能使用样式替换掉？以及同理像是sans-serif, serif, system-ui这些保留词都不能替换掉。为了解决这些问题又有了以下方案。<br>2. (firefox中，其他浏览器不知道有没有对应方法) about:config修改font.name-list.(monospace|sans-serif|serif).(x-western|zh-CN)为想要的字体，layout.css.system-ui.enabled为false。<br><img src=\"https://s2.loli.net/2022/04/15/OWVFCjKvMJUib2Z.png\" class=\"code\" rel=\"noreferrer\" referrerpolicy=\"no-referrer\" alt><br>这样一来对应locale的monospace / sans-serif / serif就都是自己指定的字体了，system-ui则会直接被无视掉。(原本在Windows环境下是Microsoft Yahei UI)<br><br>就算这样，仍会有一些离谱的例外：<br><img src=\"https://s2.loli.net/2022/04/15/vZCek9V8q2b3twR.png\" class=\"code\" rel=\"noreferrer\" referrerpolicy=\"no-referrer\" alt><br><p style=\"text-align: center;\">(<a href=\"https://bgm.tv/blog/52329\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">BBCode 试验板</a> 明明直接使用了Arial却没有被替换)</p><br><img src=\"https://s2.loli.net/2022/04/15/aDuBkj6Lri4eldb.png\" class=\"code\" rel=\"noreferrer\" referrerpolicy=\"no-referrer\" alt><br><p style=\"text-align: center;\">(把前面的无关的都删掉了却反而被替换了)</p><br><img src=\"https://s2.loli.net/2022/04/15/gZmeNvLSXIHl9Rx.png\" class=\"code\" rel=\"noreferrer\" referrerpolicy=\"no-referrer\" alt><br><p style=\"text-align: center;\">(<a href=\"https://www.google.com/search?q=tahoma&tbm=isch\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">tahoma - Google 搜索</a>最离谱的，样式中就没有\"Tahoma\"，about:config中的所有的Tahoma也都换掉了，却还是Tahoma?)</p><br><br>很好奇这些是什么原因？ ","time":"2022-4-15 14:25","title":"如何在浏览器中彻底干掉某些字体","userId":"posthumz","userName":"posthumz","userSign":""}