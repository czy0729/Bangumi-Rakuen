{"avatar":"//lain.bgm.tv/pic/user/m/000/36/16/361639.jpg","floor":"#1","group":"用户脚本 · 样式 · 插件","groupHref":"/group/u_devs","groupThumb":"//lain.bgm.tv/pic/icon/m/000/00/41/4116.jpg?r=1478867893","message":"修改自<a href=\"https://bgm.tv/group/topic/347962\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">[脚本/组件]条目列表排序&筛选<br></a><br>经常看到眼熟的staff人名不知道自己看过啥，本脚本能将已经标记过的条目排序提前。<br>建议配合自动加载页面脚本使用：<a href=\"https://bgm.tv/dev/app/17\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">https://bgm.tv/dev/app/17</a><br><br><div class=\"codeHighlight\"><pre><br>// ==UserScript==<br>// @name         Bangumi 与我有关条目<br>// @version      0.1<br>// @description  对条目列表进行与我相关排序<br>// @author       发光的球<br>// @include      /^https?://(bgm\\.tv|bangumi\\.tv|chii\\.in)/.*<br>// [user=grant]七濑[/user]        none<br>// ==/UserScript==<br><br>(function() {<br>    let arr = [];<br>    const showBtn = document.createElement('a');  showBtn.addEventListener('click', SortByRank);  showBtn.className = 'chiiBtn';  showBtn.href='javascript:;';   showBtn.textContent = '与我有关';document.querySelector('#browserTools').append(showBtn);<br>    function Related(colletionString){<br>        let index = colletionString.search(\"修改\")>0? 0: 9999;<br>        return index;<br>    }<br>    function SortByRank() {<br>        let itemsList = document.querySelectorAll('#browserItemList li.item');<br>        let container = document.querySelector('ul#browserItemList');<br>        if(arr.length != itemsList.length){<br>            let larr = [];<br>            for(let i=0;i<itemsList.length;i++) {<br>                arr[i]=itemsList[i];<br>                larr[i]=itemsList[i];<br>            }<br>            larr.sort(function(li1,li2){<br>                let n1=li1.querySelector('.inner')? Related(li1.querySelector('.inner .collectBlock').textContent): 9999;<br>                let n2=li2.querySelector('.inner')? Related(li2.querySelector('.inner .collectBlock').textContent): 9999;<br>                return (n1-n2);});<br>            for(let i=0; i<larr.length; i++)     $('#browserItemList').append(larr[i]);<br>        }else{<br>            for(let i=0; i<arr.length; i++)     $('#browserItemList').append(arr[i]);<br>            for(let i=0;i<itemsList.length;i++)  arr[i]=itemsList[i];<br>        }<br>    }<br>})();<br></pre></div><br><br>大概不会do的to do：<br>让它对角色列表也有效<br><br>还有，为什么以上内容会触发CF的Block，得用bangumi.tv才能提交<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\"> ","time":"2020-1-5 17:12","title":"[脚本]优先显示已标记的条目","userId":"361639","userName":"发光的球","userSign":"(温柔可爱的小男孩最棒了)"}