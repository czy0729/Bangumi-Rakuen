{"id":351033,"avatar":"//lain.bgm.tv/pic/user/m/000/31/34/313469.jpg","floor":"#1","group":"番组开发","groupHref":"/group/dev","groupThumb":"//lain.bgm.tv/pic/icon/m/000/00/41/4180.jpg?r=1519373244","message":"<a href=\"https://bgm.tv/dev/app/1086\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">组件链接</a><br><a href=\"https://github.com/bangumi/scripts/blob/master/cedar/spoilerFakeBBcode.user.js?raw=true\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">脚本安装</a><br><a href=\"https://cdn.jsdelivr.net/gh/bangumi/scripts/cedar/spoilerFakeBBcode.user.js\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">备用安装</a><br><a href=\"https://github.com/bangumi/scripts/blob/master/cedar/spoilerFakeBBcode.user.js\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">查看源码</a><br><br>一个简易的提供折叠功能的组件<br><span style=\"color: red;\">只有启用组件的人才能看到效果</span><br>支持夜间模式<br><br>查看<a href=\"https://bgm.tv/blog/280960\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">我的使用实例</a><br>2019-7-22终于有除了我以外的第二位使用者啦! 感动!<br><br>效果图:<br><img src=\"//lain.bgm.tv/pic/photo/l/b9/9c/313469_L0VbS.jpg\" class=\"code\" alt><br>效果图已过时..新边框比这个好看, 比较像code块的那种细边框<br><br>写法类似BBcode：<br><div class=\"codeHighlight\"><pre>=== 写法说明 ===<br>[spoiler=我是标题]<br>我是内容<br>[/spoiler]<br><br>[fold=标题可省略]<br>内容可以随意添加BBcode<br>[/fold]<br><br>[hide]<br>总共三种关键字:<br>spoiler, fold, hide<br>不区分大小写<br>效果相同 凭个人喜好选择<br>为什么会有三种请看#5的讨论<br>[s](小孩子才做选择 大人我全都要!)[/s]<br>[/hide]<br><br>[spoiler]<br>允许像这样混用..虽然不建议..<br>(只是因为混用的代码更容易实现..)<br>[/fold]</pre></div><br><br>但是与真正的BBcode有区别. 限制更多.<br>有些需要注意的点：<br><br><div class=\"codeHighlight\"><pre>=== 注意事项 ===<br>※因为是用户组件, 所以其他人想看到折叠效果必须启用组件. 否则只会看到纯文本.<br>可能有人会觉得添加这些bbcode不美观..对不启用组件的人不友好..<br>添加如下限制(除了代码好写之外)也是为了尽量让组件不影响普通用户的阅读..<br><br><br>※无论是开始标签还是结束标签都必须独占一行. 首尾除了空格外不能添加其他字符.<br><br>[spoiler=错误示范]这样写无效[/spoiler]<br><br>[fold=错误示范]我不是空格<br>这样写也无效<br>我也不是空格[/fold]<br><br>    [hide=正确示范]     ←这儿空格很多<br>这样写有效! (虽然大概没人会这样写吧..嗯..<br>         [/hide]    ←这儿空格也不少<br><br><br>※不能嵌套使用<br>[fold=outer]<br>[spoiler=inner]<br>我是内层内容<br>[/spoiler]<br>我是外层内容<br>[/fold]<br>以上写法会出错.<br><br><br>※不能在外面添加BBcode (但你可以在里面添加)<br>[size=16][b]<br>[spoiler]<br>不能这样写<br>[/spoiler]<br>[/b][/size]<br><br>[spoiler]<br>[size=16][b]但是可以这样写[/b][/size]<br>[img]也能加图.jpg[/img]<br>或别的BBcode<br>[/spoiler]</pre></div><br><br>相似组件指路:<br><a href=\"https://bgm.tv/group/topic/350757\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">代码块超进化！</a><br><br>======<br><br>以下内容已过时.<br>(前6楼的讨论是针对以下内容的)<br>[spoiler=过时内容]<br>把内容改简洁了一点 再顶一次..如果还是没什么回复的话我就......就发个脚本算了<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\"> 将来更新也方便..组件试着提交一下, 过不过审无所谓了吧<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\"><br>目前我只知道两个人需要..其中一个是我自己b38<br><br><span style=\"text-decoration: line-through;\">求回复呀! 你们不回复我怎么知道是不需要还是没看到呀</span><br>终于有<a href=\"https://bgm.tv/group/topic/351112#post_1453608\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">回复</a>了! 并不是没看到, 是真的不需要! 挺好的 只是我现在就这个表情→<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\"><br>既然需求小的话那sai就不太可能更新这个功能 那我就可以按自己的想法来 不用想太多了 (虽然我也没很庞大的想法 也不觉得继续增加这种代码是好事b38<br><br><span style=\"font-size:10px; line-height:10px;\"><br>======<br><br>在发布前有几个问题想先征求一下意见..<br><br><span style=\"font-weight:bold;\">问题0</span><br>这组件有存在的必要么<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\"><br>毕竟只有启用组件的人才看得到效果, 没启用的只会保留原样..<br>但是自己写日志还是用得上的..<br><br><span style=\"font-weight:bold;\">问题1</span><br>这个问题比较重要..<br><br><div class=\"codeHighlight\"><pre>是喜欢风格A<br>[spoiler=我是标题]<br>我是内容<br>[/spoiler]<br><br>还是风格B<br>*=== title here ===*<br>前后加星号<br>就默认折叠<br>等号数量不限<br>*==================*<br>!*=== title here ===*!<br>再加感叹号<br>就默认展开<br>!*==================*!</pre></div><br>风格A更像BBcode, 要是以后BBcode内置了折叠功能 也许可以兼容(然后我的组件就可以退役了<img src=\"/img/smiles/tv/51.gif\" smileid=\"90\" alt=\"(bgm74)\">)<br>风格B更像标题, 对不启用组件的人比较友好, 类似我的另一个组件<a href=\"https://bgm.tv/group/topic/350757\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">代码块超进化！</a>的想法..<br><br>另外, 对于风格A, 关键字用spoiler还是用fold?<br>楼下提议用fold, 更贴近\"折叠\"的含义..但是这是个历史问题, 折叠最初的功能就是防剧透(spoiler), tsdm和mcbbs用的关键字都是spoiler, 搜索spoiler bbcode也能找到与\"折叠\"有关的结果(而fold则不行)<br>我觉得沿用spoiler关键字, 跟其他bbcode兼容会比较好..如果不同意的人比较多才会考虑改<br><br>有别的风格也可以提<br><br><span style=\"font-weight:bold;\">问题2</span><br>标题摆在哪里? 是摆在按钮旁边, 还是替换按钮里的文字?<br>或者干脆去掉标题功能（意思是只能写[spoiler], 不能写[spoiler=标题]）, 只能手动加标题?<br><br>手动加标题可以自己用BBcode加样式<br>摆在按钮旁边的话就要我统一加样式(我只会加粗)<br>替换按钮里的文字就完全没有样式 (样子类似tsdm)<br><br><span style=\"text-decoration: line-through;\"><span style=\"font-weight:bold;\">问题3</span><br>想要什么样子的按钮?<br>是跟发评论时那个\"加上去\"按钮一样的蓝色按钮<br>还是跟老论坛一样的简单朴实的默认按钮 (就是一个方框)<br>还是跟发新讨论时看到的\"添加新讨论\"一样的浅灰色按钮<br>暂定默认按钮. 蓝色按钮不太搭, 而浅灰色按钮是个超链接tag, 可能会被外围的BBcode影响到字号(虽然目前暂时不支持)</span><br>按钮样式不那么重要就不问了, 暂定默认按钮.<br><br>备注: 目前我的代码实现的是风格A, spoiler关键字, 默认按钮, 标题显示在按钮内.</span><br>[/spoiler] ","time":"2019-6-7 02:55","title":"[脚本/组件] 折叠Bangumi (虽然需要折叠功能的人非常少 但我还是写出来了)","userId":"313469","userName":"Cedar","userSign":"(｡´-д-)"}