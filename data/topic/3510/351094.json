{"id":351094,"avatar":"//lain.bgm.tv/pic/user/m/000/31/84/318489.jpg","floor":"#1","group":"番组开发","groupHref":"/group/dev","groupThumb":"//lain.bgm.tv/pic/icon/m/000/00/41/4180.jpg?r=1519373244","message":"----------------编辑于2019年7月1日---------------------<br>现在项目已经开工了（开工有几天了），<a href=\"https://github.com/Trickness/AliceNoKagami/tree/developing\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">项目地址</a>。<br><br>姑且简单介绍下现在干了啥和设计思路吧：<br>1. 将网页数据结构化，即输入参数为班固米网页URI，返回的是结构化的数据<br>2. 提供同步、异步接口，方便后续开发<br>3. 利用sqlite构建了一个本地的数据库，缓存已访问过的网页<br><br>接口形式：<br><div class=\"codeHighlight\"><pre>Alice->GetParsedContentSync(“https://bgm.tv/subject/282395”,CachePolicy::FIRST_FROM_CACHE)</pre></div><br><div class=\"codeHighlight\"><pre>Alice->GetParsedContentAsync(“https://bgm.tv/subject/282395”,CachePolicy::FIRST_FROM_CACHE, Callback_proc)</pre></div><br><br>现在还在苦逼结构化网页数据中...................详情请访问<a href=\"https://github.com/Trickness/AliceNoKagami/blob/developing/src/Bangumi/BangumiAdaptor.cpp\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">源代码</a><br><br><br>----------------编辑于2019年6月15日---------------------<br>目前计划是采用C++写，内含Boost.Asio网络库，数据库采用 sqlite<br><br>数据库做内容的cache和版本控制。<br>1.   内容cache ： 在bgm服务器不稳定时提供内容cache，但是需要曾经访问过。<br>2.   版本控制：bgm的wiki有更新的情况时，可以索引旧版本，包括cv的证件照、staff表、diff等。（感觉没什么用）<br><br><br>----------------编辑于2019年6月12日-------------------<br>鉴于开发热情高涨<span style=\"background-color:#555;color:#555;border:1px solid #555;\">（马上期末考试完）</span>，又不想继续摸鱼下去了，想开一个坑，构建一个标准化的Bangumi开发库，<span style=\"font-weight:bold;\">我认为</span>它应该包括以下内容：<br><br>1. 可被引用性<br>       一个标准化的开发库，它应当是可以被引用到各种应用程序中的。<br>2. 跨平台性<br>       该库应该有各个平台的实现，以便让不同平台的应用程序能够直接接入。<br>3. 稳定性与异步性<br>       该库除稳定外，还应当提供内构的异步网络访问系统，防止主线程等待，降低在该库基础上开发新应用软件的难度。<br>4.  拥有足够的功能<br>       鉴于目前官方API的功能有限，可能的话，该库应当是基于爬虫的，这样才能提供足够的功能接入。<br>5.  可扩展且功能可自定的<br>        不同情况下需要使用到的功能不一定相同，该开发库应当可自行修改、删除或添加编译模块，以满足足够的可自订性。<br><br>想起再加........有什么问题可以在下方留言<img src=\"/img/smiles/tv/01.gif\" smileid=\"40\" alt=\"(bgm24)\"> ","time":"2019-6-12 12:22","title":"【议】标准Bangumi开发库 UPDATE July 1st","userId":"318489","userName":"魔法使","userSign":""}