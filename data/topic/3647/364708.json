{"id":364708,"avatar":"//lain.bgm.tv/pic/user/m/000/35/41/354111.jpg","floor":"#1","group":"～技术宅真可怕～","groupHref":"/group/a","groupThumb":"//lain.bgm.tv/pic/icon/m/000/00/00/11.jpg","message":"以前用的vivo的xplay5s所以从来没尝试过小尾巴，现在换了K40想整一个玩玩。<br><br>到asr和l7audiolab那里看了下，发现cs43131普遍指标不错，就去咸鱼买了个ibasso的dc03，体验挺不错的。就是体型有点大，就又买了个50包邮的魅族线。<br>根据大佬的测量<a href=\"https://zhuanlan.zhihu.com/p/94991395\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">魅族HiFi解码耳放与魅族HiFi解码耳放Pro评测</a>，骗阻后可以有更好的声音，然后就发现我这条骗阻后会有底噪<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\">。<br><br>具体来说无论是否播放音乐，左右耳都有固定频率的滴答声，频率大概是时钟秒针滴答声的四五倍。并且控制变量在电脑、手机和ipad上，16欧和90欧的耳塞下，不同的转接线和转接头骗阻都能听到。音乐播放的时候基本可以掩盖掉，但是小音量下确定还是可以听得到。（如果不骗阻的话是听不到这个滴答声的）<br><br>到网上搜了一圈没看到相关内容，就又蹲了两天买了第二个60包邮的魅族线，到手发现问题依旧<img src=\"/img/smiles/tv/13.gif\" smileid=\"52\" alt=\"(bgm36)\">。而且对比发现，在手机上这个第二根的滴答声更小了，但是在ipad和电脑上则和第一根差不多。<br>根据网上有人说魅族线开了透明窗，容易受到电磁干扰，我就给第一根裹了铝箔纸和热缩管做屏蔽，但是滴答声还在，看来应该不是这个原因，感觉可能是电源噪声的问题<img src=\"/img/smiles/tv/80.gif\" smileid=\"119\" alt=\"(bgm103)\">。<br><br>顺便在对比测试中发现几个有趣的东西。<br><br>第一是老生常谈的安卓SRC问题。<br>我用Apple Music没法避免SRC，无论如何都是使用AUDIO_OUTPUT_FLAG_DEEP_BUFFER标识和MixerThread。使用Solid Explorer的本地播放器就会调用OffloadThread可以避免SRC。而用poweramp的时候，原生耳机孔（模拟小尾巴）是DirectOutputThread，但是数字小尾巴（USB输出）却是MixerThread，不清楚为啥。UAPP就懒得试了，自从Apple Music出了无损就不想折腾本地播放了。<br><br>反编译后发现Apple Music用的是ExoPlayer2的库，是不支持AudioTrack.isDirectPlaybackSupported的比较早的代码，而Solid Explorer应该用的是MediaPlayer，和这篇<a href=\"https://zhuanlan.zhihu.com/p/364564846\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">https://zhuanlan.zhihu.com/p/364564846</a>中的小米10Pro一致（我用的MIUI欧版12.5）。<br>尝试用magisk修改audio_policy_configuration.xml和audio_io_policy.conf只能让Apple Music使用AUDIO_OUTPUT_FLAG_NONE，并且强制384kHz采样率，骗阻之后声音劣化很严重，音量越小越明显，底噪也很大。暂时放弃<br><br>第二个是音量步进的问题。<br>audio_policy_engine_stream_volumes_mi.xml显示一共有15档，并且实测使用音量键调整音量确实只有15挡。然后用adb shell dumpsys media.audio_flinger调试，可以看到和配置文件中指定的音量衰减是一致的。<br><br>但是如果手动拉动音量条的话，就可以调节出不在配置文档中的db数，并且此时再按音量键就可以在原来配置的基础上按照差额进行增减。难怪poweramp显示系统默认的volume levels是151<img src=\"/img/smiles/tv/14.gif\" smileid=\"53\" alt=\"(bgm37)\">。<br><br>并且有一个独立app音量的功能，启用后可以独立调整每个app的媒体音量，在调试中显示出来就是L db和R db，而G db应该就是全局音量<br><img src=\"https://i.imgur.com/5fsQruL.jpeg\" class=\"code\" rel=\"noreferrer\" referrerpolicy=\"no-referrer\" alt><br><br>第三个是小尾巴的问题<br>魅族pro版本停产，咸鱼卖出传家宝的价格就没考虑了。结果这两天发现dc03也停产了，也开始传家宝起来了<img src=\"/img/smiles/tv/80.gif\" smileid=\"119\" alt=\"(bgm103)\">，二手卖的比当初全新还贵，幸亏我买的时候还没炒起来。<br>而且魅族在win下用foobar2000使用wasapi播放dsd只能输出24位，在smzdm看到评论才知道。<br><img src=\"https://i.imgur.com/6lW8iwH.png\" class=\"code\" rel=\"noreferrer\" referrerpolicy=\"no-referrer\" alt><br><br>结论就是用安卓机接小尾巴听Apple Music可真难啊<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\"> ","time":"2021-8-28 23:59","title":"搞了两根魅族的小尾巴，结果都有问题？","userId":"sqliuchang","userName":"sqliuchang","userSign":""}