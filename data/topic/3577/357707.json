{"id":357707,"avatar":"//lain.bgm.tv/pic/user/m/000/06/98/69822.jpg","floor":"#1","group":"～技术宅真可怕～","groupHref":"/group/a","groupThumb":"//lain.bgm.tv/pic/icon/m/000/00/00/11.jpg","message":"这是可以自己修改iframe内嵌网页源码的情况，如果嵌入的网页不可修改源码，纯前端方法想不到有什么好办法。<br><br>今天有个页面居然有这么个需求，iframe容器页面和iframe地址是不同域的，网上有一堆旧时代的做法，具体可以搜索，五花八门，有比较蠢得在父页面设置定时器云云；有比较骚的，在iframe页面里再嵌入一个和父页面同域的iframe，url传参然后操纵容器宽度的。还有很多在现代浏览器上根本行不或者跨域就不行的就不说了。<br>最后用的h5时代的最新接口，postMessage，网上都没有搜到这种解决方案，希望借bgm的搜索权重拯救一下后来者<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\">，实现也简单的多，事件驱动又优雅<br><div class=\"codeHighlight\"><pre><br>    //子页面<br>    let height =  document.body.scrollHeight<br>    window.parent.postMessage({height:height+100}, '*')   //实际发现还是有一点滚动条，加个100（<br></pre></div><br><div class=\"codeHighlight\"><pre><br>    //父页面<br>addEventListener('message', e => {<br>    let height = e.data.height<br>    let iframe = document.getElementById(\"iframeid\")<br>    iframe.style.height = height + \"px\"<br>})<br></pre></div> ","time":"2020-7-13 18:18","title":"iframe如何根据内容自适应高度？","userId":"shadowdreamer","userName":"CureDovahkinn🤔","userSign":"(プリキュアなりたい)"}