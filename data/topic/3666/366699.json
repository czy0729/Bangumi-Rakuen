{"id":366699,"avatar":"//lain.bgm.tv/pic/user/m/000/31/77/317704.jpg","floor":"#1","group":"～技术宅真可怕～","groupHref":"/group/a","groupThumb":"//lain.bgm.tv/pic/icon/m/000/00/00/11.jpg","message":"如果系统全局启用了黑暗模式，超展开的首页右侧默认依然是白底，有些刺眼。Devtool 看了一下，应该是 background 设定的问题，黑暗模式下虽然文字颜色修改了，但是 background 用的图片依然是白底的。<br><br>先试着用 CSS override，然而似乎无法把 CSS 应用到右侧栏的 iframe 中。之后又试着用 userscript 在页面加载完成后手动改对应元素的 style 属性，似乎是可以用了，然而因为页面加载完成才应用，实际上会先闪一下白色背景再变黑。<br><br>想要了解下有没有什么办法可以避免一开始的白色闪烁？<br><br>更新：感谢 3# 的回复，用 DOMContentLoaded 替换 load 后白屏时间明显缩短，现在看起来和正常的页面加载已经没有什么区别了。<br><br>效果<br><a href=\"https://sm.ms/image/pPJyjY569K87zUc\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\"><img src=\"https://s2.loli.net/2021/12/20/pPJyjY569K87zUc.png\" class=\"code\" rel=\"noreferrer\" referrerpolicy=\"no-referrer\" alt></a><br><br>代码<br><div class=\"codeHighlight\"><pre><br>// ==UserScript==<br>// @name         超展开首页黑暗模式修复<br>// @namespace    http://tampermonkey.net/<br>// @version      0.1<br>// @description  超展开首页右侧栏即使在黑暗模式下依然是白色背景。本扩展试图解决这一问题。<br>// @author       You<br>// @match        https://bgm.tv/rakuen<br>// @icon         https://www.google.com/s2/favicons?domain=bgm.tv<br>// @grant        none<br>// ==/UserScript==<br><br>(function() {<br>    'use strict';<br><br>    document.querySelector('#contentFrameWrapper > iframe').contentWindow.addEventListener('DOMContentLoaded', (event) => {<br>        document.querySelector('#contentFrameWrapper > iframe').contentDocument.body.style.background = \"\";<br>        document.querySelector('#contentFrameWrapper > iframe').contentDocument.body.querySelector(\"body > div.eden_rec_box\").style = \"background: none\";<br>    });<br><br>})();<br></pre></div> ","time":"2021-12-20 15:54","title":"userscript 超展开首页黑暗模式求助","userId":"317704","userName":"NekoNull","userSign":""}