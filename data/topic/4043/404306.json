{"id":404306,"avatar":"//lain.bgm.tv/pic/user/m/000/73/35/733513.jpg","floor":"#1","group":"番组开发","groupHref":"/group/dev","groupThumb":"//lain.bgm.tv/pic/icon/m/000/00/41/4180.jpg?r=1519373244","message":"<span style=\"font-weight:bold;\"><span style=\"font-size:25px; line-height:25px;\">## 背景</span></span><br><br>前两天偶然注意到 <a href=\"https://deno.com/kv\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">Deno KV</a> 和 <a href=\"https://deno.com/deploy\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">Deno Deploy</a>，随后发现后者还有免费方案，起了兴致，想写些什么练练手。<br>恰巧最近经常能在 bangumi 上看到有人希望能有单集评分功能，我觉得正好可以试着实现一下。<br><br><span style=\"font-weight:bold;\"><span style=\"font-size:25px; line-height:25px;\">## 功能</span></span><br><br>目前比较基础：<br>- <span style=\"font-weight:bold;\">现在章节页面、条目章节列表、首页和条目页面都有适配</span><span style=\"color: grey;\"><span style=\"font-size:10px; line-height:10px;\">先前：<span style=\"text-decoration: line-through;\">只能在章节页面打分，而章节列表、其他页面的章节悬浮框等等地方都还没有适配</span></span></span>；<br>- <span style=\"font-weight:bold;\">已实现在章节页面的吐槽旁显示吐槽者公开的评分</span><span style=\"color: grey;\"><span style=\"font-size:10px; line-height:10px;\">先前：<span style=\"text-decoration: line-through;\">只有自己知道自己打了多少分，不过之后可能会实现在吐槽箱的评论里显示评论者的打分之类的功能（画饼）</span></span></span>。<br><br><span style=\"font-weight:bold;\"><span style=\"font-size:25px; line-height:25px;\">## 链接</span></span><br><br><span style=\"color: red;\"><span style=\"font-weight:bold;\">超合金组件</span></span>（推荐）：<a href=\"https://chii.in/dev/app/3263\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">https://chii.in/dev/app/3263</a><br><span style=\"color: red;\"><span style=\"font-weight:bold;\">用户脚本/userscript</span></span>：<a href=\"https://greasyfork.org/en/scripts/505098\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">https://greasyfork.org/en/scripts/505098</a>（由于加上了 namespace，之前通过 gist 安装的人麻烦手动删掉先前的版本。）<br><br>源代码：<a href=\"https://github.com/umajho/bangumi-episode-ratings\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">https://github.com/umajho/bangumi-episode-ratings</a>。<br>想一出是一出，完全没有规范，见谅 <img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\"><br><br><span style=\"font-weight:bold;\"><span style=\"font-size:25px; line-height:25px;\">## 截图</span></span><br><br>章节页面：<br><img src=\"https://p.sda1.dev/19/61efb4b6da5420b8a847b0cadb4d56cc/Screen Shot 2024-08-25 at 05.52.08.png\" class=\"code\" rel=\"noreferrer\" referrerpolicy=\"no-referrer\" alt><br><img src=\"https://p.sda1.dev/19/9ad99edfafe3faaacbbeb1996b69532a/Untitled-2.png\" class=\"code\" rel=\"noreferrer\" referrerpolicy=\"no-referrer\" alt><br><br>条目章节列表页面（原先放在三楼）：<br><img src=\"https://p.sda1.dev/19/54317c105876018766b9d61623bc279a/Screen Shot 2024-08-27 at 02.20.26.png\" class=\"code\" rel=\"noreferrer\" referrerpolicy=\"no-referrer\" alt><br><br>悬浮框（原先放在四楼）：<br><img src=\"https://p.sda1.dev/19/163fee57d0a32184ad72772cf6868834/Untitled.png\" class=\"code\" rel=\"noreferrer\" referrerpolicy=\"no-referrer\" alt><br><br><span style=\"font-weight:bold;\"><span style=\"font-size:25px; line-height:25px;\">## 可用性</span></span><br><br>Deno Deploy 这样的 serverless 平台好就好在不用操心基础设施相关的问题，只要免费额度还在本功能就一直能用。不过我也不确定每月的免费额度能支撑多少人使用本功能…<br><br>另外，作为一个练手项目，到目前<span style=\"color: grey;\"><span style=\"font-size:10px; line-height:10px;\"><span style=\"text-decoration: line-through;\">我只是想快速地把原型写出来，所以还没有开始写测试，最多只是手动试了试各个功能看起来是否运作</span></span></span>我只写了一些基本的测试。<br><br><span style=\"font-weight:bold;\"><span style=\"font-size:25px; line-height:25px;\">## 额外说明</span></span><br><br>只看评分不需要授权配套的应用，但打分需要。<br>这个应用实际上不会使用授权得到的任何权限[^1]，只是通过授权这套流程确认一下登录用户是谁。<br><br>[^1]: 我发了<a href=\"https://chii.in/group/topic/404279\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">另一个主题</a>在问能不能缩减授权得到的权限。","time":"2024-8-25 06:09","title":"尝试实现了单集评分功能","userId":"um","userName":"um","userSign":"(单集评分功能：bgm.tv/group/topic/404306)"}