{"id":366095,"avatar":"//lain.bgm.tv/pic/user/m/000/31/77/317704.jpg","floor":"#1","group":"～技术宅真可怕～","groupHref":"/group/a","groupThumb":"//lain.bgm.tv/pic/icon/m/000/00/00/11.jpg","message":"事情的起因是某门实验课提供的文档是 PDF 格式的，从 PDF 文件里直接复制代码，会顺带附上一些奇奇怪怪的字符（例如零宽空格），导致无法运行或是结果不符合预期。<br>（遇到这种问题的时候，推荐先上 <a href=\"https://apps.timwhitlock.info/unicode/inspect\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">Unicode Inspector</a> 看看）<br><br>找了找，有一个 VS Code 插件可以把这种诡异的字符（称之为 Bad Character）高亮出来：<a href=\"https://marketplace.visualstudio.com/items?itemName=wengerk.highlight-bad-chars\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">Highlight Bad Chars</a>。然而高亮出来虽然好看到了，但是还是要手动一个个删除。<br><br>这种重复性的工作怎么能让人来做呢？抱着作为程序员「宁化一小时自动化，不花五分钟手动做」的精神，查看了插件的代码，找到了其使用的 Bad Character 列表（<a href=\"https://github.com/WengerK/vscode-highlight-bad-chars/blob/master/src/bad-characters.ts\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">见此</a>），然后手动处理了一下，最后得到一个正则表达式，就可以直接替换了。<br><br>表达式本体<br><div class=\"codeHighlight\"><pre>\\u0082|\\u0084|\\u0085|\\u0088|\\u0091|\\u0092|\\u0093|\\u0094|\\u0095|\\u0096|\\u0097|\\u0099|\\u00a0|\\u00a6|\\u00ab|\\u00bb|\\u00bc|\\u00bd|\\u00be|\\u00bf|\\u00a8|\\u00b1|\\u1680|\\u180e|\\u2000|\\u2001|\\u2002|\\u2003|\\u2004|\\u2005|\\u2006|\\u2007|\\u2008|\\u2009|\\u200a|\\u200b|\\u200d|\\u2013|\\u2014|\\u2028|\\u202f|\\u205f|\\u3000|\\ufeff|\\ufffc|\\u0000|\\u0001|\\u0002|\\u0003|\\u0004|\\u0005|\\u0006|\\u0007|\\u0008|\\u000b|\\u000c|\\u000e|\\u000f|\\u0010|\\u0011|\\u0012|\\u0013|\\u0014|\\u0015|\\u0016|\\u0017|\\u0018|\\u0019|\\u001a|\\u001b|\\u001c|\\u001d|\\u001e|\\u001f|\\u007f|\\u061c|\\u200e|\\u200f|\\u202a|\\u202b|\\u202c|\\u202d|\\u202e|\\u2066|\\u2067|\\u2068|\\u2069|\\u200b|\\u037e|\\u00b8|\\u01c0|\\u2223|\\u00ad</pre></div><br><br>构造<br><div class=\"codeHighlight\"><pre>console.log(bad_char_list.map((a) => \"\\\\u\"+a.codePointAt(0).toString(16).padStart(4,'0')).join(\"|\"))</pre></div> ","time":"2021-11-15 23:48","title":"替换 Bad Character 的正则表达式","userId":"317704","userName":"NekoNull","userSign":""}