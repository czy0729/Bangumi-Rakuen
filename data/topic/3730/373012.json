{"id":373012,"avatar":"//lain.bgm.tv/pic/user/m/000/45/19/451958.jpg","floor":"#1","group":"～技术宅真可怕～","groupHref":"/group/a","groupThumb":"//lain.bgm.tv/pic/icon/m/000/00/00/11.jpg","message":"版本：opencv460，c++<br><div class=\"codeHighlight\"><pre>// mat_c4 为4通道，希望去除a通道<br><br>vector<cv::Mat> vec4C;<br>cv::split(mat_c4, vec4C);  // 4通道分离到4个向量<br>vec4C.pop_back(); // 删除最后的alpha向量<br>cv::Mat mat_c3;<br>merge(vec4C, mat_c3); // 合并向量到新矩阵<br>return mat_c3;</pre></div><br>&#x1F446;上面这段代码的写法是合适的吗，复制来复制去会不会浪费不必要的时间？有没有直接改指针来删除a通道的方法？<br><br>另外，mat_c4 是从位图BITMAP得到的&#x1F447;。有无可能在这一步，就得到3通道mat？<br><div class=\"codeHighlight\"><pre>      BITMAP bmp; // 存放指向缓冲区的指针，缓冲区接收有关指定图形对象的信息<br>      // hbm 为 HBITMAP 文件句柄<br>      GetObject(hbm, sizeof(BITMAP), &bmp); // 获取指定图形对象的信息<br>      int nChannels = bmp.bmBitsPixel == 1 ? 1 : bmp.bmBitsPixel / 8; // 根据色深计算通道数，32bit为4，24bit为3<br>      long sz = bmp.bmHeight * bmp.bmWidth * nChannels; // 图片大小（字节）<br>      cv::Mat mat_c4(cv::Size(bmp.bmWidth, bmp.bmHeight), CV_MAKETYPE(CV_8U, nChannels));  // 创造4通道空矩阵，传入位图大小和深度<br>      GetBitmapBits(hbm, sz, mat_c4.data); // 将句柄hbm中sz个字节复制到缓冲区mat_c4.data</pre></div><br><br>感谢大家的赐教！<img src=\"/img/smiles/tv/01.gif\" smileid=\"40\" alt=\"(bgm24)\"> ","time":"2022-9-15 09:52","title":"关于 Opencv 四通道转三通道问题（去除alpha）","userId":"451958","userName":"冈崎羽未鹰原汐","userSign":"(二阶堂芽爱 小河坂青空)"}