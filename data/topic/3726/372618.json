{"id":372618,"avatar":"//lain.bgm.tv/pic/user/m/000/44/07/440736.jpg","floor":"#1","group":"～技术宅真可怕～","groupHref":"/group/a","groupThumb":"//lain.bgm.tv/pic/icon/m/000/00/00/11.jpg","message":"这套方案感觉可能会比较适合不太想折腾的学生党？<br><br><span style=\"font-weight:bold;\"># 背景</span><br>我手头有一台笔记本电脑（装有 Windows 10 Pro），硬盘只有 1TB，所以买了个移动硬盘来装各种视频、音乐等资源。把资源下载到移动硬盘之后当然就会想要把下载好的视频串流到手机/平板上，这样搭配懒人支架就可以躺在床上爽看动画了。<br><br><span style=\"font-weight:bold;\"># 尝试过程</span>（如果懒得看可以跳过）<br>上网查了下 NAS，感觉好贵！NAS 本身就要一两千，NAS 专用硬盘又要一两千（算上比较流行的 RAID 冗余的话），NAS 那些花里胡哨的功能（自动备份手机相册之类的）我又不太需要。<br>然后我就琢磨能不能简单一点，咱只要把硬盘里的视频安全地串流到其他设备就行了。用 windows, video, streaming 作为关键词，我一开始找到了 Windows Media Streaming 这个方案。也就是进入到控制面板的“网络和共享中心”，在左边能找到一个“媒体流式处理选项”，就是它。手机端搭配 VLC，也可以用。不过用了一段时间之后发现这东西不太稳定，VLC 经常性地点进去之后找不到任何视频，不知道是 VLC 的问题还是服务器的问题。另外用各种视频客户端访问 Media Streaming 服务器都只能找到视频本身，如果有外挂字幕就没辙了。<br>我发现 VLC 也支持普通的 SMB 分享，所以就想试一试。SMB 设置起来还是很简单的，就是 Windows 自带的文件共享功能，选个文件夹，右键属性就能找到。共享出去之后 VLC 可以打开，而且可以加载外挂字幕。不过有个问题，就是 VLC 打开一个文件夹有时会特 别 特 别 慢。所以我去 Play Store 上下载了一大串视频播放器挨个测试，发现 MX Player 很快很稳定，同时也支持外挂字幕。iPadOS 上用 Infuse 效果非常好（外挂字幕的特效也渲染得特别好），不用付费也够用。<br><br><span style=\"font-weight:bold;\"># 方案总结</span>：说白了就是用 Windows 自带的文件共享，足够了。<br>Android 上的串流客户端用 <a href=\"https://play.google.com/store/apps/details?id=com.mxtech.videoplayer.pro&hl=zh&gl=US\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">MX Player Pro</a>；<br>iOS 上的串流客户端用 <a href=\"https://apps.apple.com/us/app/infuse-7/id1136220934\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">Infuse</a> (免费版)；<br>Meta Quest 2 上的串流客户端用 <a href=\"https://www.oculus.com/experiences/quest/2063931653705427/?locale=zh_CN\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">SKYBOX VR Player</a> (暂不支持字幕特效)。<br><br><span style=\"font-weight:bold;\"># 访问鉴权</span><br>如何不让室友发现我是个二次元？只要把电脑上的 Guest 账户禁用（Windows 10 上面应该是默认禁用的），那么想要访问你的 SMB Server 就必须需要你电脑的登录凭据（也就是你平时使用的 Windows 用户的用户名和密码）。如果是直接用 Microsoft 账户新建的本地账户的话，用户名就是 Microsoft 账户的邮箱地址。至于密码，那一定要搞一个强密码才不会被室友轻易爆破，反正平时登录的时候只要用 Windows Hello PIN （或者指纹）就行了。<br>如果你电脑上有其他没有密码的账户（比如 ESET 防盗功能新建的幻影账户），那也可以在“高级共享选项”（文件夹属性 -> “共享”选项卡 -> 高级共享）里面设置权限，只要把权限赋给有密码保护的账户就可以了。<br><br><span style=\"font-weight:bold;\"># 远程下载</span><br>既然已经躺在床上爽看动画了，等没动画可看的时候自然也不想只是为了开始下载就从床上爬起来<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\">。我正在用的 qBittorrent 自带 Web UI 功能，开启之后就可以实现远程操控 qBittorrent 了，还可以设置用户名密码防止室友偷窥()。自带的前端在移动端基本没法用，所以我用 <a href=\"https://github.com/WDaan/VueTorrent\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">VueTorrent</a> 替代了自带前端。<br><br><span style=\"font-weight:bold;\"># 自动下载</span><br><a href=\"https://mikanani.me/\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">Mikan Project</a> 真是个好网站！我原来试过 RSS 自动下载，但是拿 BT 站的全部资源列表去筛选自己想要的资源实在是太麻烦了。Mikan Project 支持订阅特定番剧的特定字幕组的特定语言的资源，而且还可以限定资源的上传时间，大大简化了筛选这一步。简化之后其实只需要在 qBittorrent 这边把 720p 的资源筛掉就够了。<br>关于如何在 Mikan Project 上订阅新番：<a href=\"https://www.himiku.com/archives/auto-bangumi.html#toc_3\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">https://www.himiku.com/archives/auto-bangumi.html#toc_3</a><br>关于如何用 RSS 实现自动下载：网上有好多教程，直接用 \"qbittorrent rss\" 做关键词搜索就行。<br><br><span style=\"font-weight:bold;\"># 外挂字幕</span><br>虽然上述的那两个播放软件都支持 SMB 上的外挂字幕，但是因为文件名匹配/语言匹配的问题，经常会有需要每一集都手动加载字幕的时候，就很麻烦。所以我写了个 Python 脚本用来把字幕直接打包到 mkv 文件里面，这样就能保证每次都能自动加载到正确的字幕啦！<br>脚本在这里：<a href=\"https://gist.github.com/CrabAss/cd12167da08a3fb8a35f909e3b0c87e2\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">https://gist.github.com/CrabAss/cd12167da08a3fb8a35f909e3b0c87e2</a><br>运行脚本需要有 Python 和 <a href=\"https://mkvtoolnix.download/downloads.html\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">MKVToolNix</a> 。脚本里面的 Python executable 和 mkvmerge executable 路径需要根据各位的实际情况进行修改。目前我自己用起来还挺爽的，搭配 Python Launcher 只需要双击 py 文件就可以直接开始打包。<br><br><span style=\"font-weight:bold;\"># 数据安全</span><br>移动硬盘上的数据如何保证不会因为意外而丢失？一开始用 4TB 移动硬盘的时候倒没怎么考虑过这个问题，等到换成 WD Element Desktop 16TB 硬盘之后，它本身因为是 3.5 英寸硬盘封装的，所以需要外接电源。家里跳了两次电闸之后，发现硬盘也掉电了，才开始重视这个问题。<br>1. UPS: 为了从根本上解决掉电问题，UPS 应该是唯一的解决方案。最后入手了 1200VA 的 APC Easy UPS，花了八九百rmb。还可以顺便把显示器也接上，因为我现在游戏本常年合盖当成主机，停电之后用不了显示器还是挺麻烦的。如果是不需要外接电源的 2.5 寸移动硬盘的话，其实我觉得 UPS 不是很有必要，因为笔记本电脑本身（如果电池正常的话）是不怕断电的。<br>2. 备份：选择了 <a href=\"https://www.backblaze.com/cloud-backup.html\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">Backblaze 云备份</a>，不限容量，还支持外接硬盘，平时基本放在后台不用管，总的来说还是挺爽的。<br><br><span style=\"font-weight:bold;\"># 功耗</span><br>有人添置 NAS 也有为了降低功耗的考量，不过我没有认真研究过这个问题，因为到现在为止我住的地方都不用我去打理电费账单<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\">。不过游戏本+外置硬盘的待机功耗我猜应该不会超过 100W？应该还 OK。不知道有什么软件可以查看当前整机消耗的功率。 ","time":"2022-8-28 02:27","title":"超简易NAS方案分享","userId":"440736","userName":"Samot","userSign":"(tomaS)"}