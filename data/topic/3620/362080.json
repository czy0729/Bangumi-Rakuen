{"id":362080,"avatar":"//lain.bgm.tv/pic/user/m/000/44/51/445193.jpg","floor":"#1","group":"评分与排名讨论会","groupHref":"/group/qpz","groupThumb":"//lain.bgm.tv/pic/icon/m/000/00/39/3967.jpg?r=1436499902","message":"灵感来源是去年同期看过的这个帖子 <a href=\"https://bgm.tv/group/topic/337638\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">【新年快乐】某科学的 Bangumi 动画排名</a>。<br><br>当时爬了不少数据，爬取的内容包括条目id，用户id，观看状态，评分，评分时间。最近想起这件事把没码完的代码又拿了出来。（截止日期在2020-3-20左右）<br><br>相对于原贴的算法，主要改进的点是使用了置信区间的下届作为参考评分，这样就能把评分人数这个因素考虑进来。原理可以参考一下这个博客 <a href=\"http://www.ruanyifeng.com/blog/2012/03/ranking_algorithm_wilson_score_interval.html\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">基于用户投票的排名算法（五）：威尔逊区间</a>。这里用的不是威尔逊区间，是另外一个博客中<a href=\"https://www.evanmiller.org/ranking-items-with-star-ratings.html\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">Ranking Items With Star Ratings</a>给的公式。简单来说，经过这种调整后，评分人数少的条目会吃比较大的亏，<span style=\"text-decoration: line-through;\">冷门番不再占优势了</span><br><br>考虑用户权重的算法写好了，但是权重怎么给暂时还没想好，暂时是全部置1。最基础的想法是使用攻防评分，即考虑每个用户对每个条目的评分与相应条目均分的差值，差值较大的用户权重减少，迭代多次直到收敛。高级一点的可以考虑用户的行为模式，比如根据打分的时间轴判断是不是一击脱离的小号、路人。但是这部分就不是我能涉足的领域了<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\"><br><br>下面是计算结果的前40名。基础算法为马尔可夫法，用于计算的数据其选择条件如下：<br>1、只取“看过”状态的评分；<br>2、只取评分人数大于50的条目；<br>3、评分数大于10的用户的评分才是有效的<br><br>箭头标志的排名变动，其比较对象是使用上述数据暴力取平均<br><br>01     —      <a href=\"https://bgm.tv/subject/253\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">星际牛仔</a><br>02     ↑5      <a href=\"https://bgm.tv/subject/265\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">新世纪福音战士</a><br>03     ↑1      <a href=\"https://bgm.tv/subject/876\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">CLANNAD ～AFTER STORY～</a><br>04     ↑6      <a href=\"https://bgm.tv/subject/1428\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">钢之炼金术师 FULLMETAL ALCHEMIST</a><br>05     ↑6      <a href=\"https://bgm.tv/subject/110467\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">白箱</a><br>06     ↓3      <a href=\"https://bgm.tv/subject/324\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">攻壳机动队 STAND ALONE COMPLEX</a><br>07     ↓5      <a href=\"https://bgm.tv/subject/326\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">攻壳机动队 S.A.C. 2nd GIG</a><br>08     ↑18    <a href=\"https://bgm.tv/subject/10380\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">命运石之门</a><br>09     ↓1      <a href=\"https://bgm.tv/subject/6049\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">新世纪福音战士剧场版 Air/真心为你</a><br>10     ↑3      <a href=\"https://bgm.tv/subject/340\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">虫师</a><br>11     ↑11    <a href=\"https://bgm.tv/subject/770\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">天元突破 红莲螺岩</a><br>12     ↑22    <a href=\"https://bgm.tv/subject/311\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">千与千寻</a><br>13     ↑12    <a href=\"https://bgm.tv/subject/3375\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">凉宫春日的消失</a><br>14     ↓8      <a href=\"https://bgm.tv/subject/237\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">攻壳机动队</a><br>15     ↓1      <a href=\"https://bgm.tv/subject/1608\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">灌篮高手</a><br>16     ↑8      <a href=\"https://bgm.tv/subject/3302\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">福音战士新剧场版：破</a><br>17     ↑42    <a href=\"https://bgm.tv/subject/9717\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">魔法少女小圆</a><br>18     ↓3      <a href=\"https://bgm.tv/subject/25961\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">猫和老鼠</a><br>19     ↑34    <a href=\"https://bgm.tv/subject/1773\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">死亡笔记</a><br>20     ↑11    <a href=\"https://bgm.tv/subject/840\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">千年女优</a><br>21     ↓2      <a href=\"https://bgm.tv/subject/839\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">蓝色恐惧</a><br>22     ↓10    <a href=\"https://bgm.tv/subject/1728\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">浪客剑心 追忆篇</a><br>23     ↓7      <a href=\"https://bgm.tv/subject/247\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">银魂</a><br>24     ↑23    <a href=\"https://bgm.tv/subject/298\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">天空之城</a><br>25     ↑37    <a href=\"https://bgm.tv/subject/51\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">CLANNAD</a><br>26     ↑64    <a href=\"https://bgm.tv/subject/793\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">Code Geass 反叛的鲁路修</a><br>27     ↓10    <a href=\"https://bgm.tv/subject/238\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">攻壳机动队2 无罪</a><br>28     ↑77    <a href=\"https://bgm.tv/subject/1671\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">化物语</a><br>29     ↑23    <a href=\"https://bgm.tv/subject/9912\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">日常</a><br>30     ↑11    <a href=\"https://bgm.tv/subject/4019\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">四叠半神话大系</a><br>31     ↑78    <a href=\"https://bgm.tv/subject/27364\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">冰菓</a><br>32     ↑39    <a href=\"https://bgm.tv/subject/1333\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">剧场版 空之境界 第五章 矛盾螺旋</a><br>33     ↑37    <a href=\"https://bgm.tv/subject/310\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">幽灵公主</a><br>34     ↑15    <a href=\"https://bgm.tv/subject/93739\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">乒乓</a><br>35     ↑40    <a href=\"https://bgm.tv/subject/315\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">钢之炼金术师</a><br>36     ↑61    <a href=\"https://bgm.tv/subject/965\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">永生之酒</a><br>37     ↓4      <a href=\"https://bgm.tv/subject/254\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">混沌武士</a><br>38     ↑18    <a href=\"https://bgm.tv/subject/841\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">红辣椒</a><br>39     ↑65    <a href=\"https://bgm.tv/subject/43558\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">JOJO的奇妙冒险</a><br>40     ↑54    <a href=\"https://bgm.tv/subject/3128\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">数码宝贝</a><br><br><br>过段时间会开源，评分数据库也会给出（用户id会加盐哈希）。可能一个季度后吧，摸鱼完了接下来一阵子要开始忙了<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\"><br><br>最后提一下，cupy的矩阵计算效率真的比numpy高太多了<img src=\"/img/smiles/tv/02.gif\" smileid=\"41\" alt=\"(bgm25)\"> ","time":"2021-3-21 23:14","title":"全旧数据的伪科学排名","userId":"445193","userName":"𝒮𝒽𝓊𝓊𝒾𝒸𝒽𝒾","userSign":""}