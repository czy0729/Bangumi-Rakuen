{"id":362044,"avatar":"//lain.bgm.tv/pic/user/m/000/10/70/107059.jpg","floor":"#1","group":"「小圣杯」最萌大战","groupHref":"/group/tinygrail","groupThumb":"//lain.bgm.tv/pic/icon/m/000/00/42/4294.jpg?r=1564852376","message":"一时兴起弄的。<br>效果显示在用户页面【我的小圣杯】的【n座圣殿】里面。<br>代码下面（没做浏览器兼容性处理）。效果图懒弄了。喜欢的话自行拿去用吧。<br>注释那几行是血条的边框，喜欢加的话，自行去掉吧。<br><div class=\"codeHighlight\"><pre>setTimeout(() => pageReady(0), 1000)<br>function pageReady(i) {<br>    var e = document.querySelectorAll('#grail .temple_list .grail_list .name > span')<br>    console.log(i,e)<br>    if (e.length) setTimeout(() => build(e), 1)<br>    else if (i > 20) return<br>    else setTimeout(() => pageReady(i+1), 1000)<br>}<br>function build(eL) {<br>    eL.forEach(e => {<br>        var l = e.innerText.replaceAll(',', '').split('/')<br>        var nL = l.map(numTxt => parseInt(numTxt.trim()))<br>        var p = parseInt(nL[0] / nL[1] * 100)<br>        console.log(p, e, nL)<br>        e.parentElement.style.maxWidth = '100%'<br>        var s1 = document.createElement('span')<br>        s1.style.display = 'block'<br>        s1.style.height = '5px'<br>        // s1.style.width = 'calc( 100% - 2px )'<br>        // s1.style.border = '1px solid #aaa'<br>        s1.style.backgroundColor = '#e6ee9c'<br>        s1.style.position = 'relative'<br>        s1.style.top = '-2px'<br>        var s2 = document.createElement('span')<br>        s2.style.display = 'block'<br>        s2.style.backgroundColor = '#8bc34a'<br>        s2.style.height = '100%'<br>        s2.style.width = p + '%'<br>        if (p >= 100) {<br>            // s1.style.border = '1px solid #8bc34a'<br>            s2.style.width = '100%'<br>            s2.style.backgroundColor = '#8bc34a'<br>        } else if (p <= 20) {<br>            // s1.style.border = '1px solid #ff9800'<br>                s1.style.backgroundColor = '#fbe9e7'<br>            s2.style.backgroundColor = '#ff5722'<br>        } else {<br>                s1.style.backgroundColor = '#e6ee9c'<br>            s2.style.backgroundColor = '#c0ca33'<br>        }<br>        s1.append(s2)<br>        e.append(s1)<br>    })<br>}<br></pre></div><br><br>题外话: 之前发贴说`Sorry, you have been blocked`是什么情况... ","time":"2021-3-19 19:36","title":"给塔加个血条","userId":"107059","userName":"翠绿","userSign":""}