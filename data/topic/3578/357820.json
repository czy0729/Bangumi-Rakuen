{"id":357820,"avatar":"//lain.bgm.tv/pic/user/m/000/26/12/261227.jpg","floor":"#1","group":"～技术宅真可怕～","groupHref":"/group/a","groupThumb":"//lain.bgm.tv/pic/icon/m/000/00/00/11.jpg","message":"油猴脚本。某种假设场景：<br>弹窗提示用户是否需要自动搜索关键词，是的话在新标签页里打开搜索引擎并显示搜索结果。然后再弹窗问用户是否满意结果，再根据反馈来做别的对应操作。<br><br>但是现在问题是：<br>window.confirm的弹窗会在页面切换的时候自动取消掉并返回false。也就是第二次弹窗其实失去了作用（哪怕延迟弹窗也没有用，谷歌这个应该是只要激活的tab页发生变化就直接返回false）,改成prompt也不行。<br><br>我现在能想到的就是搜索结果页面不在新标签里打开，而是用iframe之类的玩意直接显示在原网页。<br><span style=\"font-weight:bold;\">自用小脚本，所以想问问有没有简单的解决方法，最好是原生或者jQuery就能搞定的</span><br><br><br><br>demo:<br><div class=\"codeHighlight\"><pre><br>// ==UserScript==<br>// @name          测试windows.confirm<br>// @namespace    http://tampermonkey.net/<br>// @version      0.1<br>// @description  try to take over the world!<br>// @author       You<br>// @match        https://bgm.tv/<br>// @grant        GM_openInTab<br>// ==/UserScript==<br><br>(function() {<br>    'use strict';<br>    let userSelect=confirm('需要去百度搜索吗');<br>    if(userSelect){<br>            GM_openInTab(`https://www.baidu.com/s?wd=test`,'active');<br>            setTimeout(function(){<br>                    let isUseful=confirm('结果还满意吗');<br>                            if(isUseful){<br>                                    alert('lucky guys')<br>                            }else{<br>                                    alert('do u guys dont have Google?')<br>                            }<br>            },5000)<br>    }<br>})();<br></pre></div> ","time":"2020-7-20 02:03","title":"油猴弹confirm窗口有没有好点的解决方案","userId":"261227","userName":"chitanda＠Lv2","userSign":"(Make Bangumi Great Again!)"}