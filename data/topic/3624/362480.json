{"id":362480,"avatar":"//lain.bgm.tv/pic/user/m/000/26/12/261227.jpg","floor":"#1","group":"靠谱人生茶话会","groupHref":"/group/boring","groupThumb":"//lain.bgm.tv/pic/icon/m/000/00/03/364.jpg","message":"本来准备写个脚本把少战几个角色wiki条目加一下。然后写完了发现脚本死也跑不起来<img src=\"/img/smiles/tv/04.gif\" smileid=\"43\" alt=\"(bgm27)\"><br>症状表现在油猴的xhr函数获取不到页面返回。一开始当然以为是我写错了，结果调试了好几遍代码没找到哪里写错了。<br>我又以为是这网站做了反爬（虽然我当时就吐槽了你一个动画官网&#x1F436;才来爬，反个屁啊），结果折腾了好久request参数，试来试去还是不顶用，火冒三丈。<br>后来没办法只能做个最简单的demo去试，（因为我自己本来写了个小框架把 GM_xmlhttpRequest包了几层）。坑就坑在chrome的错误提示是<div class=\"quote\"><q>GET: TypeError: Failed to execute 'parseFromString' on 'DOMParser': The provided value 'text/html; charset=utf-8' is not a valid enum value of type SupportedType.</q></div>弄得我一直以为是xhr里的“ overrideMimeType”参数有问题，翻来覆去的谷歌和尝试，鸟用没有。<span style=\"font-weight:bold;\">后来才无意中发现是“responseType”不能指定的锅</span>，想着去发个issue结果发现半个月之前有人<a href=\"https://github.com/Tampermonkey/tampermonkey/issues/1200\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">说过了</a>，beta版本里也修了，不过因为我自己是稳定版所以没推送过来。。<br>大好周末本来想着干完wiki活动漫生活，现在啥心情都没了，实在是心累<img src=\"/img/smiles/tv/76.gif\" smileid=\"115\" alt=\"(bgm99)\"> ","time":"2021-4-17 09:15","title":"被油猴的bug折腾了个半死","userId":"261227","userName":"chitanda＠Lv2","userSign":"(Make Bangumi Great Again!)"}