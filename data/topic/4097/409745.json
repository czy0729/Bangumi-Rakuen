{"id":409745,"avatar":"//lain.bgm.tv/pic/user/m/000/82/18/821885.jpg","floor":"#1","group":"番组开发","groupHref":"/group/dev","groupThumb":"//lain.bgm.tv/pic/icon/m/000/00/41/4180.jpg?r=1519373244","message":"<span style=\"font-weight:bold;\"><span style=\"color: red;\">[New] </span>效果预览图</span><br><img width=\"500\" height=\"431\" src=\"https://s3.bmp.ovh/imgs/2024/12/24/1b3db751ae14cc60.gif\" border=\"0\" alt class=\"code\" referrerpolicy=\"no-referrer\"><br><br><span style=\"font-weight:bold;\">功能</span><br>- 获取条目类型；<br>    - 支持 <span style=\"font-weight:bold;\">所有</span> 条目类型，包含5种 <span style=\"font-style:italic\">subject</span> 类型以及 <span style=\"font-style:italic\">character</span> 和 <span style=\"font-style:italic\">person</span> 类型；<br>    - 目前仅 <span style=\"font-weight:bold;\">动画</span> 条目有覆盖性较广的默认设置数据；<br>- 对条目的制作人员信息 <span style=\"font-style:italic\">infobox</span> 进行职位的排序与折叠；<br>    - 将原本存在的 <span style=\"font-weight:bold;\">更多制作人员</span> 一次性按钮改为永久性左右双开关，若不存在则按需添加：<br>    - <span style=\"font-weight:bold;\"><span style=\"color: red;\">[New] </span></span>为连续的折叠职位的首 / 尾添加该连续职位的展开按钮 <span style=\"font-weight:bold;\">+</span> ，并可显示被折叠职位的名称；<br>    - <span style=\"font-weight:bold;\"><span style=\"color: red;\">[New] </span></span>为展开折叠职位添加动画效果；<br>    - <span style=\"font-weight:bold;\"><span style=\"color: orange;\">[New] </span></span>对新匹配到的职位名称进行记录；<br>- 对 <span style=\"font-weight:bold;\">行数</span> 超过限制的职位人员信息进行二次折叠；<br>    - 将作用于不包含副信息（如 <span style=\"font-weight:bold;\">别名</span> ）以外的所有职位信息；<br>    - 可设置为任意正整数；<br>- 可在 <a href=\"https://chii.in/settings/privacy\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">设置 - 隐私</a> 界面进行相关自定义设置（仅在同一浏览器内生效）<br>    - <span style=\"font-weight:bold;\"><span style=\"color: orange;\">[New] </span></span>可选择对历史的匹配记录在解析初始化时进行继承；<br>    - 支持使用正则表达式，对职位名称进行匹配；<br>    - 支持将未匹配的职位信息，插入指定位置；<br>    - <span style=\"font-weight:bold;\"><span style=\"color: orange;\">[New] </span></span>支持将二级职位引导信息，插入指定位置；<br>    - 对输入文本具备一定的鲁棒性与自我纠错能力；<br>    - 在部分浏览器中，文本框具备历史完整的 <span style=\"font-style:italic\">撤销、重做</span> 功能，不会被诸如 <span style=\"font-style:italic\">保存、恢复默认</span> 等操作阻断。<br><br><span style=\"font-weight:bold;\"><span style=\"color: orange;\">[New] </span>接口</span><br>- 提供了一个基于 <span style=\"font-style:italic\">localStorage</span> 的 <span style=\"font-weight:bold;\">共享数据</span> 接口，共享用户当前自定义 / 默认设置的各类型条目的职位顺序，详情说明，<a href=\"https://chii.in/group/topic/409745#post_3007010\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">见6楼</a> ；<br>- 已联动的组件/脚本：<br>     - <a href=\"https://chii.in/dev/app/3136\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">[组件] 音乐条目显示各曲目参与制作人员信息</a> 。<br><br><br><<< 设置前可以阅读 <span style=\"font-weight:bold;\">格式说明</span>，<a href=\"https://chii.in/group/topic/409745#post_2977902\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">见2楼</a> ，建议参照其中的 <span style=\"font-weight:bold;\">标准格式</span> >>><br>欢迎在评论区分享你 <span style=\"color: pink;\">调教的设置</span>～<br>也欢迎对已有的默认设置提供修改建议<br><br><br><span style=\"font-weight:bold;\">链接</span><br>- <a href=\"https://chii.in/dev/app/3348\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">超合金组件</a>   v1.4.3-1.5<br>- <a href=\"https://greasyfork.org/zh-CN/scripts/517618-%E7%8F%AD%E5%9B%BA%E7%B1%B3-%E6%9D%A1%E7%9B%AE%E8%81%8C%E4%BD%8D%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%92%E5%BA%8F%E4%B8%8E%E6%8A%98%E5%8F%A0\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">Greasy Fork</a> v1.4.3-1.5<br><br><span style=\"font-weight:bold;\">版本说明</span><br>- 版本号前部表示 <span style=\"font-weight:bold;\">程序</span> 版本；<br>- 版本号后部表示 <span style=\"font-weight:bold;\">数据</span> 版本；<span style=\"color: grey;\">囊括脚本内存储的默认数据、<span style=\"font-style:italic\">localStorage</span> 内存储的用户数据</span><br>- 当前，<span style=\"color: red;\"><span style=\"font-weight:bold;\">红色New</span></span> 表示 v1.4.3 所更新的内容，<span style=\"color: orange;\"><span style=\"font-weight:bold;\">橙色New</span></span> 表示 v1.4.0-1.4.2 所更新的内容;<br>- 更新日志，<a href=\"https://chii.in/group/topic/409745#post_2977903\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">见3楼</a> 。<br><br><span style=\"font-weight:bold;\">待开发功能</span><br>- 对详细的匹配记录进行存储、管理与解析，以便用户优化设置；<br>  <span style=\"color: grey;\">目前具备对历史匹配的职位名称进行初步记录与继承的功能</span><br>- 为更多的条目类型添加更加完备的默认设置数据；<br>- 优化职位信息的折叠效果。<br><br><br><span style=\"font-weight:bold;\">兼容性</span><br>- 对于书籍、游戏类型条目已实验性地出现了的 <span style=\"font-style:italic\">sub_group</span> 二级引导页面以及属其所有的 <span style=\"font-style:italic\">sub_container</span> 子信息进行特殊处理：<br>     - <span style=\"font-weight:bold;\">禁止</span> 本脚本对其任何方式的折叠与隐藏；<br>     - <span style=\"font-weight:bold;\">允许</span> 将其视为一个整体进行排序，可以二级引导页面的名称（如平台、版本）为关键字进行匹配，或直接以二级引导页面为目标进行插入匹配，可操作的 <a href=\"https://chii.in/subject/377599\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">案例对象</a>；<br>     - 对其样式做了一定的适配优化；<br>- 考察了其他修改或读取网页 <span style=\"font-style:italic\">infobox</span> 信息的脚本：<br>    - <a href=\"https://chii.in/dev/app/644\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">[组件] 喂shi警告！staff黑名单+高亮</a>，完全兼容；<br>    - <a href=\"https://chii.in/dev/app/3136\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">[组件] 音乐条目显示各曲目参与制作人员信息</a>，完全兼容；<br>    - <a href=\"https://chii.in/dev/app/3375\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">[组件] bangumi书籍外链</a>，兼容；<br>    - <a href=\"https://chii.in/dev/app/3009\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">[组件] Hyperlink</a>，兼容。<br><br><span style=\"font-weight:bold;\">相关组件/脚本</span><br>- 建议同步开启的组件/脚本：<br>    - <a href=\"https://chii.in/group/topic/409276\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">[脚本/组件] 代码高亮 / 一键复制</a>，由于本帖后续说明中存在大量的代码块；<br>    - <a href=\"https://chii.in/group/topic/351033\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">[脚本/组件] 折叠Bangumi</a>，由于本贴后续说明中使用了该脚本的内容折叠功能；<br>    - <a href=\"https://chii.in/dev/app/3270\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">[组件] 折叠关联条目并展示缩略图</a>，进一步折叠美化条目页面；<br>- 参考的组件/脚本：<br>    - <a href=\"https://chii.in/dev/app/2723\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">[组件] bangumi infobox fold</a> 巧妙地使用非常便捷的方法，获取当前条目的类型；<br>    - <a href=\"https://chii.in/group/topic/351130\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">[脚本/组件] 首页与超展开内容屏蔽</a> 参考了其UI的实现；<br>- 本组件是原作者 <span style=\"font-style:italic\">nthrkbrk</span> 的 <a href=\"https://chii.in/group/topic/408245\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">[脚本] 动画条目staff表职位排序</a>  Plus 版，在此声明感谢；<span class=\"text_mask\" style=\"background-color:#555;color:#555;border:1px solid #555;\">真是感叹...究竟是如何从百来行代码变成上千行的</span><br><br>翻到了 <span style=\"font-style:italic\">Sai</span> 老板近期有关 <span style=\"font-style:italic\">infobox</span> 的 <a href=\"https://chii.in/group/topic/384053#post_2389700\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">发言</a>，后续应该会朝着主次折叠、二级页面功能发展，未来只要主体结构不变...本脚本修修改改还是能用的，如果主站最终替代实现了本脚本的功能，那更好啦～","time":"2024-11-16 17:04","title":"[组件/脚本/接口] 条目职位自定义排序与折叠","userId":"weiduhuo","userName":"唯独惑","userSign":""}