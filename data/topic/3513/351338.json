{"id":351338,"avatar":"//lain.bgm.tv/pic/user/m/000/28/76/287622.jpg","floor":"#1","group":"～技术宅真可怕～","groupHref":"/group/a","groupThumb":"//lain.bgm.tv/pic/icon/m/000/00/00/11.jpg","message":"现在手头三台服务器，其中一台跑了elk，另外两台跑了Nginx，要再运行一个filebeat来收集日志传到elk里面去。之前一直是filebeat直接提交到es里面去，然后前两天看到logstash还有一些其他的功能，就想要试试。所以设置了完整的elk。<br>因为logstash的端口被我直接暴露在公网上了，所以需要设置ssl证书的加密。<br>但是ssl证书这块的知识实在是薄弱，所以请教一下有经验的大佬。<br><br>按照文档，我需要生成一个ca证书，然后给服务端签一个证书。如果要进行客户端认证的话还要给每个客户端都签一个证书。<br><br>我的理解是这样的：<br><br>因为logstash只有单纯的收集日志的功能，所以logstash本身作为服务端的ssl证书可以确保我的客户端的确在跟我设置的logstash通讯，但不能保证我的logstash接收到的数据都是我自己的filebeat提交的。为了保证这一点，我需要给每个filebeat（也就是客户端）签一张证书，来保证所有给logstash提交日志的客户端的确是我设置的。<br><br>不知道这样的理解有没有问题<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\"><br><br>但是给每个客户端签一张证书实在是太麻烦了（主要是管理起来太麻烦），有没有能像类似es套Nginx通过https和HTTP basic auth来快捷的安全传输？<br><br>我看filebeat支持socks5代理，理论上说不暴露logstash的端口然后走socks5代理通讯也可以，但是似乎也没有好用的直接使用用户名和密码提供socks5代理的服务端 ","time":"2019-7-1 09:42","title":"有设置过logstash和filebeat之间ssl加密的大佬吗","userId":"trim21","userName":"Trim21","userSign":"(<img src=\"#\" ></img>)"}