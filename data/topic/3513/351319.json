{"id":351319,"avatar":"//lain.bgm.tv/pic/user/m/icon.jpg","floor":"#1","group":"～技术宅真可怕～","groupHref":"/group/a","groupThumb":"//lain.bgm.tv/pic/icon/m/000/00/00/11.jpg","message":"Dialogue.moe 动画对白全文检索工具,简单来说就是查找对白的出处，与saucenao和whatanime类似，不过这个是检索对白的,详见<a href=\"https://bgm.tv/group/topic/351313\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">https://bgm.tv/group/topic/351313</a><br>虽然它提供了按动画的Bangumi ID检索的功能,但没有显示检索结果中的动画的ID,于是自己写了个脚本,来显示它.示例:<br>脚本使用前<br>妄想改造人改藏 ep.02 Score: 19.231<br>脚本使用后<br>10940妄想改造人改藏 ep.02 Score: 19.231<br>截图不能,意会就好~<br>它的功能在于,在找出对应关键词的各条字幕后,快速复制id到Bangumi ID检索栏,进行进一步检索,无需点开各个标题来查看对应的id<br>本来想实现的功能是,点击id即可自动复制到Bangumi ID检索栏,再自动点击搜索按钮,一键实现结果中搜索.但撞了墙,在给元素添加点击事件后,不清楚怎样让事件去定位是哪个元素触发的,因此无法区分输入对应的id,只能输入固定字符.还望大佬指点,这样的代码要怎样写~<br>此外,由于无法得知检索按钮按下后出结果的延迟时间,因此设置每秒触发一遍,感觉有些浪费性能.不知道在后端实现这项功能,能否直接照搬这段代码?方便的话还是希望原作者 <a href=\"/user/name\" class=\"l\">@windrises</a>能在后端就直接把id给显示出来,当然要能实现点击即可在目标番剧中搜索就更好啦!<br>最后附上代码,粘贴至油猴即可使用:<br>// ==UserScript==<br>// <a href=\"/user/name\" class=\"l\">@名字</a>         dialogue.moe显示动画名的ID<br>// <a href=\"/user/name\" class=\"l\">@名字</a>space    <a href=\"http://tampermonkey.net/\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">http://tampermonkey.net/</a><br>// @version      0.1<br>// @description  try to take over the world!<br>// @author       You<br>// @match        <a href=\"https://dialogue.moe/\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">https://dialogue.moe/</a><br>// <a href=\"/user/grant\" class=\"l\">@七濑</a>        none<br>// ==/UserScript==<br><br>(function() {<br>    'use strict';<br>    function showID(){<br>        var table = document.querySelectorAll('table > tbody > tr');<br>        var cln;<br>        var id;<br>        var title;<br>        for(var i=0;i<table.length;i++){<br>            cln = document.createElement('span');<br>            id = table<span style=\"font-style:italic\">.querySelector('td > div > div > div > div > button > span > a').getAttribute('href').replace(/.*\\//g,'');<br>            cln.textContent = id;<br>            title = table<span style=\"font-style:italic\">.querySelector('td > div > div > div.hidden-xs-only.el-row.is-justify-space-around.el-row--flex > div');<br>            if(!table<span style=\"font-style:italic\">.querySelector('td > div > div > div.hidden-xs-only.el-row.is-justify-space-around.el-row--flex > div > button:nth-child(2)')){<br>                title.insertBefore(cln,title.childNodes[0]);<br>            }<br>            //cln.addEventListener(\"click\", function(){document.querySelector('div.el-col.el-col-24.el-col-sm-12.el-col-lg-8 > div > input').value = cln.textContent;});<br>        }<br>    }<br>    setInterval(showID, 1000);<br>})(); </span></span></span>","time":"2019-6-29 10:02","title":"Dialogue.moe 显示动画ID的脚本","userId":"302432","userName":"yuzhan1990","userSign":""}