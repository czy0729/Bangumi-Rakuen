{"id":342264,"avatar":"//lain.bgm.tv/pic/user/m/000/18/11/181122.jpg","floor":"#1","group":"～技术宅真可怕～","groupHref":"/group/a","groupThumb":"//lain.bgm.tv/pic/icon/m/000/00/00/11.jpg","message":"<a href=\"http://bgm.tv/group/topic/342194\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">前情提要</a><br><br>条目页面左下角状态信息优化，允许用户切换所有用户的状态信息/仅好友的状态信息（包括好友的头像，名字，观看时间，打分，评论，如果有的话）。<br>提供配置中心，可设置的内容包括：在〇好友数上限、〇过好友数上限、只显示打分的好友、只显示写评论的好友、默认折叠在〇/〇过好友列表。其中，当抓取的好友数量未达到设置的上限值时，以实际抓取到的好友数量为准，<span style=\"font-weight:bold;\">请设置合理的上限数量，过大的上限值会减慢加载速度</span>，如果想看更多好友状态记录，请点击下方链接进入相关界面<br>之前提供的条目放送状态判断以智能显示在〇/〇过好友的功能现已弃用，改为同时显示在〇和〇过好友。<br><br>下面的截图为最早的版本，懒得换了。。。<br><br>[没有装的样子]<br><img src=\"https://ooo.0o0.ooo/2017/02/25/58b11828dd6e0.png\" class=\"code\" alt><br>[装上后的样子]<br><img src=\"https://ooo.0o0.ooo/2017/02/25/58b11821df9c6.png\" class=\"code\" alt><br>[点击后的样子]<br><img src=\"https://ooo.0o0.ooo/2017/02/25/58b11825acc17.png\" class=\"code\" alt><br><br><a href=\"https://github.com/bangumi/scripts/tree/master/fifth\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">github项目地址</a>    |    <a href=\"https://github.com/bangumi/scripts/raw/master/fifth/subjectPowerUp.user.js\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">脚本安装/更新</a><br><br><span style=\"text-decoration: line-through;\">做了一些微小的工作</span><br><br>关于这个脚本我想到要写的差不多也都写完了，整个脚本本身也已经比较臃肿了，达到了600+行<br>接下来应该不会主动更新新的feature上去，如果有人提出bug或者别的问题我还是会修的。。。<br>酱~<br><br>更新日志：<br>20170301 v1.3.1    1.设置按钮显示bug修正<br>                               2.现在在点开‘bgm.tv/subject/{subject_id}/{action}?filter=friends&’页面也会修正人数和页码<br>                               3.代码优化<br>20170301 v1.3.0    1.调整localstorage存储策略，现在会检查插件版本，版本更新会重置设置<br>                               2.设置中心保存并刷新现在改为异步请求，将不会刷新整页面<br>                               3.修复折叠功能的一处bug<br>                               4.代码结构调整优化<br>                               5.文案调整（thx to <a href=\"http://bgm.tv/user/cpulws\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">yuki</a><br>                               6.在〇/〇过的列表现在可分别设置折叠<br>                               7.显示全部用户列表时不再显示设置按钮<br>20170228 v1.2.1    1.提供设置菜单，允许用户自己设置显示数量、筛选条件及展示状态<br>                               2.修复一处数据抓取的bug<br>                               3.提供列表折叠功能<br>20170227 v1.2.0    1.程序结构调整<br>                               2.移除对条目状态的判断，改为同时显示在看和看过的好友（其它类型条目同理）<br>                                       默认为在看好友5人，看过好友10人，下个版本将支持自定义设置<br>20170226 v1.1.4    1.放送判断逻辑改进，对动画的放送状态能有更好的判断（依然不支持其它种类<br>                                       考虑到即将弃用这个功能，后续不再跟进<br>                               2.好友数据加载过程添加动画<br>20170226 v1.1.3    修复看过/想看好友为空的情况下的<a href=\"http://bgm.tv/group/topic/342264#post_1216030\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">bug</a>（thx to <a href=\"http://bgm.tv/user/lin_bangumi\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">Amadeus</a>，<a href=\"http://bgm.tv/user/hikigayahachima\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">アリス</a>）<br>20170226 v1.1.2    1.为不同类型的条目匹配不同的动词（看过/读过/玩过/听过）<br>                               2.修复firefox浏览器下的样式问题（thx to <a href=\"http://bgm.tv/user/leon92101\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">御户白夜</a>）<br>                               3.使用ES6新特性处理模板字符串（thx to <a href=\"http://bgm.tv/user/prevails\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">Donuts.</a>）<br>                               4.调整点击按钮逻辑，不一定解决了<a href=\"http://bgm.tv/group/topic/342264#post_1215954\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">楼下说的问题</a>（thx to <a href=\"http://bgm.tv/user/lin_bangumi\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">Amadeus</a>）<br>                               5.保存“只看好友”的状态<br>                                       即若打勾则在取消打勾状态之前进入subject页面都会默认加载好友的看过状态<br>20170225 v1.1.1    修复<a href=\"http://bgm.tv/group/topic/342194#post_1215901\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">user_id替换的bug</a>（thx to <a href=\"http://bgm.tv/user/a_little\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">拿月亮自刎</a>）<br>20170225 v1.1.0    将按钮修改为点击框（thx to <a href=\"https://bgm.tv/user/everpcpc\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">everpcpc</a>）<br>20170225 v1.0.0    发布<br><br>更<span style=\"text-decoration: line-through;\">挖</span>新<span style=\"text-decoration: line-through;\">坑</span>计划：<br><span style=\"text-decoration: line-through;\">顺便修复一下subject/{sid}/{action}?filter=friends页面的数量显示错误问题</span><br><span style=\"text-decoration: line-through;\">设置按钮显示有bug待修复</span><br><span style=\"text-decoration: line-through;\">保存并刷新时不刷新整个页面而只刷新好友列表</span><br><span style=\"text-decoration: line-through;\">文案调整</span><br><span style=\"text-decoration: line-through;\">可以在设置里分别设置两类的折叠</span><br><span style=\"text-decoration: line-through;\">代码结构优化</span><br><span style=\"text-decoration: line-through;\">提供列表折叠功能</span><br><span style=\"text-decoration: line-through;\">提供编辑选项：首页显示的好友数量（初定默认在看<=5，看过<=10）;筛选打分/有评论的好友</span><br><span style=\"text-decoration: line-through;\">同时列出在看的好友和看过的好友</span><br><span style=\"text-decoration: line-through;\">好友观看信息数据加载动画</span><br><span style=\"text-decoration: line-through;\">放送状态判断逻辑的调整（此功能即将弃用，这将是最后一次修复逻辑</span><br><span style=\"text-decoration: line-through;\">非动画条目的状态判断</span>（抛弃此需求）<br><span style=\"text-decoration: line-through;\">保存只看好友的选中状态</span><br><span style=\"text-decoration: line-through;\">数据加载保护（防止用户频繁切换选中状态导致可能出现的不可预料问题</span><br><span style=\"text-decoration: line-through;\">不同类型条目动词分配</span><br><span style=\"text-decoration: line-through;\">模板字符串处理方式升级</span><br><br><br><a href=\"/user/everpcpc\" class=\"l\">@everpcpc</a><a href=\"/user/prevails\" class=\"l\">@Donuts.</a> ","time":"2017-2-25 13:46","title":"[userjs]条目页面左下角信息优化--显示好友的最近在〇/〇过信息","userId":"fifth","userName":"fifth","userSign":"(人型自走单线程大脑培养皿#5)"}