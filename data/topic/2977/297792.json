{"id":297792,"avatar":"//lain.bgm.tv/pic/user/m/000/12/30/123081.jpg","floor":"#1","group":"字體硏究","groupHref":"/group/fonts","groupThumb":"//lain.bgm.tv/pic/icon/m/000/00/14/1495.jpg?r=1477147417","message":"Windows平台下的Chrome渲染一直是个大难题，在此尝试分析如何正确地对Chrome应用字体渲染。应对策略用红字标出。<br><br><span style=\"font-size:20px; line-height:20px;\">1.当前环境</span><br>Win8.1 x64, 快速启动模式<br>Chrome for Windows, x86, ver 44<br>Mactype,ver 1.2013.1231.0<br><br><span style=\"font-size:20px; line-height:20px;\">2.Mactype设置</span><br>2.1 快速启动模式下，Mactype无法注入注册表，只能<span style=\"color: red;\">使用服务加载模式</span>。<br>2.2 在当前配置里写入如下配置，否则在2.1的情况下Chrome的某些网站无法正常排版。<br><span style=\"color: red;\">[General@chrome]<br>FontSubstitutes=0<br>[General@chrome.exe]<br>Alternative=chrome</span><br><br><span style=\"font-size:20px; line-height:20px;\">3.Chrome设置</span><br>3.1 41版本强制UI使用DirectWrite，而DW在小字号下又强制hinting，导致字体难看。解决方法是：<br><span style=\"color: red;\">在Chrome的快捷方式-目标(T)里加入<br><div class=\"codeHighlight\"><pre> --disable-directwrite-for-ui</pre></div>注意空格</span>。<br>推荐用GreenChrome控制启动参数。<br><br>3.2 37版本之后强制网页使用DirectWrite. 解决方法是：<br><span style=\"color: red;\">打开 chrome://flags/，<br>第一项「覆盖软件渲染列表」，点击「启用」，显示「停用」。<br>第二项「停用DirectWrite」，点击「启用」，显示「停用」。</span><br><br><span style=\"font-size:20px; line-height:20px;\">4.缺字</span><br>4.1 经过以上设置后，TTF格式的字体会随机性的缺字，比如，<br><span style=\"color: gray;\">经过以上设置后</span><br>会变成<br><span style=\"color: gray;\">经过以上设.  后</span><br>4.2 另外，OTF格式的字体会随机性的出现奇怪字重，比如，<br><span style=\"color: gray;\">经过以上设置后</span><br>会变成<br><span style=\"color: gray;\">经过以上设<span style=\"font-weight:bold;\">置</span>后</span><br>目前一个解决方案是在Mactype的设置里加入<br>[General@chrome]<br>FontSubstitutes=0<br><span style=\"color: red;\">HintingMode=3<br>AntiAliasMode=4<br>UseMapping=1</span><br>[General@chrome.exe]<br>Alternative=chrome<br>似乎能解决4.2，但还是缺字~~<br><span style=\"text-decoration: line-through;\">42版本已经修复了这个问题，可喜可贺。</span><br>43版本以上又有问题了，泥煤。<br>44版本正式版也没有缺字的问题，跟进中。<br><br><span style=\"font-size:20px; line-height:20px;\">5.字体链接</span><br>Chrome不会调用系统或mactype的字体链接，只会调用css里面的font-family，所以对Chrome的字体替换是件很麻烦的事。<a href=\"http://bgm.tv/group/topic/299396\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">详细说明看这里</a>。 ","time":"2015-4-10 18:49","title":"Chrome的字体渲染","userId":"doream","userName":"Doream","userSign":"(夜海全书)"}