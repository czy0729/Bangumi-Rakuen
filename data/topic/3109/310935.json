{"id":310935,"avatar":"//lain.bgm.tv/pic/user/m/000/05/59/55968.jpg","floor":"#1","group":"～技术宅真可怕～","groupHref":"/group/a","groupThumb":"//lain.bgm.tv/pic/icon/m/000/00/00/11.jpg","message":"有用Linux的看B站的大概会接触过<a href=\"https://github.com/m13253/BiliDan\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">biligrab-danmaku2ass</a>（简称BiliDan），用于解决Linux下没有更新版本的Flash控件以及PPAPI Flash崩溃的问题。不过我在OSX下试用了一下，发现因为脱离了浏览器和Flash，对于解决Flash发热严重的问题也有很好的效果。<br>再加上稍微折腾了一下，和作者帮忙修复了一个问题之后，也成功的在Win下跑起来了。<br><br>今天折腾了一天写了个Chrome的插件，可以从Chrome里直接调用BiliDan播放B站视频，这样就比从命令行里操作方便多了。<br><br>整个插件分为两部分，一部分是Chrome插件，叫BiliDan-Helper；另一部分是BiliDan Host，用于和Chrome插件通信。应该是可以适用于Win/OSX/Linux平台的。不过今天暂时先做出了Windows的版本。插件和Host都还有很多不完善的地方，不过基本功能完成了，可以先用用看。<br><span style=\"text-decoration: line-through;\">（写完了后面的补一句：真的超级不完善<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\">写着写着就发现好多容易出问题的地方还没处理）</span><br><br><span style=\"font-weight:bold;\">下载地址：</span><br><a href=\"http://pan.baidu.com/s/1EvfqA\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">http://pan.baidu.com/s/1EvfqA</a><br>插件商店地址：<a href=\"https://chrome.google.com/webstore/detail/bilidan-helper/pfmilpmgppmdjkcbpiodncmnnnahejmf\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">https://chrome.google.com/websto ... kcbpiodncmnnnahejmf</a><br>150619更新：把Win版的Host重新打包了，之前的Python缺内容<br>150619晚更新：把插件往商店里上线了……现在Chrome卡的越来越严了，Dev通道开发插件的时候都不停的提醒你要不要停用……<br>150702更新：①更新插件，选项页里加了连接测试。②更新Host，现在运行后会在bin目录下生成log帮助检查问题。③上传了OSX/Linux的Host。仅在OSX下测试过。要求GUI程序能从PATH里访问到python3/ffprobe/mpv，对Linux来说很简单，OSX可能稍麻烦。<br>150713更新：完善了连接测试，能检测出Host未安装的情况了。为成功打开BiliDan添加了通知提示。添加了右键菜单，作用于各种视频页面的链接。注意①对于多P的视频右键打开只能打开第一P。②在非B站里用右键点击B站视频链接可以打开视频，但取到的Cookie是错的，所以不能看限制视频。<br><br><span style=\"font-weight:bold;\">安装方法：</span><br>1.bilidan-helper.XXX.crx是Chrome插件，拖进Chrome的扩展程序页面安装即可。因为不是商店插件，可能需要dev以上渠道的Chrome才能安装。也可以访问商店页面安装。<br>2.bilidan-host-win-XXXX.7z是Windows使用的BiliDan Host，自行解压到合适的目录，然后右击install_host.bat点击”以管理员身份运行“安装。<br>3.bilidan-host-nix-XXXX.zip是OSX/Linux使用的BiliDan Host，解压到合适目录后，在终端里进入该目录执行./install_host.sh。<br><br><span style=\"font-weight:bold;\">使用方法：</span><br>1.打开B站任意投稿页面，会看到视频下方”用手机看“的旁边有个”BDH“，点击它然后稍等一会儿就会弹出BiliDan调用的mpv的窗口。<br>2.在任意B站投稿链接（www.bilibili.com/video/avXXX或acg.tv/avXXXX）上右击点击使用BiliDan观看。<br><br>播放器的操作大部分靠键盘完成：<br>V：切换字幕(弹幕)<br>/和*或者9和0：音量调整<br>[和]：以10%调整播放速度<br>{和}：减半/加倍速度<br>p或空格：暂停<br>,和.：逐帧补进或步退<br>m：静音<br>f和ESC：进入和退出全屏<br>q：直接退出<br>更详细的可以看mpv的官方文档(英文)：<a href=\"http://mpv.io/manual/stable/#keyboard-control\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">http://mpv.io/manual/stable/#keyboard-control</a><br><br><span style=\"font-weight:bold;\">设置：</span><br>打开扩展程序页面，BiliDan-Helper插件下面点击选项弹出设置页面。使用Cookie可以解决会员限定视频的播放问题。如果是海外用户视频源请选择overseas。视频质量限定0-4，0是不设置，1-4是从低到高（但是似乎没什么意义）。D2A和MPV参数我仍然没加验证的代码，但是测试了下可以用<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\"><br><br><span style=\"font-weight:bold;\">如果出现故障：</span><br>1.打开选项页（菜单-更多工具-扩展程序-BiliDan-Helper下的“选项”）点击连接测试。测试失败则尝试重新安装Host并重启浏览器。<br>2.如果测试成功而依然没有视频打开，到Host的bin目录下找到bdh.log最后几行发给我看看……<br><br><span style=\"font-weight:bold;\">TODO：</span><br>把BiliDan拆了融合进host的脚本里，现在由host开新进程调用BiliDan的形式很难捕捉到BiliDan的错误报告，所以很难知道到底出了什么问题。 ","time":"2015-6-18 23:06","title":"[Chrome插件+客户端]BiliDan-Helper：妈妈再也不用担心我的笔记本发热了[0713更新]","userId":"zodiacg","userName":"zodiacg","userSign":"(那谁谁家那小谁)"}