{"id":404801,"avatar":"//lain.bgm.tv/pic/user/m/000/02/18/21804.jpg","floor":"#1","group":"番組WIKI計画","groupHref":"/group/wiki","groupThumb":"//lain.bgm.tv/pic/icon/m/000/00/01/128.jpg","message":"<a href=\"https://bgm.tv/group/topic/402872#post_2868957\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">https://bgm.tv/group/topic/402872#post_2868957</a><br><br><span style=\"text-decoration: line-through;\">このスクリプトはご覧のユーザーの提供で実行いたします</span><br>脚本由 <a href=\"/user/trim21\" class=\"l\">@bangumi大西王</a> 提供、执行<br><br>审核地址<a href=\"https://patch.bgm38.tv/?type=subject\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">https://patch.bgm38.tv/?type=subject</a><br><br>备注：有下划线的已验证脚本正确性，纯数字的将跳过审核直接转换<br><br><span style=\"font-size:20px; line-height:20px;\"><span style=\"font-weight:bold;\">维基人需要做的</span></span><br><br><a href=\"https://s3.trim21.cn/bgm.tv/isbn.html\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">https://s3.trim21.cn/bgm.tv/isbn.html</a><br>备用：<a href=\"https://github.com/trim21/bangumi-pages/blob/master/docs/isbn.md\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">https://github.com/trim21/bangumi-pages/blob/master/docs/isbn.md</a><br><span style=\"font-weight:bold;\">需要预处理的情况：</span><br>1. 471开头的13位数字请改成EAN栏<br>2. 去掉分类记号（Cコード）<br>    如：978-4-04-424117-9<span style=\"font-weight:bold;\">-C0193</span>，改成978-4-04-424117-9<br>3. ASIN改到ASIN栏，最好直接删掉<br>4. 在ISBN栏填上缺失的ISBN，格式不限，2007年后的书籍不建议填写ISBN10<br>5. 提示failed to validate的，请修改为正确的ISBN，格式不限<br>6. 去掉真实的ISBN前多余字符（比如没有必要的“ISBN：”）<br>7. ISBN栏包含多个ISBN的，请拆分成多项（格式不限）并填好对应版本，初版以外建议写成|ISBN(备注)=<br>    如：<br>    |ISBN= 9780000000000<br>    |ISBN(文库版)= 978-0000000000<br>    |ISBN(東立)= 0000000000<br>    或：<br>    |ISBN = {<br>    [9780000000000]<br>    [978-0000000001(新装版)]<br>    [0000000002(文库版)]<br>    }<br>    例外：上下册的请拆成两个条目<a href=\"https://bgm.tv/subject/29119\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">https://bgm.tv/subject/29119</a><br>8. 其他，根据error灵活处理，不清楚的本楼留言讨论<br><br><span style=\"font-weight:bold;\">其他审核后需要手动修复的<span style=\"font-size:20px; line-height:20px;\">（请确定你有精力修复再点Accept）</span>：</span><br>1. 去重<br>2. 排版<br>3. 去掉其他多余字符<br>4. EAN无法识别，如果作为多余字符跑出来请手动切割<br>    如：<a href=\"https://bgm.tv/subject/70854\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">https://bgm.tv/subject/70854</a><br>5. <span style=\"color: red;\"><span style=\"font-weight:bold;\"><span style=\"font-size:20px; line-height:20px;\">发现其他版本作为主要信息的最好顺手改成原文初版</span></span></span><br>6. <span style=\"color: red;\"><span style=\"font-weight:bold;\"><span style=\"font-size:20px; line-height:20px;\">发现发售日为多个的请顺手拆分为非列表模式，发售日仅填原文初版</span></span></span><br><br><span style=\"font-weight:bold;\">期望的最终格式：</span><br><br>单个版本的情况<br>|ISBN = 9780000000000<br>|ISBN-10 = 0000000000<br><br>多个版本的情况<br>|ISBN = {<br>[9780000000000]<br>[9780000000001(新装版)]<br>[9780000000002(文库版)]<br>[9780000000003(東立)]<br>}<br>|ISBN-10 = {<br>[0000000000]<br>[0000000001(新装版)]<br>[0000000002(文库版)]<br>}<br><br><span style=\"font-weight:bold;\">说明：</span><br>首发初版无需特别备注，<span style=\"color: red;\"><span style=\"font-weight:bold;\"><span style=\"font-size:20px; line-height:20px;\">请注意纸质版/原文初版应该排在第一个！</span></span></span><br>其他版本建议用半角括号不留空格<br>其他地区版本建议备注出版社（大陆建议备注出品方）<br>ISBN-10无需都写，仅需要保留时填写<br><br>--------------------------------------------------------------------<br><span style=\"font-weight:bold;\">if 有“isbn”栏</span>{<br>  if <span style=\"color: blue;\">匹配isbn13 成功</span><br>    {<br>      <span style=\"text-decoration: underline;\">①替换为13为纯数字;</span><br>      ②if <span style=\"color: red;\">匹配isbn10成功</span><br>      {<br>         替换为10位纯数字并移到到“ISBN-10”栏（分隔符不好判断可能需要转人工）<br>      }elseif <span style=\"color: red;\">另外有“isbn-10”栏</span><br>      {<br>         if <span style=\"color: green;\">匹配isbn10成功</span><br>         {<br>           替换为10位纯数字;<br>         }<span style=\"color: green;\">else</span>{异常}<br>      };<br>    }<span style=\"color: blue;\">elseif 匹配isbn10成功</span><br>    {<br>      <span style=\"text-decoration: underline;\">①转换为13位纯数字;</span><br>      <span style=\"text-decoration: underline;\">②原isbn10位替换为10位纯数字并移到到“ISBN-10”栏;</span><br>      <span style=\"text-decoration: underline;\">③if 另外有“isbn-13”栏{</span><br>        <span style=\"text-decoration: underline;\">删除该栏;</span><br>      <span style=\"text-decoration: underline;\">};</span><br>    }<span style=\"color: blue;\">else</span>{报错};<br>}<span style=\"font-weight:bold;\">elseif 有“isbn-13”栏</span>{<br>  if <span style=\"color: blue;\">匹配isbn13 成功</span><br>    {<br>      ①改为“ISBN”栏，替换为13为纯数字;<br>      ②if 另外有“ISBN-10”栏<br>      {<br>        if <span style=\"color: green;\">匹配isbn10成功</span><br>        {<br>           替换为10位纯数字;<br>        }<span style=\"color: green;\">else</span>{异常};<br>      }<br>    }<span style=\"color: blue;\">else</span>{异常};<br>}<span style=\"font-weight:bold;\">elseif 有“ISBN-10”栏</span>{<br>  if <span style=\"color: blue;\">匹配isbn10成功</span>{<br>     ①替换为10位纯数字;<br>     <span style=\"text-decoration: underline;\">②转换为13位纯数字并填入“ISBN”栏;</span><br>     }<span style=\"color: blue;\">else</span>{异常};<br>}elseif <span style=\"font-weight:bold;\">系列or分类其他</span>{<br>  ①continue;<br>}<span style=\"font-weight:bold;\">else</span>{异常}<br><br>参考：<br><span style=\"text-decoration: underline;\">ISBN13：(?<![0-9]|-)(((978|979)\\-?)((?:[0-9]\\-?){9})[0-9])(?![0-9]|-)</span><br><span style=\"text-decoration: underline;\">ISBN10：(?<![0-9]|-)(((?:[0-9]\\-?){9})[0-9X])(?![0-9]|-)</span><br><br>中文描述：把ISBN、ISBN-10、ISBN-13分别检查（如果有），然后最终结果ISBN里填13位纯数字（保留其他备注）；ISBN-10里保留已填的10位纯数字<br>另外如果没找到ISBN相关的信息，如果是系列或者其他条目可跳过<br>其他都算异常","time":"2024-9-2 14:04","title":"[WIKI] ISBN转换问题汇总楼（测试差不多了，维基人可以进来帮忙了）","userId":"mizudiwood","userName":"mizudiwood🤖","userSign":"(23年小结→bgm.tv/blog/330004)"}