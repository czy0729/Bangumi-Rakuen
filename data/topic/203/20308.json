{"id":20308,"avatar":"//lain.bgm.tv/pic/user/m/000/05/98/59861.jpg","floor":"#1","group":"～技术宅真可怕～","groupHref":"/group/a","groupThumb":"//lain.bgm.tv/pic/icon/m/000/00/00/11.jpg","message":"<div class=\"codeHighlight\"><pre><br>#/bin/bash<br>#By LordSimon<br>#ping -c 1 ssh.sshcenter.info<br>export Local_Result=\"\"<br>export fastest=\"999999999\"<br>export fastest_server=\"NO_SERVER!\"<br>for server in `cat ./server.list`<br>do<br>        echo \"Ping: $server\"<br>        Local_Result=`ping -c 1 -w 1 $server|grep 'rtt min/avg/max/mdev ='`<br>        echo $Local_Result<br>        #get avg value<br>        current_avg=`echo \"$Local_Result\"|awk -F/ '{print $5}'`<br>        if [ \"$current_avg\" = \"\" ];then current_avg=$fastest;fi<br>        if [ `echo \"$current_avg<$fastest\"|bc` = \"1\" ]<br>        then<br>                fastest=\"$current_avg\"<br>                fastest_server=\"$server\"<br>        fi<br>        echo \"====================\"<br>        echo \"current fastest:$fastest_server [$fastest]\"<br>        echo \"====================\"<br>done<br><br>echo \"Fastest Server: $fastest_server\"<br>echo \"avg:$fastest\"<br></pre></div> ","time":"2012-12-13 14:28","title":"【Linux】寻找延时最小服务器脚本[未充分测试]","userId":"lordsimon","userName":"LordSimon","userSign":"(命里有时终须有，命里无时莫强求。)"}