{"id":359739,"avatar":"//lain.bgm.tv/pic/user/m/000/31/34/313469.jpg","floor":"#1","group":"站务论坛","groupHref":"/group/forum","groupThumb":"//lain.bgm.tv/pic/icon/m/000/00/00/2.jpg","message":"现在的slidebar的sticky状态好像是用JS配合CSS实现的, 问题多多..<br>比如如果主楼有图片而且图片加载速度太慢(或者用了我的折叠组件)的话, 就会导致sliderbar在错误的位置变成sticky状态..<br>而且变成sticky状态的瞬间, 评论区会因为缺了这个元素立刻上移..<br>其实现在用CSS很容易就能实现这个效果, 只要加上<div class=\"codeHighlight\"><pre>#sliderContainer {<br>  position: -webkit-sticky;<br>  position: sticky;<br>  top: 0;<br>}</pre></div>就可以了..甚至不需要用JS监听事件..<br><br>=========<br><br>目前想到两种打补丁的方法:<br>1. 跑一下 $(window).off('scroll'); 去掉监听事件, 然后加样式.<br>不过这个监听添加的时间好像很晚, 好像要等#sliderContainer出现后才能去掉..可能还要配合MutationObserver之类的..有点麻烦..<br><br>2. 直接修改CSS, 加上上面提到的样式后,<br>给 #sliderContainer.sticky 加上一个优先级更高的CSS,<br>覆盖掉原来的 position: fixed; 效果..<br>这样相当于让事件失效..<br>虽然简单, 但是就真的是\"补丁\"操作了..<br><br>所以还是让sai老板改改代码比较好.. ","time":"2020-11-5 14:38","title":"稍微更新一下bangumi的slidebar吧?","userId":"313469","userName":"Cedar","userSign":"(｡´-д-)"}