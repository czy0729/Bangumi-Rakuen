{"id":370889,"avatar":"//lain.bgm.tv/pic/user/m/000/31/77/317704.jpg","floor":"#1","group":"～技术宅真可怕～","groupHref":"/group/a","groupThumb":"//lain.bgm.tv/pic/icon/m/000/00/00/11.jpg","message":"*2023/3/11：已完全去除对 Get cookies.txt 的依赖。可以继续使用了。<br><br><span style=\"font-size:32px; line-height:32px;\"><span style=\"color: red;\"><span style=\"font-weight:bold;\">* 2023/3/8：重要安全警告</span></span></span><br>昨日中午，导出指引中推荐使用的 Get cookies.txt 已被发现是恶意扩展。十分抱歉对使用本项目的各位造成了影响。这并非我的本意。<br><br>为减少可能的安全风险和损失，请<span style=\"font-weight:bold;\">尽快</span>执行以下操作：(感谢 @&#x1F98B;喵小六❄️ 的指正）<br>清空 cookie 毫无帮助，实际上可能帮倒忙，不要这么做！<br>清空 cookie 毫无帮助，实际上可能帮倒忙，不要这么做！<br><br>1、首先，卸载扩展；<br>2、有些网站会显示已登录设备，并提供注销的选择，你可以在那个页面注销已登录设备；<br>- Google: 管理您的 Google 账号 - 安全性 - 管理所有设备<br>- Github: Settings - Assess - Sessions<br>- Microsoft: 我的 Microsoft 账户 - 安全 - 登录活动<br>3、最有效的防御手段是：浏览你的 cookie 列表，依次打开网站，主动点击注销按钮，网站会收到你的注销请求然后吊销该 cookie，保证开发者拥有无效数据；<br>4、最后的最后，如果还不放心，请修改密码，部分网站在修改密码后会吊销所有 cookie。<br><br>---<br>* 2022/12/1：更新了一版，More 现在支持导出回复的贴子、收藏的人物、时间胶囊和好友了。因为被 Sai 投诉备份工具频率过高造成整站缓慢，降低了请求速率，备份耗时可能增加。（因为是爆肝的代码，加之测试数据不完备，<span style=\"text-decoration: line-through;\">很有可能</span>一定会有问题，还请多多包涵，欢迎 PR / issue）<br><br>有感于<a href=\"https://bgm.tv/rakuen/topic/group/370834\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">这位班友</a>的不幸遭遇，趁着最近刚好有些空闲，给原先只支持收视进度和个人收藏导出的 Bangumi Takeout 增加了讨论、日志、目录的导出功能。<br><br>具体而言，新增加的导出项包括：<br>* 讨论（topic）：我发表的话题<br>* 日志（blog）：公开日志、仅好友可见日志<br>* 目录（index）：我创建的目录、我收藏的目录<br><span style=\"font-weight:bold;\">(NEW：回复的贴子、收藏的人物、时间胶囊和好友）</span><br><br>考虑到不同用户的导出需求不同，这一功能增加了一个名为「深度导出」的设置项。未开启时，导出内容仅包含元数据，如ID、创建日期、URL、名称等。开启后，导出时也会将对应项目的实际数据一并导出，讨论和日志以 HTML 网页形式，目录则是 HTML 网页和 JSON 数据兼有。也欢迎其他开发者使用导出的元数据编写其他的导出脚本！（例如用 ArchiveBox 备份更多格式）<br><br>技术上，这一功能本质上只是用程序模拟人访问 Bangumi 中已有的功能链接。因为当前 API 接口还不完善，这算是无奈之举了。也正因此，与 Bangumi Takeout 使用 API Token 不同，Bangumi Takeout More 需要使用 Cookies，使用起来会稍微有些不便。但考虑到备份的频次不是很高，大概还算能接受。安全性上，本次新增功能对 Bangumi 发起的所有请求都是读请求，没有任何写请求，也可以通过用完脚本后登出再登入的方式强制让 Cookie 无效。<br><br>目前因为这一功能还在早期开发阶段，我自己对于日志和目录功能的使用甚少，所以可能会有很多 Bug，因此暂时独立出来，待功能稳定，大部分 Bug 修复后再正式加入 Bangumi Takeout 项目。<br><br>以下是相关链接：<br>（推荐）直接在 Colab 上运行：<a href=\"https://colab.research.google.com/github/jerrylususu/bangumi-takeout-py/blob/master/bangumi_takeout_more_colab.ipynb\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\"><img src=\"https://colab.research.google.com/assets/colab-badge.svg\" class=\"code\" rel=\"noreferrer\" referrerpolicy=\"no-referrer\" alt></a><br>Colab 链接： <a href=\"https://colab.research.google.com/github/jerrylususu/bangumi-takeout-py/blob/master/bangumi_takeout_more_colab.ipynb\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">https://colab.research.google.co ... ut_more_colab.ipynb</a><br>代码：<a href=\"https://github.com/jerrylususu/bangumi-takeout-py/blob/master/dump_personal.py\" target=\"_blank\" rel=\"nofollow external noopener noreferrer\" class=\"l\">https://github.com/jerrylususu/b ... er/dump_personal.py</a><br><br>欢迎使用和 Pull Request！希望能帮到各位，让数据能更好掌控在自己手中。<br><br>已知问题： <br>- 因为没有用 API Token，部分含有非公开条目的目录可能 JSON 文件会显示「Not Found」<br><br>下一步计划：<br>- 自己发表的条目讨论区内的讨论？<br>- 收藏的人物/团体？ ","time":"2022-6-22 05:41","title":"Bangumi Takeout More - 导出讨论、日志与目录 [Open In Colab]","userId":"317704","userName":"NekoNull","userSign":""}