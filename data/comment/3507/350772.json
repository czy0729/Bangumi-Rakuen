[{"avatar":"//lain.bgm.tv/pic/user/m/000/31/34/313469.jpg","floor":"#2","id":"1445666","time":"2019-5-23 12:18","userId":"313469","userName":"Cedar","userSign":"(｡´-д-)","message":"还有个问题是现在进入所有人的时空管理局都会显示全站动态, 我想应该只在首页才自动切换比较好","sub":[{"avatar":"//lain.bgm.tv/pic/user/m/000/17/18/171851.jpg","floor":"#2-1","id":"1445670","time":"2019-5-23 12:56","userId":"yonjar","userName":"🍋LautlosP🍋","userSign":"","message":"这我要研究下组件的include字段("},{"avatar":"//lain.bgm.tv/pic/user/m/000/31/34/313469.jpg","floor":"#2-2","id":"1445676","time":"2019-5-23 13:18","userId":"313469","userName":"Cedar","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">LautlosP</span> 说: 这我要研究下组件的include字段(</q></div>好像不能靠include 要用location.pathname之类的主动判断才行<br>在一部分页面加按钮也要这么做.."},{"avatar":"//lain.bgm.tv/pic/user/m/000/17/18/171851.jpg","floor":"#2-3","id":"1445680","time":"2019-5-23 14:16","userId":"yonjar","userName":"🍋LautlosP🍋","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">Cedar</span> 说: 好像不能靠include 要用location.pathname之类的主动判断才行<br>在一部分页面加按钮也要这么做..</q></div>果然是个坑!"},{"avatar":"//lain.bgm.tv/pic/user/m/000/31/34/313469.jpg","floor":"#2-4","id":"1446538","time":"2019-5-26 13:06","userId":"313469","userName":"Cedar","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">LautlosP</span> 说: 果然是个坑!</q></div>啊! 我理解错你的意思了..只在首页加按钮不需要用location判断, 在不同页面做不同的事情才需要..<br>我以为你打算 1在所有能看到timeline的地方都加切换按钮,<br>2然后在settings页面加个选择框让用户决定要不要主动切换,<br>3然后当用户希望主动切换时 也只在首页才会主动切换..<br>2和3才需要用location主动判断..<br>我没想过可以用alert <img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\"> (不过要是后来用户改主意了该怎么办.."},{"avatar":"//lain.bgm.tv/pic/user/m/000/17/18/171851.jpg","floor":"#2-5","id":"1446546","time":"2019-5-26 13:45","userId":"yonjar","userName":"🍋LautlosP🍋","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">Cedar</span> 说: 啊! 我理解错你的意思了..只在首页加按钮不需要用location判断, 在不同页面做不同的事情才需要..<br>我以为你打算在所有能看到timeline的地方都加切换按钮,<br>然后在settings页面加个...</q></div>没打算在setting加东西(以前写过一个脚本干过这事, 太麻烦, 除非sai大大特地开发个干这事的API出来)<br>这是只有一次的选择, 不能反悔(让他们自己改localStorage<img src=\"/img/smiles/tv/64.gif\" smileid=\"103\" alt=\"(bgm87)\">"},{"avatar":"//lain.bgm.tv/pic/user/m/000/31/34/313469.jpg","floor":"#2-6","id":"1446561","time":"2019-5-26 14:14","userId":"313469","userName":"Cedar","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">LautlosP</span> 说: 没打算在setting加东西(以前写过一个脚本干过这事, 太麻烦, 除非sai大大特地开发个干这事的API出来)<br>这是只有一次的选择, 不能反悔(让他们自己改localStorage</q></div>我也试着加过 累死了<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\">"}]},{"avatar":"//lain.bgm.tv/pic/user/m/000/01/50/15080.jpg","floor":"#3","id":"1446244","time":"2019-5-25 14:10","userId":"jackycally","userName":"Frozen_Nanaka","userSign":"(前方路漫漫。。。)","message":"开启自动切换为全站动态，能不能改回之前默认显示好友的呢？或者提供一个开关选项？还是习惯之前首页默认是好友的情况。谢谢","sub":[{"avatar":"//lain.bgm.tv/pic/user/m/000/17/18/171851.jpg","floor":"#3-1","id":"1446255","time":"2019-5-25 14:59","userId":"yonjar","userName":"🍋LautlosP🍋","userSign":"","message":"收到"}]},{"avatar":"//lain.bgm.tv/pic/user/m/000/40/05/400577.jpg","floor":"#4","id":"1446246","time":"2019-5-25 14:21","userId":"everlastar","userName":"ACERLZ🎹","userSign":"(恍不觉梦流离之人追逐幻影弃友弃人)","message":"默认好友+1","sub":[]},{"avatar":"//lain.bgm.tv/pic/user/m/000/02/18/21804.jpg","floor":"#5","id":"1446256","time":"2019-5-25 15:14","userId":"mizudiwood","userName":"mizudiwood💿","userSign":"(19年小结→bgm.tv/blog/294448)","message":"原來是組件的問題<br>每當我只想看自己時發現全是一堆陌生人<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\">","sub":[]},{"avatar":"//lain.bgm.tv/pic/user/m/000/17/18/171851.jpg","floor":"#6","id":"1446454","time":"2019-5-26 00:31","userId":"yonjar","userName":"🍋LautlosP🍋","userSign":"(DD集まれ! (๑•̀ㅂ•́)و✧)","message":"已更新0.2.1版","sub":[{"avatar":"//lain.bgm.tv/pic/user/m/000/24/91/249165.jpg","floor":"#6-1","id":"1446910","time":"2019-5-27 13:01","userId":"249165","userName":"𝟸𝟺𝟿𝟷𝟼𝟻","userSign":"","message":"笑了<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\">现在一改怎么选都只能看好友动态了"},{"avatar":"//lain.bgm.tv/pic/user/m/000/17/18/171851.jpg","floor":"#6-2","id":"1446981","time":"2019-5-27 16:50","userId":"yonjar","userName":"🍋LautlosP🍋","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">249165</span> 说: 笑了现在一改怎么选都只能看好友动态了</q></div>什么意思?"},{"avatar":"//lain.bgm.tv/pic/user/m/000/24/91/249165.jpg","floor":"#6-3","id":"1447006","time":"2019-5-27 18:06","userId":"249165","userName":"𝟸𝟺𝟿𝟷𝟼𝟻","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">LautlosP</span> 说: 249165 说: 笑了现在一改怎么选都只能看好友动态了什么意思?</q></div>你不是有个选择默认只看好友和看全站动态的选项吗？两个无论选哪个，效果都是默认只看好友的动态"},{"avatar":"//lain.bgm.tv/pic/user/m/000/17/18/171851.jpg","floor":"#6-4","id":"1447022","time":"2019-5-27 19:11","userId":"yonjar","userName":"🍋LautlosP🍋","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">249165</span> 说: 你不是有个选择默认只看好友和看全站动态的选项吗？两个无论选哪个，效果都是默认只看好友的动态</q></div>什么浏览器, 我测试时是没问题的("},{"avatar":"//lain.bgm.tv/pic/user/m/000/24/91/249165.jpg","floor":"#6-5","id":"1447112","time":"2019-5-28 02:48","userId":"249165","userName":"𝟸𝟺𝟿𝟷𝟼𝟻","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">LautlosP</span> 说: 什么浏览器, 我测试时是没问题的(</q></div>safari和chrome，之前你改到默认看全站动态的时候好好的，要不把之前版本无选项默认看全动态的给我行不行，我单独加到猴里，或者你干脆做两个分开，一个是现在这个可以选的，一个默认只能看全站？（"},{"avatar":"//lain.bgm.tv/pic/user/m/000/17/18/171851.jpg","floor":"#6-6","id":"1447143","time":"2019-5-28 10:34","userId":"yonjar","userName":"🍋LautlosP🍋","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">249165</span> 说: safari和chrome，之前你改到默认看全站动态的时候好好的，要不把之前版本无选项默认看全动态的给我行不行，我单独加到猴里，或者你干脆做两个分开，一个是现在这个可以选的，一个默认只能看全站？（</q></div>你按F12在控制台(Console)运行这段代码再刷新试试<div class=\"codeHighlight\"><pre>localStorage.setItem(\"timeline_switch_by_yonjar\", 'true');</pre></div><br><img src=\"http://ww1.sinaimg.cn/large/aa2135eagy1g3gtsd1f2vj20iz06a3z4.jpg\" class=\"code\" alt><br><br>不行的话你就要更新你的浏览器了<img src=\"/img/smiles/tv/12.gif\" smileid=\"51\" alt=\"(bgm35)\">"},{"avatar":"//lain.bgm.tv/pic/user/m/000/17/18/171851.jpg","floor":"#6-7","id":"1447144","time":"2019-5-28 10:40","userId":"yonjar","userName":"🍋LautlosP🍋","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">249165</span> 说: safari和chrome，之前你改到默认看全站动态的时候好好的，要不把之前版本无选项默认看全动态的给我行不行，我单独加到猴里，或者你干脆做两个分开，一个是现在这个可以选的，一个默认只能看全站？（</q></div>然后你说的备用方案:<br>自己新建油猴脚本, 复制粘贴<br><div class=\"codeHighlight\"><pre>// ==UserScript==<br>// [user=name]名字[/user]         bgm timeline switch<br>// @version      0.1.3<br>// @description  bgm 好友动态&全站动态切换<br>// @author       Yonjar<br>// @include      /^https?:\\/\\/(bgm\\.tv|chii\\.in|bangumi\\.tv)\\/(timeline)?$/<br>// [user=grant]七濑[/user]        none<br>// ==/UserScript==<br><br>let container = document.querySelector(\"#timelineTabs\");<br>let btn = document.createElement(\"li\");<br>let switchFunc = function() {<br>    let timelineContainer = document.querySelector(\"#timeline ul\");<br><br>    fetch(location.origin + \"/timeline\", { credentials: \"omit\" })<br>        .then(resp => resp.text())<br>        .then(html => {<br>            let outer = html.match(/<ul>[\\s\\S]*?<\\/ul>/)[0];<br>            timelineContainer.outerHTML = outer;<br>        });<br><br>    document.querySelector(\"#tmlPager\").innerHTML = \"\";<br>};<br><br>btn.innerHTML = '<a href=\"javascript:void(0)\">看全站动态</a>';<br>btn.addEventListener(\"click\", switchFunc, false);<br>container.appendChild(btn);<br>switchFunc();</pre></div>"},{"avatar":"//lain.bgm.tv/pic/user/m/000/24/91/249165.jpg","floor":"#6-8","id":"1447168","time":"2019-5-28 15:26","userId":"249165","userName":"𝟸𝟺𝟿𝟷𝟼𝟻","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">LautlosP</span> 说: 然后你说的备用方案:<br>自己新建油猴脚本, 复制粘贴<br>// ==UserScript==<br>// <a href=\"/user/name\" class=\"l\">@名字</a>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; ...</q></div>ver0.13完美解决，感谢。早知道站内有旧版备份就不麻烦你了"}]},{"avatar":"//lain.bgm.tv/pic/user/m/000/17/18/171851.jpg","floor":"#7","id":"1446587","time":"2019-5-26 15:00","userId":"yonjar","userName":"🍋LautlosP🍋","userSign":"(DD集まれ! (๑•̀ㅂ•́)و✧)","message":"组件已通过审核","sub":[]},{"avatar":"//lain.bgm.tv/pic/user/m/000/13/30/133075.jpg","floor":"#8","id":"1446913","time":"2019-5-27 13:07","userId":"liaune","userName":"君寻","userSign":"(学会欣赏不完美)","message":"为什么我没启用组件，也出现了那个框？","sub":[{"avatar":"//lain.bgm.tv/pic/user/m/000/17/18/171851.jpg","floor":"#8-1","id":"1446980","time":"2019-5-27 16:50","userId":"yonjar","userName":"🍋LautlosP🍋","userSign":"","message":"可能装了脚本(<br>不是的话我也不知道了"},{"avatar":"//lain.bgm.tv/pic/user/m/000/13/30/133075.jpg","floor":"#8-2","id":"1446982","time":"2019-5-27 16:56","userId":"liaune","userName":"君寻","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">LautlosP</span> 说: 可能装了脚本(<br>不是的话我也不知道了</q></div>确实是很久以前装了脚本，都忘了<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\">"}]},{"avatar":"//lain.bgm.tv/pic/user/m/000/26/42/264270.jpg","floor":"#9","id":"1447013","time":"2019-5-27 18:24","userId":"264270","userName":"CrazyScientist","userSign":"","message":"ubuntu下的chrome好像有个小bug，动态栏最后有两个看全站动态按钮，虽然不影响使用","sub":[{"avatar":"//lain.bgm.tv/pic/user/m/000/31/34/313469.jpg","floor":"#9-1","id":"1447015","time":"2019-5-27 18:36","userId":"313469","userName":"Cedar","userSign":"","message":"这个我遇到过! 其实原因是你同时启用了组件和脚本.."},{"avatar":"//lain.bgm.tv/pic/user/m/000/17/18/171851.jpg","floor":"#9-2","id":"1447018","time":"2019-5-27 19:09","userId":"yonjar","userName":"🍋LautlosP🍋","userSign":"","message":"<img src=\"/img/smiles/tv/16.gif\" smileid=\"55\" alt=\"(bgm39)\">"},{"avatar":"//lain.bgm.tv/pic/user/m/000/26/42/264270.jpg","floor":"#9-3","id":"1447058","time":"2019-5-27 21:33","userId":"264270","userName":"CrazyScientist","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">Cedar</span> 说: 这个我遇到过! 其实原因是你同时启用了组件和脚本..</q></div>原来如此<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\">"}]},{"avatar":"//lain.bgm.tv/pic/user/m/000/27/52/275243.jpg","floor":"#10","id":"1503411","time":"2019-10-3 17:34","userId":"magit","userName":"喵帕斯喵","userSign":"(我是傻逼)","message":"不好意思，请问启用之后我不小心点了默认全站动态，怎么改回默认是好友动态呢？（并不想关掉，因为有时还想看看所有人的动态。）","sub":[{"avatar":"//lain.bgm.tv/pic/user/m/000/17/18/171851.jpg","floor":"#10-1","id":"1503476","time":"2019-10-3 19:55","userId":"yonjar","userName":"🍋LautlosP🍋","userSign":"","message":"1. 在当前网页下按f12打开浏览器的开发者工具<br>2. 打开Console标签页 火狐是\"控制台\"<br>3. 将下面的代码复制粘贴再回车<br><div class=\"codeHighlight\"><pre>localStorage.setItem(\"timeline_switch_by_yonjar\", 'false');</pre></div><br><img src=\"http://ww1.sinaimg.cn/large/aa2135eagy1g7l9a5ssvhj20fs05umxg.jpg\" class=\"code\" alt>"},{"avatar":"//lain.bgm.tv/pic/user/m/000/27/52/275243.jpg","floor":"#10-2","id":"1503491","time":"2019-10-3 20:54","userId":"magit","userName":"喵帕斯喵","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">&#x1F34B;LautlosP&#x1F34B;</span> 说: 1. 在当前网页下按f12打开浏览器的开发者工具<br>2. 打开Console标签页 火狐是\"控制台\"<br>3. 将下面的代码复制粘贴再回车<br>localStorage.setItem(\"timeline_sw...</q></div>感谢，感谢"}]}]