[{"avatar":"//lain.bgm.tv/pic/user/m/000/09/56/95693.jpg","floor":"#2","id":"1215039","time":"2017-2-21 20:19","userId":"dangge","userName":"当歌","userSign":"(不易相处)","message":"第一次启动的时候就把这两个缓存下来。<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\">","sub":[{"avatar":"//lain.bgm.tv/pic/user/m/000/17/78/177820.jpg","floor":"#2-1","id":"1215125","time":"2017-2-22 05:16","userId":"franklinyu","userName":"Franklin Yu","userSign":"","message":"+1"},{"avatar":"//lain.bgm.tv/pic/user/m/000/19/89/198933.jpg","floor":"#2-2","id":"1215315","time":"2017-2-22 17:19","userId":"198933","userName":"上井葉心","userSign":"","message":"问题不是出在网页获取，而是网页的生成上。如果把解析的结果整个保存下来，多久更新，更新的时机就是头大的问题。总不能我为了这两个楼，开个服务每天定时在后台不停解析吧"},{"avatar":"//lain.bgm.tv/pic/user/m/000/09/56/95693.jpg","floor":"#2-3","id":"1215399","time":"2017-2-22 22:27","userId":"dangge","userName":"当歌","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">上井葉心</span> 说: 问题不是出在网页获取，而是网页的生成上。如果把解析的结果整个保存下来，多久更新，更新的时机就是头大的问题。总不能我为了这两个楼，开个服务每天定时在后台不停解析吧</q></div>不知道你是怎么实现的，换我就转sqlite存起来，然后分页超简单<br>如果页面逻辑没法改了，那就只有自己提供API服务了。。。"},{"avatar":"//lain.bgm.tv/pic/user/m/000/19/89/198933.jpg","floor":"#2-4","id":"1215429","time":"2017-2-22 23:41","userId":"198933","userName":"上井葉心","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">当歌</span> 说: 不知道你是怎么实现的，换我就转sqlite存起来，然后分页超简单<br>如果页面逻辑没法改了，那就只有自己提供API服务了。。。</q></div>啊啊啊啊，一想到分页就头大。因为这个分页是需要webview的网页前端和程序内部的网页生成后端互动的。。。。。哦，不对，似乎不要这么麻烦…………<br>啊啊啊啊啊，暂时不管了，先把浏览历史功能完成吧。目前想做成一个ios的wiki客户端那样的脑图的样子。<br>但找了一圈没现成的java库，桑心。只找到个js的库。难道又得用webview来搞吗orz<br><img src=\"http://a2.mzstatic.com/us/r30/Purple30/v4/7c/b3/63/7cb363a7-79f3-9525-8083-67062a4bdf73/screen696x696.jpeg\" class=\"code\" alt>"},{"avatar":"//lain.bgm.tv/pic/user/m/000/00/02/204.jpg","floor":"#2-5","id":"1215435","time":"2017-2-22 23:53","userId":"mono","userName":"rnono","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">上井葉心</span> 说: 啊啊啊啊，一想到分页就头大。因为这个分页是需要webview的网页前端和程序内部的网页生成后端互动的。。。。。哦，不对，似乎不要这么麻烦…………<br>啊啊啊啊啊，暂时不管了，先把浏览历史功能完成吧。目前想...</q></div>這圖像是force-based layout?<br>我也不知道有啥好的java layout庫 (C#和js都有好幾個)<br>不行就自己擼吧.. 擼輪子很好玩的"},{"avatar":"//lain.bgm.tv/pic/user/m/000/19/89/198933.jpg","floor":"#2-6","id":"1215438","time":"2017-2-23 00:10","userId":"198933","userName":"上井葉心","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">mono</span> 说: 這圖像是force-based layout?<br>我也不知道有啥好的java layout庫 (C#和js都有好幾個)<br>不行就自己擼吧.. 擼輪子很好玩的</q></div>查了一圈，java上的确很少……我都开始考虑是不是直接用webview然后在webview里生成了<br>但又真的实在不想去碰javascript…………难道又得再造个轮子了吗…………"}]},{"avatar":"//lain.bgm.tv/pic/user/m/000/00/34/3417.jpg","floor":"#3","id":"1215058","time":"2017-2-21 22:02","userId":"venusxx","userName":"Venusxx","userSign":"(xxsuneV)","message":"支持！","sub":[]},{"avatar":"//lain.bgm.tv/pic/user/m/000/12/13/121392.jpg","floor":"#4","id":"1215072","time":"2017-2-21 22:38","userId":"iconce","userName":"至简","userSign":"","message":"一次性解析完所有回复吗？","sub":[{"avatar":"//lain.bgm.tv/pic/user/m/000/19/89/198933.jpg","floor":"#4-1","id":"1215305","time":"2017-2-22 17:06","userId":"198933","userName":"上井葉心","userSign":"","message":"是的。要不然这整个讨论串页面的逻辑就得重写了。"}]},{"avatar":"//lain.bgm.tv/pic/user/m/000/18/11/181122.jpg","floor":"#5","id":"1215074","time":"2017-2-21 22:43","userId":"fifth","userName":"fifth","userSign":"(人型自走单线程大脑培养皿#5)","message":"检测到进这两个帖子时直接链到403就好了","sub":[{"avatar":"//lain.bgm.tv/pic/user/m/000/17/78/177820.jpg","floor":"#5-1","id":"1215126","time":"2017-2-22 05:17","userId":"franklinyu","userName":"Franklin Yu","userSign":"","message":"404 也可以"},{"avatar":"//lain.bgm.tv/pic/user/m/000/18/11/181122.jpg","floor":"#5-2","id":"1215144","time":"2017-2-22 10:36","userId":"fifth","userName":"fifth","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">Franklin Yu</span> 说: 404 也可以</q></div>403 error: access forbidden<br>禁則事項です"},{"avatar":"//lain.bgm.tv/pic/user/m/000/19/89/198933.jpg","floor":"#5-3","id":"1215308","time":"2017-2-22 17:07","userId":"198933","userName":"上井葉心","userSign":"","message":"对不起，你打开了不得了的楼层。error。"},{"avatar":"//lain.bgm.tv/pic/user/m/000/17/78/177820.jpg","floor":"#5-4","id":"1215320","time":"2017-2-22 17:49","userId":"franklinyu","userName":"Franklin Yu","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">fifth</span> 说: 403 error: access forbidden<br>禁則事項です</q></div>就不能假裝這個樓不存在麼……"},{"avatar":"//lain.bgm.tv/pic/user/m/000/18/11/181122.jpg","floor":"#5-5","id":"1215334","time":"2017-2-22 18:08","userId":"fifth","userName":"fifth","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">Franklin Yu</span> 说: 就不能假裝這個樓不存在麼……</q></div>没有这几个楼的bgm是不会给人带来幸福的"},{"avatar":"//lain.bgm.tv/pic/user/m/000/17/78/177820.jpg","floor":"#5-6","id":"1215336","time":"2017-2-22 18:18","userId":"franklinyu","userName":"Franklin Yu","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">fifth</span> 说: 没有这几个楼的bgm是不会给人带来幸福的</q></div>403 不也沒法帶來幸福麼<img src=\"/img/smiles/tv/53.gif\" smileid=\"92\" alt=\"(bgm76)\">"},{"avatar":"//lain.bgm.tv/pic/user/m/000/25/55/255501.jpg","floor":"#5-7","id":"1216909","time":"2017-3-3 10:16","userId":"kakinuma","userName":"事实是柿子 - ⭐️VIP3","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">Franklin Yu</span> 说: 403 不也沒法帶來幸福麼</q></div>405，不准用手机看，某种意义上也算“方法”错误吧<img src=\"/img/smiles/tv/35.gif\" smileid=\"74\" alt=\"(bgm58)\">"},{"avatar":"//lain.bgm.tv/pic/user/m/000/18/11/181122.jpg","floor":"#5-8","id":"1217078","time":"2017-3-3 15:57","userId":"fifth","userName":"fifth","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">柿沼楚子</span> 说: 405，不准用手机看，某种意义上也算“方法”错误吧</q></div><span style=\"text-decoration: line-through;\">说的好像用电脑就能打开一样的</span>"}]},{"avatar":"//lain.bgm.tv/pic/user/m/000/12/31/123168.jpg","floor":"#6","id":"1215093","time":"2017-2-21 23:32","userId":"derrick","userName":"糯米团子","userSign":"(Boom!)","message":"电脑上都要6s呢<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\"><br>就当成特性好了，加点特殊标注","sub":[]},{"avatar":"//lain.bgm.tv/pic/user/m/000/16/52/165229.jpg","floor":"#7","id":"1215094","time":"2017-2-21 23:37","userId":"kjl10","userName":"KSailorII","userSign":"(ドンドンドナッツ、デイデイアップ)","message":"讲道理bgm的高楼不少啊……其他的帖子表现如何呢。","sub":[{"avatar":"//lain.bgm.tv/pic/user/m/000/19/89/198933.jpg","floor":"#7-1","id":"1215309","time":"2017-2-22 17:08","userId":"198933","userName":"上井葉心","userSign":"","message":"高楼能高到学姐楼这样的高度吗。<br>大部分回复在一千以内的基本还是挺快的。"}]},{"avatar":"//lain.bgm.tv/pic/user/m/000/03/87/38770.jpg","floor":"#8","id":"1215095","time":"2017-2-21 23:37","userId":"dk","userName":"默不作声的结城照美（仮）","userSign":"(买漫画切记远离烂店“漫爵”“神话典传”（天猫） ... ...)","message":"是肉体修正（严肃）","sub":[]},{"avatar":"//lain.bgm.tv/pic/user/m/000/16/86/168695.jpg","floor":"#9","id":"1215096","time":"2017-2-21 23:46","userId":"sinker","userName":"15cm_窗","userSign":"(嘘をうまくつけないバカ)","message":"所以说，自己搭个服务提供 API <img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\">","sub":[]},{"avatar":"//lain.bgm.tv/pic/user/m/000/00/34/3490.jpg","floor":"#10","id":"1215098","time":"2017-2-22 00:03","userId":"lhb5883","userName":"lhb5883-污🐱王VIP⑩","userSign":"(媛娇系是检验大法的唯一标准)","message":"BGM三柱神至少哲学楼很快啊？<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\">","sub":[]},{"avatar":"//lain.bgm.tv/pic/user/m/000/27/45/274598.jpg","floor":"#11","id":"1215110","time":"2017-2-22 01:22","userId":"hentyclopedia","userName":"Hentyclopedia","userSign":"(Information doesn't harm)","message":"最近正好在爬bgm的东西想看看能不能做成一门课程的project，第一次接触爬虫用的python的beautifulsoup，深切感到优化的重要性<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\">","sub":[]},{"avatar":"//lain.bgm.tv/pic/user/m/000/17/78/177820.jpg","floor":"#12","id":"1215127","time":"2017-2-22 05:18","userId":"franklinyu","userName":"Franklin Yu","userSign":"(讓一切都自動化！)","message":"每次看到 Jsoup 總覺得看到了 JSONP……","sub":[{"avatar":"//lain.bgm.tv/pic/user/m/000/09/56/95693.jpg","floor":"#12-1","id":"1215141","time":"2017-2-22 10:27","userId":"dangge","userName":"当歌","userSign":"","message":"+1"}]},{"avatar":"//lain.bgm.tv/pic/user/m/000/15/75/157502.jpg","floor":"#13","id":"1215130","time":"2017-2-22 06:06","userId":"csslayer","userName":"csslayer","userSign":"(ゝ∀･)","message":"´_>` 我只是来吐槽 parse 没有拼对。","sub":[{"avatar":"//lain.bgm.tv/pic/user/m/000/19/89/198933.jpg","floor":"#13-1","id":"1215311","time":"2017-2-22 17:08","userId":"198933","userName":"上井葉心","userSign":"","message":"噗…………23333"}]},{"avatar":"//lain.bgm.tv/pic/user/m/000/00/02/204.jpg","floor":"#14","id":"1215423","time":"2017-2-22 23:20","userId":"mono","userName":"rnono","userSign":"(汝视视汝)","message":"jsoup這麼慢? 不至於吧..","sub":[]},{"avatar":"//lain.bgm.tv/pic/user/m/000/00/37/3771.jpg","floor":"#15","id":"1215445","time":"2017-2-23 00:48","userId":"marionette","userName":"望想世界的兔子","userSign":"(狡兔三窟)","message":"噗，以后谁再想造轮子就拿这俩帖当benchmark问他performance","sub":[{"avatar":"//lain.bgm.tv/pic/user/m/000/00/02/204.jpg","floor":"#15-1","id":"1215447","time":"2017-2-23 00:56","userId":"mono","userName":"rnono","userSign":"","message":"<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\">"}]},{"avatar":"//lain.bgm.tv/pic/user/m/000/00/02/204.jpg","floor":"#16","id":"1215709","time":"2017-2-24 01:34","userId":"mono","userName":"rnono","userSign":"(汝视视汝)","message":"我翻了一下Jsoup的代碼, 覺得幾個地方有優化餘地<br><br>(沒看你的代碼, 我假定你只用了最外層的Jsoup.parse() 和Element.select() 等 )<br><br><br>#1 寫個新的 类似SAX的html parser<br>- Jsoup.parse() 是建立完整的dom才返回的. 我們其實不需要完整的dom作爲結果.<br>- Jsoup的Element.select() 也不快. 這個好像每次都遍歷整個dom樹, 我沒看到任何剪枝處理.<br>- 即使傳入InputStream, Jsoup也會先讀完才開始parse. 自制parser應該可以做到讀InputStream和parse同時開始.<br>- Jsoup有一些tokenizer / tag可以利用. 手寫新parser可以不用寫這些底層函數.<br><br>#2 儘早開始顯示<br>- 可以在計算線程開始parse, 並分批把結果發送給UI線程 (比如開始解析後立刻返回一個RxJava的 `Observable<Post[]>`給UI)<br><br>---------<br>其實我很久前就想把html解析功能做完了.. <a href=\"http://bgm.tv/group/yaba\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">以前開坑時還偷偷開了個小組</a><br>如果有興趣 我們可以一起研究 <img src=\"/img/smiles/tv/06.gif\" smileid=\"45\" alt=\"(bgm29)\">","sub":[{"avatar":"//lain.bgm.tv/pic/user/m/000/19/89/198933.jpg","floor":"#16-1","id":"1215772","time":"2017-2-24 18:13","userId":"198933","userName":"上井葉心","userSign":"","message":"我已经死在自制思维导图上了，现在准备就搞个最普通的历史功能了。<br>解析的话感谢提供思路，不过目前是打算把基本功能全部完成后再慢慢开搞具体的优化。现在第一阶段算是要完成了。<br>接下来收收尾就是进入第二阶段的标记，用户页面的构建，讨论串回复之类的功能了。做完估计又是一个多月，具体到优化可能还会拖很久（死亡）"}]},{"avatar":"//lain.bgm.tv/pic/user/m/000/05/98/59861.jpg","floor":"#17","id":"1215795","time":"2017-2-24 20:54","userId":"lordsimon","userName":"LordSimon","userSign":"(命里有时终须有，命里无时莫强求。)","message":"直接硬编码，屏蔽掉这两个帖子。","sub":[{"avatar":"//lain.bgm.tv/pic/user/m/000/06/21/62186.jpg","floor":"#17-1","id":"1215801","time":"2017-2-24 21:49","userId":"epix","userName":"epix","userSign":"","message":"以后的changelog:<br>xxxx-xx-xx: 屏蔽掉了新出现的长帖子"}]},{"avatar":"//lain.bgm.tv/pic/user/m/000/09/92/99210.jpg","floor":"#18","id":"1217076","time":"2017-3-3 15:54","userId":"skysweetdark","userName":"aja","userSign":"(advaita)","message":"话说。<br><span style=\"font-weight:bold;\"><span style=\"font-style:italic\">性癖觉醒的手下</span></span> 是谁？<br>求告知。","sub":[{"avatar":"//lain.bgm.tv/pic/user/m/000/14/08/140824.jpg","floor":"#18-1","id":"1217339","time":"2017-3-4 11:43","userId":"keypj","userName":"不经意之间就卖萌啦","userSign":"","message":"最终Jsoup还是败在了<span style=\"font-weight:bold;\">远子学姐</span>和<span style=\"font-weight:bold;\">性癖觉醒</span>的手下<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\">"}]}]