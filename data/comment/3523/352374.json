[{"avatar":"//lain.bgm.tv/pic/user/m/000/14/27/142735.jpg","floor":"#2","id":"1486552","time":"2019-9-2 07:06","userId":"z55456489","userName":"ofo","userSign":"(ofo)","message":"另一个641出现了","sub":[{"avatar":"//lain.bgm.tv/pic/user/m/000/26/12/261227.jpg","floor":"#2-1","id":"1486598","time":"2019-9-2 10:03","userId":"261227","userName":"chitanda＠Lv2","userSign":"","message":"三一鸡精正在赶来的路上"}]},{"avatar":"//lain.bgm.tv/pic/user/m/000/18/83/188332.jpg","floor":"#3","id":"1486576","time":"2019-9-2 09:34","userId":"lostanother","userName":"Another","userSign":"(追番日益，补番日损)","message":"641应该限制出镜才对啊（","sub":[{"avatar":"//lain.bgm.tv/pic/user/m/000/26/12/261227.jpg","floor":"#3-1","id":"1486599","time":"2019-9-2 10:04","userId":"261227","userName":"chitanda＠Lv2","userSign":"","message":"641挺住（"}]},{"avatar":"//lain.bgm.tv/pic/user/m/000/20/82/208208.jpg","floor":"#4","id":"1486581","time":"2019-9-2 09:39","userId":"aflyhorse","userName":"LunarShaddow🌙","userSign":"(Death is the gateway to Eternity, my dear.)","message":"别等提出了，快发布啊<img src=\"/img/smiles/tv/20.gif\" smileid=\"59\" alt=\"(bgm43)\">","sub":[{"avatar":"//lain.bgm.tv/pic/user/m/000/26/12/261227.jpg","floor":"#4-1","id":"1486597","time":"2019-9-2 10:03","userId":"261227","userName":"chitanda＠Lv2","userSign":"","message":"看我隔壁发的帖子就知道啦，有个细节问题想要好点的解决方案。现在准备先提交上去，初版感觉还可以用。"}]},{"avatar":"//lain.bgm.tv/pic/user/m/000/26/12/261227.jpg","floor":"#5","id":"1486641","time":"2019-9-2 11:42","userId":"261227","userName":"chitanda＠Lv2","userSign":"(BGM掉登陆次数:正正正一)","message":"过审啦","sub":[{"avatar":"//lain.bgm.tv/pic/user/m/000/30/45/304567.jpg","floor":"#5-1","id":"1503695","time":"2019-10-4 08:11","userId":"304567","userName":"@M0S_Fear","userSign":"","message":"非常实用 谢谢OP （其实是战略mark"}]},{"avatar":"//lain.bgm.tv/pic/user/m/000/22/63/226370.jpg","floor":"#6","id":"1486673","time":"2019-9-2 13:32","userId":"ohana","userName":"IKH😎","userSign":"(慢着！)","message":"资瓷资瓷","sub":[]},{"avatar":"//lain.bgm.tv/pic/user/m/000/26/78/267845.jpg","floor":"#7","id":"1486974","time":"2019-9-3 00:48","userId":"basertyu","userName":"小鸠世界第一可爱","userSign":"(noblesse oblige)","message":"感谢！","sub":[]},{"avatar":"//lain.bgm.tv/pic/user/m/000/00/23/2331.jpg","floor":"#8","id":"1486981","time":"2019-9-3 00:59","userId":"leins","userName":"leins=pallange","userSign":"(この身はそなたの“剣”──そう誓ったはずだ。 ... . ...)","message":"第二个逗号 逼死强迫症了(","sub":[{"avatar":"//lain.bgm.tv/pic/user/m/000/26/12/261227.jpg","floor":"#8-1","id":"1487009","time":"2019-9-3 03:39","userId":"261227","userName":"chitanda＠Lv2","userSign":"","message":"下回看看有什么能改的我再一次性提交，不然就为了一个标点提交审核我怕被sai老板砍了<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\">"},{"avatar":"//lain.bgm.tv/pic/user/m/000/31/34/313469.jpg","floor":"#8-2","id":"1487285","time":"2019-9-3 20:17","userId":"313469","userName":"Cedar","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">chitanda＠Lv2</span> 说: 下回看看有什么能改的我再一次性提交，不然就为了一个标点提交审核我怕被sai老板砍了</q></div>改成在页面上持续显示吧 比如在按钮的下面..不要弹窗了..<br>格式就类似<br><div class=\"codeHighlight\"><pre>新番角色数：200 新番持股量：200<br>持股总数：1200 每周股息：5300</pre></div>不然记性不好的话每看一次都要发请求..耗时也长..<br><br>顺便问问啥叫641?"},{"avatar":"//lain.bgm.tv/pic/user/m/000/26/12/261227.jpg","floor":"#8-3","id":"1487302","time":"2019-9-3 20:50","userId":"261227","userName":"chitanda＠Lv2","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">Cedar</span> 说: 改成在页面上持续显示吧 比如在按钮的下面..不要弹窗了..<br>格式就类似<br>新番角色数：200 新番持股量：200<br>持股总数：1200 每周股息：5300不然记性不好的话每看一次都要发请求..耗时也长.....</q></div>页面持续显示就得每次都请求，毕竟这个数据变得太快，不可能做缓存。。而且没那么多地方塞文本内容"},{"avatar":"//lain.bgm.tv/pic/user/m/000/26/12/261227.jpg","floor":"#8-4","id":"1487303","time":"2019-9-3 20:50","userId":"261227","userName":"chitanda＠Lv2","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">Cedar</span> 说: 改成在页面上持续显示吧 比如在按钮的下面..不要弹窗了..<br>格式就类似<br>新番角色数：200 新番持股量：200<br>持股总数：1200 每周股息：5300不然记性不好的话每看一次都要发请求..耗时也长.....</q></div>641是因为证监会主席啊"},{"avatar":"//lain.bgm.tv/pic/user/m/000/31/34/313469.jpg","floor":"#8-5","id":"1487308","time":"2019-9-3 21:02","userId":"313469","userName":"Cedar","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">chitanda＠Lv2</span> 说: 页面持续显示就得每次都请求，毕竟这个数据变得太快，不可能做缓存。。而且没那么多地方塞文本内容</q></div>为啥会变化..页面加载完成后就不会变了吧 你不是解析页面本身的数据的么?<br>那就改成按一次按钮刷新一次呀 位置的话就在<br><div class=\"codeHighlight\"><pre>$(\"#grail .horizontalOptions\").append(<br>\"<div><span>新番角色数：200</span><span>新番持股量：200</span></div>\"+<br>\"<div><span>持股总数：1200</span><span>每周股息：5300</span></div>\")</pre></div>类似这样就行啦 再稍微改改就好, 不要每次都append 改成修改元素内容..<br>(我也是随手写的 可别照搬呀 大概会出错"},{"avatar":"//lain.bgm.tv/pic/user/m/000/26/12/261227.jpg","floor":"#8-6","id":"1487312","time":"2019-9-3 21:07","userId":"261227","userName":"chitanda＠Lv2","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">Cedar</span> 说: 为啥会变化..页面加载完成后就不会变了吧 你不是解析页面本身的数据的么?<br>那就改成按一次按钮刷新一次呀 位置的话就在<br>$(\"#grail .horizontalOptions\").append(<br>\"<...</q></div>不是…641偷懒了只解析页面拿不到新番数据"},{"avatar":"//lain.bgm.tv/pic/user/m/000/31/34/313469.jpg","floor":"#8-7","id":"1487316","time":"2019-9-3 21:12","userId":"313469","userName":"Cedar","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">chitanda＠Lv2</span> 说: 不是…641偷懒了只解析页面拿不到新番数据</q></div>新番数据也不是实时变化的呀 一周才变一次吧<br>用户第一次点按钮才获取数据, 之后就只需要解析页面啦<br>其实解析页面都不用了..按钮完全可以删了..<br>因为你已经算出结果并且显示在页面上了..用户只需要点一次按钮..再点一次按钮也不会有变化..<br>如果想看最新数据的话就让用户自己刷新页面就好啦 反正本来也不是高频动作<br>或者一定要最新的话..那就按一次获取一次数据然后修改一次页面就好啦<br><br>你愿意的话我可以帮着改改 把代码也优化得更漂亮一点"},{"avatar":"//lain.bgm.tv/pic/user/m/000/26/12/261227.jpg","floor":"#8-8","id":"1487348","time":"2019-9-3 22:15","userId":"261227","userName":"chitanda＠Lv2","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">Cedar</span> 说: 新番数据也不是实时变化的呀 一周才变一次吧<br>用户第一次点按钮才获取数据, 之后就只需要解析页面啦<br>其实解析页面都不用了..按钮完全可以删了..<br>因为你已经算出结果并且显示在页面上了..用户只需要点一次...</q></div>并不是，我意思是用户自己的数据需要拉API。你早上的持股信息和晚上的未必一样。而且我放按钮最主要的原因是为了让用户自己把握脚本的运行时间，页面一加载就跑脚本的话低网速下有一定概率跑不起来。<br>你想试你可以改改，主要我是感觉本来ico列表就够藏了，没必要直接放其他信息在页面上占位了"},{"avatar":"//lain.bgm.tv/pic/user/m/000/31/34/313469.jpg","floor":"#8-9","id":"1487362","time":"2019-9-3 22:38","userId":"313469","userName":"Cedar","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">chitanda＠Lv2</span> 说: 并不是，我意思是用户自己的数据需要拉API。你早上的持股信息和晚上的未必一样。而且我放按钮最主要的原因是为了让用户自己把握脚本的运行时间，页面一加载就跑脚本的话低网速下有一定概率跑不起来。<br>你想试你可...</q></div>我不是这个意思<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\"><br>早上到晚上不能一直开着一个页面吧<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\"> 刷新一下而已<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\"><br>而且如果你真的要考虑持股的话..那要是角色数量变了怎么办, 你标的数字的位置不就全都乱掉了..<br>所以说让用户自己刷新然后自己点按钮运行就好啦..用户做过其他操作那按按钮之前就必须刷新..<br>刷不出来就多刷几次..既然网速都那么慢了 拉API也可能失败不是嘛..<br><br>算了我写好后发给你看看吧.."},{"avatar":"//lain.bgm.tv/pic/user/m/000/31/34/313469.jpg","floor":"#8-10","id":"1487390","time":"2019-9-3 23:36","userId":"313469","userName":"Cedar","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">chitanda＠Lv2</span> 说: 并不是，我意思是用户自己的数据需要拉API。你早上的持股信息和晚上的未必一样。而且我放按钮最主要的原因是为了让用户自己把握脚本的运行时间，页面一加载就跑脚本的话低网速下有一定概率跑不起来。<br>你想试你可...</q></div>好了 基本没问题了 你试一下..<br>更新: 这个代码在持续修改中..<br><div class=\"codeHighlight\"><pre>// ==UserScript==<br>// @name         badge Calculator for tiny Grail<br>// @namespace    chitanda.Cedar.TinyGrailBadgeCalc<br>// @version      1.0<br>// @description  Calculate badge income for tiny Grail<br>// @author       chitanda, Cedar<br>// @include      /^https?://(bgm\\.tv|bangumi\\.tv)/user/.+$/<br>// ==/UserScript==<br><br>(function() {<br>  'use strict';<br><br>  const api = 'https://www.tinygrail.com/api/';<br>  function getData(url, callback) {<br>    if (!url.startsWith('http')) url = api + url;<br>    $.ajax({<br>      url: url,<br>      type: 'GET',<br>      xhrFields: {withCredentials: true},<br>      success: callback<br>    });<br>  }<br><br>  let fakeEl = $(document.createElement('span')).html('-')[0];<br>  let totalStockNumEl = fakeEl.cloneNode(true);<br>  let badgeCharaNumEl = fakeEl.cloneNode(true);<br>  let badgeStockNumEl = fakeEl.cloneNode(true);<br>  let stockIncomeEl = fakeEl.cloneNode(true);<br>  // let templeNumEl = fakeEl.cloneNode(true);<br>  // let templeStockNumEl = fakeEl.cloneNode(true);<br>  // let templeIncomeEl = fakeEl.cloneNode(true);<br>  // let totalIncomeEl = fakeEl.cloneNode(true);<br><br>  let elWrapper = $(document.createElement('span')).css('margin-left', '10px');<br>  let stockEl = $(document.createElement('div'))<br>    .css({'padding': '10px 0', 'font-weight': 'bold', 'font-size': '14px'})<br>    .append(<br>      $(document.createElement('div')).append(<br>        elWrapper.clone().html(\"持股总数：\").append(totalStockNumEl),<br>        elWrapper.clone().html(\"新番角色数：\").append(badgeCharaNumEl),<br>        elWrapper.clone().html(\"新番持股量：\").append(badgeStockNumEl),<br>        elWrapper.clone().html(\"角色股息：\").append(stockIncomeEl)<br>      ),<br>/*       $(document.createElement('div')).append(<br>        elWrapper.clone().html(\"圣殿数量：\").append(templeNumEl),<br>        elWrapper.clone().html(\"圣殿持股：\").append(templeStockNumEl),<br>        elWrapper.clone().html(\"圣殿股息：\").append(templeIncomeEl),<br>        elWrapper.clone().html(\"每周股息：\").append(totalIncomeEl)<br>      ) */<br>    );<br><br>  function countStocks(charaData) {<br>    let normalStockNum = 0;<br>    let badgeStockNum = 0;<br>    let stockIncome = 0;<br>    let badgeBox = document.getElementsByClassName('badgeBox');<br>    let charaName = document.querySelectorAll('.grail_list.chara_list .avatar.name');<br><br>    charaData.forEach((chara, i) => {<br>      stockIncome += chara.Rate*chara.State;<br>      let bonusNum = chara.Bonus;<br>      if (bonusNum) {<br>        badgeBox[i].innerHTML = bonusNum;<br>        badgeBox[i].style.visibility = 'visible';<br>        charaName[i].classList.add('badgeName');<br>        badgeStockNum += chara.State;<br>      }<br>      else {<br>        normalStockNum += chara.State;<br>      }<br>    });<br><br>    badgeCharaNumEl.innerHTML = document.getElementsByClassName('badgeName').length;<br>    badgeStockNumEl.innerHTML = badgeStockNum;<br>    totalStockNumEl.innerHTML = badgeStockNum + normalStockNum;<br>    stockIncomeEl.innerHTML = stockIncome.toFixed(2);<br>  }<br><br>  function calcIncome(charaData) {<br>    let bgmId = window.location.pathname.split('user/')[1];<br>    getData(`chara/user/assets/${bgmId}/true`, function(d) {<br>      if (d.State !== 0) return;<br>      let charaData = d.Value.Characters;<br>      countStocks(charaData);<br>      //countAssets(d.Value.Temples);<br>    });<br>  }<br><br>  let MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;<br>  let observer = new MutationObserver(function() {<br>      let $initTab = $('#initTab');<br>      if(!$initTab.length) return;<br>      observer.disconnect();<br>      let badgeBox = $(document.createElement('span')).addClass('badgeBox').html('0');<br>      $('#grail .grail_list.chara_list li').prepend(badgeBox);<br>      let $countBtn = $(document.createElement('a')).attr('href', \"javascript:void(0)\")<br>        .addClass(\"chiiBtn\").html('计算股息').on('click', calcIncome);<br>      $initTab.after($countBtn);<br>      $(\"#grail .horizontalOptions\").append(stockEl);<br>    });<br>  observer.observe(document.getElementById('user_home'), {'childList': true});<br>})();</pre></div>"},{"avatar":"//lain.bgm.tv/pic/user/m/000/26/12/261227.jpg","floor":"#8-11","id":"1487392","time":"2019-9-3 23:43","userId":"261227","userName":"chitanda＠Lv2","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">Cedar</span> 说: 好了 基本没问题了 你试一下..<br>// ==UserScript==<br>// <a href=\"/user/name\" class=\"l\">@名字</a>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;bad...</q></div>OK,效果还蛮好。<br>不过那个输出的信息你再加条css吧，字体加粗下，不然我自己加也行。。"},{"avatar":"//lain.bgm.tv/pic/user/m/000/31/34/313469.jpg","floor":"#8-12","id":"1487394","time":"2019-9-3 23:51","userId":"313469","userName":"Cedar","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">chitanda＠Lv2</span> 说: OK,效果还蛮好。<br>不过那个输出的信息你再加条css吧，字体加粗下，不然我自己加也行。。</q></div>好了 改了一下 CSS可以到时候再慢慢调整"},{"avatar":"//lain.bgm.tv/pic/user/m/000/26/12/261227.jpg","floor":"#8-13","id":"1487399","time":"2019-9-3 23:55","userId":"261227","userName":"chitanda＠Lv2","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">Cedar</span> 说: 好了 改了一下 CSS可以到时候再慢慢调整</q></div>OK.那就拿你这个版本上去用了"},{"avatar":"//lain.bgm.tv/pic/user/m/000/31/34/313469.jpg","floor":"#8-14","id":"1487400","time":"2019-9-3 23:59","userId":"313469","userName":"Cedar","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">chitanda＠Lv2</span> 说: OK.那就拿你这个版本上去用了</q></div>还是有些小细节可以调整的 不过暂时就这样吧 无关紧要的小细节可以等以后再改.."},{"avatar":"//lain.bgm.tv/pic/user/m/000/26/12/261227.jpg","floor":"#8-15","id":"1487401","time":"2019-9-4 00:00","userId":"261227","userName":"chitanda＠Lv2","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">Cedar</span> 说: 还是有些小细节可以调整的 不过暂时就这样吧 无关紧要的小细节可以等以后再改..</q></div>嗯，我先提交申请，过了再编辑下主楼"},{"avatar":"//lain.bgm.tv/pic/user/m/000/31/34/313469.jpg","floor":"#8-16","id":"1494175","time":"2019-9-17 00:28","userId":"313469","userName":"Cedar","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">chitanda＠Lv2</span> 说: 嗯，我先提交申请，过了再编辑下主楼</q></div>看到组件新版本过审了..<br>原来你看到的代码块有好多空行<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\"><br>可以试试启用<a href=\"https://bgm.tv/dev/app/1049\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">这个组件</a>美化一下<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\">"},{"avatar":"//lain.bgm.tv/pic/user/m/000/26/12/261227.jpg","floor":"#8-17","id":"1494176","time":"2019-9-17 00:31","userId":"261227","userName":"chitanda＠Lv2","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">Cedar</span> 说: 看到组件新版本过审了..<br>原来你看到的代码块有好多空行<br>可以试试启用这个组件美化一下</q></div>主要这边代码看的也少，所以就没怎么开别的组件"},{"avatar":"//lain.bgm.tv/pic/user/m/000/31/34/313469.jpg","floor":"#8-18","id":"1494183","time":"2019-9-17 00:38","userId":"313469","userName":"Cedar","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">chitanda＠Lv2</span> 说: 主要这边代码看的也少，所以就没怎么开别的组件</q></div>喔..主要是我看到很多空行不顺眼b38<br>总之如果下次想复制的话可以临时开启这个组件再复制 效果会好很多<br>(其实只要有code块的地方就能提升体验的 不一定是代码.."}]},{"avatar":"//lain.bgm.tv/pic/user/m/000/36/39/363973.jpg","floor":"#9","id":"1487387","time":"2019-9-3 23:30","userId":"363973","userName":"吾妻サラ","userSign":"(银河美少年，飒爽登场！)","message":"这里只有我不会写代码了<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\">","sub":[]},{"avatar":"//lain.bgm.tv/pic/user/m/000/31/34/313469.jpg","floor":"#10","id":"1503711","time":"2019-10-4 09:29","userId":"313469","userName":"Cedar","userSign":"(｡´-д-)","message":"好多功能!<br>去除分页好评!<br>圣殿持股单独列一行吧<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\"> 不然手机怎么看呢..<br>然后我上滑时好像没手滑过呀..也许改成点击图片返回会好点..或者干脆用CSS调整一下图片的宽和高..<br>然后新版本里圣殿股息不会只算250股了 是按献祭数量的一半计算的..然后具体加成也有点不同 不过这个应该已经算好了吧<br>希望圣殿那里的加成能显示成两位小数呀<br><br>小数应该是计算结果调用.toFixed(2)之后得到的吧 别的地方再搞舍入会增大误差的<br>另外想问问圣殿股息是用哪个api算出来的?","sub":[{"avatar":"//lain.bgm.tv/pic/user/m/000/26/12/261227.jpg","floor":"#10-1","id":"1503717","time":"2019-10-4 09:49","userId":"261227","userName":"chitanda＠Lv2","userSign":"","message":"圣殿股加了。<br>图片那个不改，反正想换头的直接一开始进来不点股息的时候的页面就可以换了。<br>圣殿股的规则改过。<br>小数我是最后才取2位的，前面用的都是API给的N位小数。<br>圣殿股息就是分页API的另一个完整API，那里有加成和献祭数"},{"avatar":"//lain.bgm.tv/pic/user/m/000/31/34/313469.jpg","floor":"#10-2","id":"1503722","time":"2019-10-4 10:11","userId":"313469","userName":"Cedar","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">chitanda＠Lv2</span> 说: 圣殿股加了。<br>图片那个不改，反正想换头的直接一开始进来不点股息的时候的页面就可以换了。<br>圣殿股的规则改过。<br>小数我是最后才取2位的，前面用的都是API给的N位小数。<br>圣殿股息就是分页API的另一个完整...</q></div>那我想进别人时光机看图怎么办<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\"> 现在手机上好像也点不到那个x 就当修复官方bug了..将来官方更新了也不会影响使用.."},{"avatar":"//lain.bgm.tv/pic/user/m/000/26/12/261227.jpg","floor":"#10-3","id":"1503725","time":"2019-10-4 10:17","userId":"261227","userName":"chitanda＠Lv2","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">Cedar</span> 说: 那我想进别人时光机看图怎么办 现在手机上好像也点不到那个x 就当修复官方bug了..将来官方更新了也不会影响使用..</q></div>看图不影响啊。你直接用官方自带的也行吧"},{"avatar":"//lain.bgm.tv/pic/user/m/000/31/34/313469.jpg","floor":"#10-4","id":"1503735","time":"2019-10-4 10:26","userId":"313469","userName":"Cedar","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">chitanda＠Lv2</span> 说: 看图不影响啊。你直接用官方自带的也行吧</q></div><span style=\"text-decoration: line-through;\">主要是我屏幕小 官方自带的图太大了..看不到修改封面的按钮..</span><br>看了源码之后感觉确实没必要改.."}]},{"avatar":"//lain.bgm.tv/pic/user/m/000/26/12/261227.jpg","floor":"#11","id":"1503757","time":"2019-10-4 10:39","userId":"261227","userName":"chitanda＠Lv2","userSign":"(BGM掉登陆次数:正正正一)","message":"过审啦","sub":[]},{"avatar":"//lain.bgm.tv/pic/user/m/000/31/34/313469.jpg","floor":"#12","id":"1504042","time":"2019-10-4 16:49","userId":"313469","userName":"Cedar","userSign":"(｡´-д-)","message":"我在你的代码的基础上改了改, 加了个进度条, 代码整洁了一些, 速度快了一些, MutationObserver也加回来了(setTimeout太耗资源了), 发给你看看吧?","sub":[{"avatar":"//lain.bgm.tv/pic/user/m/000/26/12/261227.jpg","floor":"#12-1","id":"1504321","time":"2019-10-4 21:13","userId":"261227","userName":"chitanda＠Lv2","userSign":"","message":"东西加了很多所以不想更新…你可以发我看看。<br>MutationObserver是因为我昨天测试的时候经常监控失败所以下掉了"},{"avatar":"//lain.bgm.tv/pic/user/m/000/31/34/313469.jpg","floor":"#12-2","id":"1504384","time":"2019-10-4 22:30","userId":"313469","userName":"Cedar","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">chitanda＠Lv2</span> 说: 东西加了很多所以不想更新…你可以发我看看。<br>MutationObserver是因为我昨天测试的时候经常监控失败所以下掉了</q></div>太长了 我发到<a href=\"https://paste.ubuntu.com/p/v6VZMm28rQ/\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">这儿</a>了<br>前面的代码除了开头的版本号和创建元素之类的代码 别的都没动..只是改了改顺序..但是拍卖函数好像改了? 好像原来出价不能低于底价的, 现在随便填都可以 只是低于底价不生效而已..(我没仔细看..<br>从222行开始基本都修改过..加了几个函数 把写法改简洁了一些..然后圣殿和角色股的获取改成了并行 提高了一点效率, 以及修改了一下变量名字, 按我自己的习惯把temp改成了temple, data改成了info之类的..(temp总让我联想到临时变量..)<br>然后新番角色数的显示我给加回来了, 为了排版整齐<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\"> 文字也对齐了, 还有几个加了浮动说明<br>关于你的第6点 因为我加了loading bar所以就把这个feature去掉了..你想加回来就在prepare函数开头加上就好..<br><br>如果想等加载完成才出按钮的话, 要加上subtree才能让MutationObserver正常监控的..不过我觉得像旧版那样也挺好, 不需要等加载结束再出按钮..能少调用几次函数 少触发几次..(虽然我没改..<br><br>啊 326行忘了注释掉了..最好删掉吧..<br>顺便..希望能改一改新番股的颜色? 我觉得deepskyblue或dodgerblue之类的颜色也许更好?"},{"avatar":"//lain.bgm.tv/pic/user/m/000/26/12/261227.jpg","floor":"#12-3","id":"1504517","time":"2019-10-5 02:38","userId":"261227","userName":"chitanda＠Lv2","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">Cedar</span> 说: 太长了 我发到这儿了<br>前面的代码除了开头的版本号和创建元素之类的代码 别的都没动..只是改了改顺序..但是拍卖函数好像改了? 好像原来出价不能低于20的, 现在只要不低于底价就可以了..我没仔细看.....</q></div>这两个蓝色和超链接hover后的颜色太接近了，区分度不够啊。。"},{"avatar":"//lain.bgm.tv/pic/user/m/000/31/34/313469.jpg","floor":"#12-4","id":"1504519","time":"2019-10-5 02:52","userId":"313469","userName":"Cedar","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">chitanda＠Lv2</span> 说: 这两个蓝色和超链接hover后的颜色太接近了，区分度不够啊。。</q></div>bgm的蓝色是#0084B4 确实差不多..<br>但我觉得没必要给hover加颜色吧 或者hover了就改个亮度稍微高/低一点的颜色再加个下划线, 就像普通超链接一样?<br>或者反过来? 普通的就是蓝的, hover了就变紫色比如blueviolet? 我试了一下感觉效果还不错<br>其实那个红圈的区分度已经挺高了..加这个颜色还麻烦..现在有了夜间模式, 还要为了适配夜间模式多写几条CSS..不然夜间模式里的字就全变白了..<br>维持原状也可以吧..但是紫色作为默认颜色确实不怎么好看<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\"> 而且紫色和黑色挺相近的 感觉区分度不够高.."},{"avatar":"//lain.bgm.tv/pic/user/m/000/26/12/261227.jpg","floor":"#12-5","id":"1504525","time":"2019-10-5 03:27","userId":"261227","userName":"chitanda＠Lv2","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">Cedar</span> 说: bgm的蓝色是#0084B4 确实差不多..<br>但我觉得没必要给hover加颜色吧 或者hover了就改个亮度稍微高/低一点的颜色再加个下划线, 就像普通超链接一样?<br>或者反过来? 普通的就是蓝的, h...</q></div>不是，我意思是你说的那两个蓝色和默认的a链接hover颜色太近了，区分度不够。<br>而且我现在的css没做调整啊，关灯的话就默认被白色覆盖掉了变成了只有加粗。<br>紫色是只有开灯才看得到的。"},{"avatar":"//lain.bgm.tv/pic/user/m/000/31/34/313469.jpg","floor":"#12-6","id":"1504527","time":"2019-10-5 03:38","userId":"313469","userName":"Cedar","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">chitanda＠Lv2</span> 说: 不是，我意思是你说的那两个蓝色和默认的a链接hover颜色太近了，区分度不够。<br>而且我现在的css没做调整啊，关灯的话就默认被白色覆盖掉了变成了只有加粗。<br>紫色是只有开灯才看得到的。</q></div>本来我的意思是没区分度就没区分度吧 不要紧的b38<br>要有区分度的话..要不就弄成新番默认deepskyblue, hover就变成blueviolet吧..这样hover之后就可以跟默认的a链接hover颜色想区别了..<br>我说的麻烦的意思是..如果文字要改颜色的话, 关灯的情况也要考虑吧..不然只有开灯时文字有颜色的区别, 一关灯就都变白了, 像个半成品一样, 不太好..那如果要考虑关灯的情况的话 CSS就要写四条了..要选四个颜色, 有点麻烦..所以找不到满意的颜色的话 干脆就别加颜色了..靠新番的圆圈已经足够有区分度了.."}]},{"avatar":"//lain.bgm.tv/pic/user/m/000/31/34/313469.jpg","floor":"#13","id":"1504718","time":"2019-10-5 15:03","userId":"313469","userName":"Cedar","userSign":"(｡´-д-)","message":"官方支持了<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\"> 不过这个插件能看其他人的 内容更细致 还能出价 倒也还没过时..","sub":[]},{"avatar":"//lain.bgm.tv/pic/user/m/000/31/34/313469.jpg","floor":"#14","id":"1505240","time":"2019-10-6 13:00","userId":"313469","userName":"Cedar","userSign":"(｡´-д-)","message":"想问问现在的情况b38..我的pull request 被 reject 了么?<br>发现了一个bug 我又修改了一下 <a href=\"https://paste.ubuntu.com/p/KHG7jn3NZv/\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">pull request</a> 求过b38","sub":[{"avatar":"//lain.bgm.tv/pic/user/m/000/26/12/261227.jpg","floor":"#14-1","id":"1505639","time":"2019-10-6 23:22","userId":"261227","userName":"chitanda＠Lv2","userSign":"","message":"圣殿价格那个么？我这边也改了等641过。其实主要是因为有些新特性我根本没去看，我怕越到后面到时候你的代码我越难改。你不然直接fork个分支出去吧。。"},{"avatar":"//lain.bgm.tv/pic/user/m/000/31/34/313469.jpg","floor":"#14-2","id":"1505665","time":"2019-10-7 00:09","userId":"313469","userName":"Cedar","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">chitanda＠Lv2</span> 说: 圣殿价格那个么？我这边也改了等641过。其实主要是因为有些新特性我根本没去看，我怕越到后面到时候你的代码我越难改。你不然直接fork个分支出去吧。。</q></div>fork出去是说我自己提交一个组件么? 但是我们代码重复部分太多了..我觉得没必要啊..<br><br>我大部分工作只是把你的代码拆成了几个函数 思路清楚一点, 将来容易改..<br>calcTotalIncome 调用 prepare 删除元素并且添加loading条, 然后让 calcStockIncome 和 calcTempleIncome 并行, 最后去掉loading条并求出总收入..逻辑就是这样而已..<br>新特性我也是现学的b38 其实就只有一个Promise..<br>Promise.all( [PromiseA, PromiseB] ).then(/*do something*/) 的作用就是让两个函数并行, 最后要分别调用一下resolve()..别的基本就没了..其实很好读的<br>保持函数跟小圣杯组件一致就可以了<br><br>又<a href=\"https://paste.ubuntu.com/p/mJNpFtKhc2/\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">微调</a>了一下文字之类的东西..<br>话说为何用组件的圣殿拍卖没法成功? console提示说 \"This request has been blocked; the content must be served over HTTPS.\"<br>但是角色页也是https 却可以成功?"},{"avatar":"//lain.bgm.tv/pic/user/m/000/26/12/261227.jpg","floor":"#14-3","id":"1505716","time":"2019-10-7 07:18","userId":"261227","userName":"chitanda＠Lv2","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">Cedar</span> 说: fork出去是说我自己提交一个组件么? 但是我们代码重复部分太多了..我觉得没必要啊..<br><br>我大部分工作只是把你的代码拆成了几个函数 思路清楚一点, 将来容易改..<br>calcTotalIncome 调...</q></div>我刚试了下没问题…你哪个域名下不能买…"},{"avatar":"//lain.bgm.tv/pic/user/m/000/31/34/313469.jpg","floor":"#14-4","id":"1505799","time":"2019-10-7 11:28","userId":"313469","userName":"Cedar","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">chitanda＠Lv2</span> 说: 我刚试了下没问题…你哪个域名下不能买…</q></div><a href=\"https://bgm.tv\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">https://bgm.tv</a>"},{"avatar":"//lain.bgm.tv/pic/user/m/000/26/12/261227.jpg","floor":"#14-5","id":"1505822","time":"2019-10-7 12:11","userId":"261227","userName":"chitanda＠Lv2","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">Cedar</span> 说: https://bgm.tv</q></div>没问题…"},{"avatar":"//lain.bgm.tv/pic/user/m/000/31/34/313469.jpg","floor":"#14-6","id":"1505864","time":"2019-10-7 13:44","userId":"313469","userName":"Cedar","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">chitanda＠Lv2</span> 说: 没问题…</q></div>原来是我的api写错了..现在<a href=\"https://paste.ubuntu.com/p/CNct3FYN9D/\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">这个</a>可以了..<br>真的不打算 merge 了么..建议你跑一下代码再决定..效果类似这样<br><img src=\"https://s2.ax1x.com/2019/10/07/u2h7wQ.png\" class=\"code\" alt>"},{"avatar":"//lain.bgm.tv/pic/user/m/000/26/12/261227.jpg","floor":"#14-7","id":"1505880","time":"2019-10-7 14:27","userId":"261227","userName":"chitanda＠Lv2","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">Cedar</span> 说: 原来是我的api写错了..现在这个可以了..<br>真的不打算 merge 了么..建议你跑一下代码再决定..效果类似这样</q></div>虽然我知道你一片好意，不过确实不想加进去。<br>一来我觉得没必要显示这么多信息，就我现在这个组件有些人都觉得显示的太多了；二来自己代码我容易把控，后面不管是更新版本还是改bug都方便，用别人的万一出问题了改起来就没那么随心所欲，本来组件审核就慢了。"},{"avatar":"//lain.bgm.tv/pic/user/m/000/31/34/313469.jpg","floor":"#14-8","id":"1505953","time":"2019-10-7 17:16","userId":"313469","userName":"Cedar","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">chitanda＠Lv2</span> 说: 虽然我知道你一片好意，不过确实不想加进去。<br>一来我觉得没必要显示这么多信息，就我现在这个组件有些人都觉得显示的太多了；二来自己代码我容易把控，后面不管是更新版本还是改bug都方便，用别人的万一出问题了...</q></div><img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\"> 那我就不强求了..<br>我自己写个组件吧..能审核通过就审核通过..不能的话我就自己用吧..<br>如果有人觉得这个组件显示的内容太多, 也许我们可以侧重不同的方向, 这样组件功能也不至于重复..<br><br>组件链接 <a href=\"https://bgm.tv/dev/app/1272\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">小圣杯股息计算 详细信息版</a><br>如果过审了欢迎帮我宣传一下.."},{"avatar":"//lain.bgm.tv/pic/user/m/000/26/12/261227.jpg","floor":"#14-9","id":"1505959","time":"2019-10-7 17:28","userId":"261227","userName":"chitanda＠Lv2","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">Cedar</span> 说:  那我就不强求了..<br>我自己写个组件吧..能审核通过就审核通过..不能的话我就自己用吧..<br>如果有人觉得这个组件显示的内容太多, 也许我们可以侧重不同的方向, 这样组件功能也不至于重复..<br><br>组件链接...</q></div>好…"}]},{"avatar":"//lain.bgm.tv/pic/user/m/000/26/12/261227.jpg","floor":"#15","id":"1533437","time":"2019-12-6 09:45","userId":"261227","userName":"chitanda＠Lv2","userSign":"(BGM掉登陆次数:正正正一)","message":"Update@20191206<br>由于641的新版本隐藏了其他用户的持股详情，现在该插件只能准确查看自己的股息，对于其他人，只能正常显示圣殿股信息了。如果只对股息有需求的可以关插件转投官方的了","sub":[{"avatar":"//lain.bgm.tv/pic/user/m/000/14/27/142735.jpg","floor":"#15-1","id":"1533456","time":"2019-12-6 10:23","userId":"z55456489","userName":"ofo","userSign":"","message":"个人主页点不开神殿大图这个改动很贴心"},{"avatar":"//lain.bgm.tv/pic/user/m/000/18/83/188332.jpg","floor":"#15-2","id":"1533459","time":"2019-12-6 10:32","userId":"lostanother","userName":"Another","userSign":"","message":"等裸奔党成主流就可以继续用了<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\">"}]}]