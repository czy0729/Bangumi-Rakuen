[{"avatar":"//lain.bgm.tv/pic/user/m/000/02/60/26024.jpg","floor":"#2","id":"1441929","time":"2019-5-10 13:58","userId":"everpcpc","userName":"蜜瓜改二@五月病🍭","userSign":"","message":"<img src=\"/img/smiles/tv/62.gif\" smileid=\"101\" alt=\"(bgm85)\"> 好多坑","sub":[]},{"avatar":"//lain.bgm.tv/pic/user/m/000/41/90/419012.jpg","floor":"#3","id":"1441947","time":"2019-5-10 15:54","userId":"ekibun","userName":"ekibun","userSign":"","message":"/ep/{id}/status/{status} status传入的值只对query的id有效，post里的ep无论status是任何值总会变成“看过”<br><br>另外很好奇你们怎么管理两套登录状态的，毕竟API即使每次都refresh还是会掉。。。","sub":[{"avatar":"//lain.bgm.tv/pic/user/m/000/40/82/408230.jpg","floor":"#3-1","id":"1442042","time":"2019-5-11 03:37","userId":"408230","userName":"astrea","userSign":"","message":"第一个加上去了<br><br><span style=\"text-decoration: line-through;\">原来会掉吗，侠坐茶说</span>"},{"avatar":"//lain.bgm.tv/pic/user/m/000/41/90/419012.jpg","floor":"#3-2","id":"1442049","time":"2019-5-11 05:19","userId":"ekibun","userName":"ekibun","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">astrea</span> 说: 第一个加上去了 原来会掉吗，侠坐茶说</q></div>我不清楚是不是我代码有问题，不用api有段时间了<br>现象大概是在refreshtoken能返回token的情况下（好像还能正确获取到进度信息），会偶然出现无法获取和设置收藏状态。<br>这时候重新授权问题消失。<br>检查了一下，获取到的token应该是没问题的，因为每次都会根据token的user_id更新用户名和头像：<a href=\"https://github.com/ekibun/Bangumi/blob/c85321b77142c3c34d58755e505160cf763fb2f3/app/src/main/java/soko/ekibun/bangumi/ui/main/MainPresenter.kt#L77\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">https://github.com/ekibun/Bangum ... ainPresenter.kt#L77</a>"},{"avatar":"//lain.bgm.tv/pic/user/m/000/40/82/408230.jpg","floor":"#3-3","id":"1442097","time":"2019-5-11 12:11","userId":"408230","userName":"astrea","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">ekibun</span> 说: 我不清楚是不是我代码有问题，不用api有段时间了<br>现象大概是在refreshtoken能返回token的情况下（好像还能正确获取到进度信息），会偶然出现无法获取和设置收藏状态。<br>这时候重新授权问题消失...</q></div><span style=\"text-decoration: line-through;\">其实刷新授权我本身写的也有点小bug，修好了看看</span>"},{"avatar":"//lain.bgm.tv/pic/user/m/000/40/82/408230.jpg","floor":"#3-4","id":"1442488","time":"2019-5-13 01:44","userId":"408230","userName":"astrea","userSign":"","message":"> post里的ep无论status是任何值总会变成“看过”<br><br>我刚才突然发现如果status是抛弃那就不受影响..改了一下这句话"}]},{"avatar":"//lain.bgm.tv/pic/user/m/000/06/98/69822.jpg","floor":"#4","id":"1441953","time":"2019-5-10 16:13","userId":"shadowdreamer","userName":"CureDovahkinn🤔","userSign":"(プリキュアなりたい)","message":"楼主辛苦了（","sub":[]},{"avatar":"//lain.bgm.tv/pic/user/m/000/42/60/426050.jpg","floor":"#5","id":"1441965","time":"2019-5-10 17:18","userId":"oalvay","userName":"Oalvay","userSign":"","message":"第二个学到了","sub":[]},{"avatar":"//lain.bgm.tv/pic/user/m/000/28/16/281628.jpg","floor":"#6","id":"1441967","time":"2019-5-10 17:25","userId":"rhilip","userName":"Rhilip","userSign":"","message":"我个人觉得这个行为就API说明并没有问题，毕竟说明是<span style=\"font-weight:bold;\">更新进度到指定话数/卷数</span><img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\"><div class=\"quote\"><q>1. 对于动画话数不是从第一话开始的作品，比如[一拳超人第二季](https://bgm.tv/subject/193619)从第13话开始，但是如果尝试传入`watched_eps=13`则会把用户的第13话到第25话全部更新为看过。没错，这里的`watched_eps=${x}`准确的说指的是“从这部作品的真正的第一话（对于一拳超人这是第13话）开始往后数x话，并把他们全部标为看过”。</q></div>至于第一话还是第13话的问题，已经有其他讨论了： <a href=\"https://bgm.tv/group/topic/350641\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">https://bgm.tv/group/topic/350641</a>","sub":[{"avatar":"//lain.bgm.tv/pic/user/m/000/28/76/287622.jpg","floor":"#6-1","id":"1442026","time":"2019-5-11 00:24","userId":"trim21","userName":"Trim21","userSign":"","message":"这个api是有问题的，因为subject/${subject_id}中返回值有一个sort字段，这个字段对应着bgm网页上显示的集数<br><br>如果你按照sort去调用这个api，就会踩坑<br><br>这个api现在的行为实际上是网页右侧的修改完成度，而不是所描述的修改播放进度<br><br>在某集tooltip中调用看到本集的话，不会清空某集之后的进度的<br><br>如果这个api叫做修改条目完成度的话倒是一点问题都没有"},{"avatar":"//lain.bgm.tv/pic/user/m/000/40/82/408230.jpg","floor":"#6-2","id":"1442038","time":"2019-5-11 02:55","userId":"408230","userName":"astrea","userSign":"","message":"其实你可以注意到这三点是有先后顺序的，第一点是有争议（到底该传入1还是13），到了第三点则是严重的问题导致此api直接不可用（会重置用户进度状态），所以综合来说我给出了强烈建议避免使用此api更新动画进度的建议。<br>回到第一点，要看你怎么定义有问题，对我来说容易被误解容易出错的说明就是有问题的，就像trim21所说在任何api里都是拿不到一拳超人第一话其实是1这个数据的，同时api又会返回一个sort（话数）=13，我相信不止我一个人会误解这一点，所以就在建议里说明了一下。"}]},{"avatar":"//lain.bgm.tv/pic/user/m/000/08/02/80276.jpg","floor":"#7","id":"1441968","time":"2019-5-10 17:32","userId":"yamada","userName":"Aoi","userSign":"","message":"Nice.","sub":[]},{"avatar":"//lain.bgm.tv/pic/user/m/000/28/76/287622.jpg","floor":"#8","id":"1442024","time":"2019-5-11 00:17","userId":"trim21","userName":"Trim21","userSign":"(异端比异教徒更可恨)","message":"我能理解你想用markdown，但是bgm不支持啊<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\"><br><br>建议：在Oauth认证过程中，如果是bgm服务器那边，可以直接把用户重定向回授权链接，这样在用户浏览器中的行为是他点了bgm的授权图标但是没反应，而不是出了什么错需要重新进行授权<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\"><br><br>bgm的社区化开发还在吗 @sai","sub":[{"avatar":"//lain.bgm.tv/pic/user/m/000/41/90/419012.jpg","floor":"#8-1","id":"1442027","time":"2019-5-11 00:30","userId":"ekibun","userName":"ekibun","userSign":"","message":"要不写个md转bbcode的插件（伸手"},{"avatar":"//lain.bgm.tv/pic/user/m/000/28/76/287622.jpg","floor":"#8-2","id":"1442028","time":"2019-5-11 00:32","userId":"trim21","userName":"Trim21","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">ekibun</span> 说: 要不写个md转bbcode的插件（伸手</q></div>我动过这个念头，发现没有现成的可调用的库，没写"},{"avatar":"//lain.bgm.tv/pic/user/m/000/40/82/408230.jpg","floor":"#8-3","id":"1442036","time":"2019-5-11 02:46","userId":"408230","userName":"astrea","userSign":"","message":"用markdown编辑器写的这个懒得改了，我相信愿意读这篇文章的开发者都有脑内渲染markdown的能力:P<br>如果要做发帖估计我会研究一下怎么markdown转bbcode，不过这块目前app完全没做，不知道第一版发出来之前有没有时间研究一下"},{"avatar":"//lain.bgm.tv/pic/user/m/000/28/76/287622.jpg","floor":"#8-4","id":"1442039","time":"2019-5-11 02:58","userId":"trim21","userName":"Trim21","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">astrea</span> 说: 用markdown编辑器写的这个懒得改了，我相信愿意读这篇文章的开发者都有脑内渲染markdown的能力:P<br>如果要做发帖估计我会研究一下怎么markdown转bbcode，不过这块目前app完全没做...</q></div><a href=\"https://www.trim21.cn/md2bbc\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">https://www.trim21.cn/md2bbc</a><br>((("},{"avatar":"//lain.bgm.tv/pic/user/m/000/28/76/287622.jpg","floor":"#8-5","id":"1442040","time":"2019-5-11 02:59","userId":"trim21","userName":"Trim21","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">ekibun</span> 说: 要不写个md转bbcode的插件（伸手</q></div>写插件太麻烦了，写了个api"},{"avatar":"//lain.bgm.tv/pic/user/m/000/40/82/408230.jpg","floor":"#8-6","id":"1442045","time":"2019-5-11 04:08","userId":"408230","userName":"astrea","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">Trim21</span> 说: https://www.trim21.cn/md2bbc<br>(((</q></div>看着还不错！是怎么实现的？"},{"avatar":"//lain.bgm.tv/pic/user/m/000/28/76/287622.jpg","floor":"#8-7","id":"1442046","time":"2019-5-11 04:13","userId":"trim21","userName":"Trim21","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">astrea</span> 说: 看着还不错！是怎么实现的？</q></div><a href=\"https://github.com/Trim21/personal-website/blob/766ee50f5b8641ee6c767bb3c2cc2a0e7602e047/app/md2bbc.py\" target=\"_blank\" rel=\"nofollow external noopener\" class=\"l\">https://github.com/Trim21/person ... 2e047/app/md2bbc.py</a>"},{"avatar":"//lain.bgm.tv/pic/user/m/000/41/90/419012.jpg","floor":"#8-8","id":"1442073","time":"2019-5-11 11:23","userId":"ekibun","userName":"ekibun","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">Trim21</span> 说: 写插件太麻烦了，写了个api</q></div>效率极高，接下来是bbcode转md（再次伸手"},{"avatar":"//lain.bgm.tv/pic/user/m/000/28/76/287622.jpg","floor":"#8-9","id":"1442074","time":"2019-5-11 11:24","userId":"trim21","userName":"Trim21","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">ekibun</span> 说: 效率极高，接下来是bbcode转md（再次伸手</q></div>多喝热水少做梦.jpg"},{"avatar":"//lain.bgm.tv/pic/user/m/000/28/76/287622.jpg","floor":"#8-10","id":"1442099","time":"2019-5-11 12:16","userId":"trim21","userName":"Trim21","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">ekibun</span> 说: 效率极高，接下来是bbcode转md（再次伸手</q></div>其实为啥会有bbcode转markdown的需求，我想不到任何使用的场景<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\"><br><br>我之前想过用Markdown来发帖但是没有类似的转换工具，所以才写了一个。<br>但bbcode转markdown到底要什么情况下从能用的到，会bbcode又不会markdown的人又怎么会有markdown的使用需求。。。"},{"avatar":"//lain.bgm.tv/pic/user/m/000/41/90/419012.jpg","floor":"#8-11","id":"1442101","time":"2019-5-11 12:20","userId":"ekibun","userName":"ekibun","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">Trim21</span> 说: 其实为啥会有bbcode转markdown的需求，我想不到任何使用的场景 我之前想过用Markdown来发帖但是没有类似的转换工具，所以才写了一个。 但bbcode转markdown到底要什么情况下从能用的到，会bbcode又不会markdown的人又怎么会有markdown的使用需求。。。</q></div>修改帖子拿到的是bbcode啊<br><span style=\"text-decoration: line-through;\">混合编辑似乎也不错</span>"},{"avatar":"//lain.bgm.tv/pic/user/m/000/28/76/287622.jpg","floor":"#8-12","id":"1442102","time":"2019-5-11 12:22","userId":"trim21","userName":"Trim21","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">ekibun</span> 说: 修改帖子拿到的是bbcode啊<br>混合编辑似乎也不错</q></div>那我建议你保留原本的markdown再修改之后再转换一次"},{"avatar":"//lain.bgm.tv/pic/user/m/000/30/42/304246.jpg","floor":"#8-13","id":"1444849","time":"2019-5-18 21:21","userId":"304246","userName":"Rくん","userSign":"","message":"我觉得大家都是目力markdown的，就像看到“b38”的时候，脑子里就已经出现那个影响了。"},{"avatar":"//lain.bgm.tv/pic/user/m/000/28/76/287622.jpg","floor":"#8-14","id":"1444885","time":"2019-5-18 23:07","userId":"trim21","userName":"Trim21","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">Rくん</span> 说: 我觉得大家都是目力markdown的，就像看到“b38”的时候，脑子里就已经出现那个影响了。</q></div>我人眼渲染markdown全靠编辑器的语法高亮，如果大家都是同一个颜色我就抓瞎了"}]},{"avatar":"//lain.bgm.tv/pic/user/m/000/28/76/287622.jpg","floor":"#9","id":"1442034","time":"2019-5-11 02:40","userId":"trim21","userName":"Trim21","userSign":"(异端比异教徒更可恨)","message":"再补充一个，calendar里面的name_cn是经过html escape过的，需要你在使用的时候unescape","sub":[{"avatar":"//lain.bgm.tv/pic/user/m/000/40/82/408230.jpg","floor":"#9-1","id":"1442037","time":"2019-5-11 02:47","userId":"408230","userName":"astrea","userSign":"","message":"加上去了！"}]},{"avatar":"//lain.bgm.tv/pic/user/m/000/24/01/240140.jpg","floor":"#10","id":"1444029","time":"2019-5-16 17:13","userId":"igaryhe","userName":"Dan","userSign":"","message":"发现一个不知道算不算bug的feature：<br>仅自己可见的收藏条目，用/user/:user_id/collection貌似可以获取到……这个接口是不需要身份验证的","sub":[{"avatar":"//lain.bgm.tv/pic/user/m/000/28/76/287622.jpg","floor":"#10-1","id":"1444032","time":"2019-5-16 17:25","userId":"trim21","userName":"Trim21","userSign":"","message":"仅自己可见恐怕说的是吐槽。。。"},{"avatar":"//lain.bgm.tv/pic/user/m/000/24/01/240140.jpg","floor":"#10-2","id":"1444090","time":"2019-5-16 20:59","userId":"igaryhe","userName":"Dan","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">Trim21</span> 说: 仅自己可见恐怕说的是吐槽。。。</q></div>应该不是，我退出登录之后看自己的“在看”是没有“仅自己可见”的条目的"},{"avatar":"//lain.bgm.tv/pic/user/m/000/28/76/287622.jpg","floor":"#10-3","id":"1444188","time":"2019-5-17 01:09","userId":"trim21","userName":"Trim21","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">Dan</span> 说: 应该不是，我退出登录之后看自己的“在看”是没有“仅自己可见”的条目的</q></div>在你发帖的时候，我看到你在看的动画是18条，在看的电视剧1条。然后API返回数据里是19个元素，应该是对应的吧。"},{"avatar":"//lain.bgm.tv/pic/user/m/000/24/01/240140.jpg","floor":"#10-4","id":"1444402","time":"2019-5-17 20:48","userId":"igaryhe","userName":"Dan","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">Trim21</span> 说: 在你发帖的时候，我看到你在看的动画是18条，在看的电视剧1条。然后API返回数据里是19个元素，应该是对应的吧。</q></div>虽然写的是18条，但是数起来是17（"},{"avatar":"//lain.bgm.tv/pic/user/m/000/28/76/287622.jpg","floor":"#10-5","id":"1444405","time":"2019-5-17 20:53","userId":"trim21","userName":"Trim21","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">Dan</span> 说: 虽然写的是18条，但是数起来是17（</q></div>ylrc<br>不过我刚刚发现，个人主页这个预览也有可能会暴露<img src=\"/img/smiles/tv/15.gif\" smileid=\"54\" alt=\"(bgm38)\"><br><br>比如你个人主页的在看显示了一个“向山进发第二季”的条目，但是在看的全部列表里面没有"},{"avatar":"//lain.bgm.tv/pic/user/m/000/24/01/240140.jpg","floor":"#10-6","id":"1444436","time":"2019-5-17 22:00","userId":"igaryhe","userName":"Dan","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">Trim21</span> 说: ylrc<br>不过我刚刚发现，个人主页这个预览也有可能会暴露<br><br>比如你个人主页的在看显示了一个“向山进发第二季”的条目，但是在看的全部列表里面没有</q></div>主页那个应该是第三季？"},{"avatar":"//lain.bgm.tv/pic/user/m/000/28/76/287622.jpg","floor":"#10-7","id":"1444438","time":"2019-5-17 22:01","userId":"trim21","userName":"Trim21","userSign":"","message":"<div class=\"quote\"><q><span style=\"font-weight:bold;\">Dan</span> 说: 主页那个应该是第三季？</q></div>我这里看到的是主页里第二季和第三季都有，第三季在第一行，第二季在第二行"},{"avatar":"//lain.bgm.tv/pic/user/m/000/40/82/408230.jpg","floor":"#10-8","id":"1444522","time":"2019-5-18 02:48","userId":"408230","userName":"astrea","userSign":"","message":"<span style=\"text-decoration: line-through;\">试了下确实有这个问题...加上去了</span><br>我想了下这其实不算一个坑更像是一个bug，应该去github开个issue？"}]},{"avatar":"//lain.bgm.tv/pic/user/m/000/45/62/456208.jpg","floor":"#11","id":"1444124","time":"2019-5-16 21:57","userId":"sukaretto","userName":"czy0729","userSign":"(安卓/iOS Bgm App http://bgm.tv/group/topic/350677 ...)","message":"搜索的提醒用到了<img src=\"/img/smiles/tv/01.gif\" smileid=\"40\" alt=\"(bgm24)\">","sub":[]},{"avatar":"//lain.bgm.tv/pic/user/m/000/20/02/200242.jpg","floor":"#12","id":"1444844","time":"2019-5-18 20:53","userId":"h82258652","userName":"h82258652","userSign":"","message":"貌似cookie那个问题不仅仅是搜索有，我自己在写的app，图片这块也是偶尔会加载失败。","sub":[]}]